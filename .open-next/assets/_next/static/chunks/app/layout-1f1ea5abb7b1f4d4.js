(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{30347:()=>{},89548:(t,e,i)=>{Promise.resolve().then(i.t.bind(i,30347,23)),Promise.resolve().then(i.bind(i,94819))},94819:(t,e,i)=>{"use strict";i.d(e,{A:()=>o,AuthProvider:()=>u});var r=i(95155),a=i(12115),n=i(12393);let s=(0,a.createContext)(void 0);function o(){let t=(0,a.useContext)(s);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}function u(t){let{children:e}=t,[i,o]=(0,a.useState)(null),[u,c]=(0,a.useState)(null),[l,h]=(0,a.useState)(!0),[d,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let t="https://tqlnqqrrpzmdpgijxiqk.supabase.co",e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxbG5xcXJycHptZHBnaWp4aXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMTUwNjAsImV4cCI6MjA2NjY5MTA2MH0.ZDCY7DSswAgcUHFlDl3S0BDDXpX3qmyViWXsIGFhwkw";if(!t||!e){console.error("Missing Supabase configuration"),h(!1);return}let i=(0,n.UU)(t,e);p(i);let{data:{session:r}}=await i.auth.getSession();o(r),r&&await w(r.user.id);let{data:{subscription:a}}=i.auth.onAuthStateChange(async(t,e)=>{o(e),(null==e?void 0:e.user)?await w(e.user.id):c(null),h(!1)});return h(!1),()=>a.unsubscribe()})()},[]);let w=async t=>{try{let t=await fetch("/api/auth/session");if(t.ok){let e=await t.json();c(e.user)}}catch(t){console.error("Error fetching user:",t)}},b=async(t,e)=>{if(!d)return{error:Error("Supabase not initialized")};let{error:i}=await d.auth.signInWithPassword({email:t,password:e});return{error:i}},I=async(t,e)=>{if(!d)return{error:Error("Supabase not initialized")};let{error:i}=await d.auth.signUp({email:t,password:e,options:{emailRedirectTo:"".concat(window.location.origin,"/api/auth/callback?next=/onboarding")}});return{error:i}},f=async()=>{if(d){await d.auth.signOut();try{await fetch("/api/auth/sign-out",{method:"POST"})}catch(t){console.error("Error calling sign out API:",t)}}},g=async t=>{if(!d)return{error:Error("Supabase not initialized")};let{error:e}=await d.auth.signInWithOAuth({provider:t,options:{redirectTo:"".concat(window.location.origin,"/api/auth/callback?next=/dashboard")}});return{error:e}};return(0,r.jsx)(s.Provider,{value:{session:i,user:u,loading:l,signIn:b,signUp:I,signOut:f,signInWithProvider:g},children:e})}}},t=>{var e=e=>t(t.s=e);t.O(0,[690,105,358],()=>e(89548)),_N_E=t.O()}]);