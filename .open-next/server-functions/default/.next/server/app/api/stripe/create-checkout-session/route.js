(()=>{var e={};e.id=9890,e.ids=[9890],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},36463:(e,t,r)=>{"use strict";r.d(t,{v:()=>s});class o{constructor(){this.logLevel=process.env.NEXT_PUBLIC_LOG_LEVEL||"info",this.setupProductionLogging()}static getInstance(){return o.instance||(o.instance=new o),o.instance}shouldLog(e){let t={debug:0,info:1,warn:2,error:3};return t[e]>=t[this.logLevel]}formatMessage(e,t,r){let o=new Date().toISOString(),s=r?` ${JSON.stringify(r)}`:"";return`[${o}] [${e.toUpperCase()}] ${t}${s}`}async setupProductionLogging(){try{let{getEnvVar:e}=await Promise.resolve().then(r.bind(r,43294)),t=await e("LOGGING_SERVICE");if("sentry"===t)await e("SENTRY_DSN")&&console.warn("Sentry logging not available in Cloudflare Workers environment");else if("logflare"===t){let t=await e("LOGFLARE_API_KEY"),r=await e("LOGFLARE_SOURCE_ID");t&&r&&console.warn("Winston-Logflare logging not available in Cloudflare Workers environment")}else if("datadog"===t){let t=await e("DATADOG_API_KEY");if(t){let{datadogLogs:e}=await r.e(6666).then(r.bind(r,96666));e.init({clientToken:t,site:"datadoghq.com",forwardErrorsToLogs:!0}),this.productionLogger=e}}}catch(e){console.error("Failed to initialize production logging:",e)}}debug(e,t){this.shouldLog("debug")&&console.debug(this.formatMessage("debug",e,t))}info(e,t){this.shouldLog("info")&&(console.info(this.formatMessage("info",e,t)),this.productionLogger&&(this.productionLogger.captureMessage?this.productionLogger.captureMessage(e,"info",t):this.productionLogger.logger&&this.productionLogger.logger.info(e,t)))}warn(e,t){this.shouldLog("warn")&&(console.warn(this.formatMessage("warn",e,t)),this.productionLogger&&(this.productionLogger.captureMessage?this.productionLogger.captureMessage(e,"warning",t):this.productionLogger.logger&&this.productionLogger.logger.warn(e,t)))}error(e,t,r){if(this.shouldLog("error")){let o=t?{error:t.message||t,stack:t.stack}:{};console.error(this.formatMessage("error",e,{...r,...o})),this.productionLogger&&(this.productionLogger.captureException?this.productionLogger.captureException(t||Error(e),{contexts:{context:r}}):this.productionLogger.logger&&this.productionLogger.logger.error(e,{...r,...o}))}}}let s=o.getInstance()},43294:(e,t,r)=>{"use strict";r.d(t,{getEnvVar:()=>n});var o=r(62426);async function s(){try{return(await (0,o.DM)()).env}catch(e){return process.env}}async function n(e){return(await s())[e]}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57852:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>g,serverHooks:()=>h,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{POST:()=>l});var s=r(96559),n=r(48088),i=r(37719),a=r(36463),c=r(32190),u=r(96706);async function l(e){try{let{priceId:t,userId:r}=await e.json();if(!t||!Object.values(u.mV).includes(t))return c.NextResponse.json({error:"Invalid price ID"},{status:400});if(!r)return c.NextResponse.json({error:"User ID required"},{status:400});let o=await u._4.checkout.sessions.create({payment_method_types:["card"],line_items:[{price:t,quantity:1}],mode:"subscription",success_url:`${e.headers.get("origin")}/dashboard?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`${e.headers.get("origin")}/pricing`,metadata:{userId:r},customer_email:void 0});return c.NextResponse.json({sessionId:o.id,url:o.url})}catch(e){return a.v.error("Stripe checkout error:",e),c.NextResponse.json({error:"Internal server error"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/stripe/create-checkout-session/route",pathname:"/api/stripe/create-checkout-session",filename:"route",bundlePath:"app/api/stripe/create-checkout-session/route"},resolvedPagePath:"/home/new_username/Documents/projects/aiamrkerv2/worktrees/claude/src/app/api/stripe/create-checkout-session/route.ts",nextConfigOutput:"standalone",userland:o}),{workAsyncStorage:p,workUnitAsyncStorage:d,serverHooks:h}=g;function f(){return(0,i.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:d})}},62426:(e,t,r)=>{"use strict";r.d(t,{DM:()=>s});let o=Symbol.for("__cloudflare-context__");function s(e={async:!1}){return e.async?i():function(){let e=n();if(e)return e;if(function(){let e=globalThis;return e.__NEXT_DATA__?.nextExport===!0}())throw Error("\n\nERROR: `getCloudflareContext` has been called in sync mode in either a static route or at the top level of a non-static one, both cases are not allowed but can be solved by either:\n  - make sure that the call is not at the top level and that the route is not static\n  - call `getCloudflareContext({async: true})` to use the `async` mode\n  - avoid calling `getCloudflareContext` in the route\n");throw Error(c)}()}function n(){return globalThis[o]}async function i(){let e=n();if(e)return e;{let e=await a();return function(e){globalThis[o]=e}(e),e}}async function a(e){let{getPlatformProxy:t}=await import(`${"__wrangler".replaceAll("_","")}`),r=e?.environment??process.env.NEXT_DEV_WRANGLER_ENV,{env:o,cf:s,ctx:n}=await t({...e,environment:r});return{env:o,cf:s,ctx:n}}let c='\n\nERROR: `getCloudflareContext` has been called without having called `initOpenNextCloudflareForDev` from the Next.js config file.\nYou should update your Next.js config file as shown below:\n\n   ```\n   // next.config.mjs\n\n   import { initOpenNextCloudflareForDev } from "@opennextjs/cloudflare";\n\n   initOpenNextCloudflareForDev();\n\n   const nextConfig = { ... };\n   export default nextConfig;\n   ```\n\n'},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{},96706:(e,t,r)=>{"use strict";r.d(t,{NB:()=>i,_4:()=>s,mV:()=>n});var o=r(97877);r(43294);let s=new o.A(process.env.STRIPE_SECRET_KEY,{apiVersion:"2025-06-30.basil",typescript:!0}),n={PRO_MONTHLY:process.env.STRIPE_PRO_MONTHLY_PRICE_ID||"price_1RksqiDb7SYU5gvXjID3h3H4",PRO_YEARLY:process.env.STRIPE_PRO_YEARLY_PRICE_ID||"price_1RksqiDb7SYU5gvXjID3h3H4"},i={FREE:{name:"Free",price:0,interval:"forever",features:["20 AI marks per day","Basic feedback","Progress tracking","Gemini AI model","Community support"],limits:{dailyMarks:20,providers:["gemini"]}},PRO:{name:"Pro",price:2.99,interval:"month",features:["200 AI marks per day","Advanced feedback with AO breakdown","Progress analytics","All AI models (Gemini, Kimi, DeepSeek)","OCR handwriting recognition","Export to Google Classroom","Priority support"],limits:{dailyMarks:200,providers:["gemini","kimi","deepseek"]}}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[4243,580,7877],()=>r(57852));module.exports=o})();