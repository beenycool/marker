(()=>{var e={};e.id=3581,e.ids=[3581],e.modules={986:function(e,t,a){var r,n,i,s,o,c,d,l;r=a(87012),a(65404),a(27256),i=(n=r.lib).Base,s=n.WordArray,c=(o=r.algo).SHA256,d=o.HMAC,l=o.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,r=d.create(a.hasher,e),n=s.create(),i=s.create([1]),o=n.words,c=i.words,l=a.keySize,x=a.iterations;o.length<l;){var f=r.update(t).finalize(i);r.reset();for(var u=f.words,h=u.length,b=f,p=1;p<x;p++){b=r.finalize(b),r.reset();for(var m=b.words,g=0;g<h;g++)u[g]^=m[g]}n.concat(f),c[0]++}return n.sigBytes=4*l,n}}),r.PBKDF2=function(e,t,a){return l.create(a).compute(e,t)},e.exports=r.PBKDF2},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12201:function(e,t,a){var r;r=a(87012),a(73849),function(){var e=r.lib.Hasher,t=r.x64,a=t.Word,n=t.WordArray,i=r.algo;function s(){return a.create.apply(a,arguments)}for(var o=[s(0x428a2f98,0xd728ae22),s(0x71374491,0x23ef65cd),s(0xb5c0fbcf,0xec4d3b2f),s(0xe9b5dba5,0x8189dbbc),s(0x3956c25b,0xf348b538),s(0x59f111f1,0xb605d019),s(0x923f82a4,0xaf194f9b),s(0xab1c5ed5,0xda6d8118),s(0xd807aa98,0xa3030242),s(0x12835b01,0x45706fbe),s(0x243185be,0x4ee4b28c),s(0x550c7dc3,0xd5ffb4e2),s(0x72be5d74,0xf27b896f),s(0x80deb1fe,0x3b1696b1),s(0x9bdc06a7,0x25c71235),s(0xc19bf174,0xcf692694),s(0xe49b69c1,0x9ef14ad2),s(0xefbe4786,0x384f25e3),s(0xfc19dc6,0x8b8cd5b5),s(0x240ca1cc,0x77ac9c65),s(0x2de92c6f,0x592b0275),s(0x4a7484aa,0x6ea6e483),s(0x5cb0a9dc,0xbd41fbd4),s(0x76f988da,0x831153b5),s(0x983e5152,0xee66dfab),s(0xa831c66d,0x2db43210),s(0xb00327c8,0x98fb213f),s(0xbf597fc7,0xbeef0ee4),s(0xc6e00bf3,0x3da88fc2),s(0xd5a79147,0x930aa725),s(0x6ca6351,0xe003826f),s(0x14292967,0xa0e6e70),s(0x27b70a85,0x46d22ffc),s(0x2e1b2138,0x5c26c926),s(0x4d2c6dfc,0x5ac42aed),s(0x53380d13,0x9d95b3df),s(0x650a7354,0x8baf63de),s(0x766a0abb,0x3c77b2a8),s(0x81c2c92e,0x47edaee6),s(0x92722c85,0x1482353b),s(0xa2bfe8a1,0x4cf10364),s(0xa81a664b,0xbc423001),s(0xc24b8b70,0xd0f89791),s(0xc76c51a3,0x654be30),s(0xd192e819,0xd6ef5218),s(0xd6990624,0x5565a910),s(0xf40e3585,0x5771202a),s(0x106aa070,0x32bbd1b8),s(0x19a4c116,0xb8d2d0c8),s(0x1e376c08,0x5141ab53),s(0x2748774c,0xdf8eeb99),s(0x34b0bcb5,0xe19b48a8),s(0x391c0cb3,0xc5c95a63),s(0x4ed8aa4a,0xe3418acb),s(0x5b9cca4f,0x7763e373),s(0x682e6ff3,0xd6b2b8a3),s(0x748f82ee,0x5defb2fc),s(0x78a5636f,0x43172f60),s(0x84c87814,0xa1f0ab72),s(0x8cc70208,0x1a6439ec),s(0x90befffa,0x23631e28),s(0xa4506ceb,0xde82bde9),s(0xbef9a3f7,0xb2c67915),s(0xc67178f2,0xe372532b),s(0xca273ece,0xea26619c),s(0xd186b8c7,0x21c0c207),s(0xeada7dd6,0xcde0eb1e),s(0xf57d4f7f,0xee6ed178),s(0x6f067aa,0x72176fba),s(0xa637dc5,0xa2c898a6),s(0x113f9804,0xbef90dae),s(0x1b710b35,0x131c471b),s(0x28db77f5,0x23047d84),s(0x32caab7b,0x40c72493),s(0x3c9ebe0a,0x15c9bebc),s(0x431d67c4,0x9c100d4c),s(0x4cc5d4be,0xcb3e42b6),s(0x597f299c,0xfc657e2a),s(0x5fcb6fab,0x3ad6faec),s(0x6c44198c,0x4a475817)],c=[],d=0;d<80;d++)c[d]=s();var l=i.SHA512=e.extend({_doReset:function(){this._hash=new n.init([new a.init(0x6a09e667,0xf3bcc908),new a.init(0xbb67ae85,0x84caa73b),new a.init(0x3c6ef372,0xfe94f82b),new a.init(0xa54ff53a,0x5f1d36f1),new a.init(0x510e527f,0xade682d1),new a.init(0x9b05688c,0x2b3e6c1f),new a.init(0x1f83d9ab,0xfb41bd6b),new a.init(0x5be0cd19,0x137e2179)])},_doProcessBlock:function(e,t){for(var a=this._hash.words,r=a[0],n=a[1],i=a[2],s=a[3],d=a[4],l=a[5],x=a[6],f=a[7],u=r.high,h=r.low,b=n.high,p=n.low,m=i.high,g=i.low,v=s.high,y=s.low,_=d.high,w=d.low,k=l.high,C=l.low,E=x.high,S=x.low,A=f.high,T=f.low,O=u,R=h,I=b,B=p,M=m,j=g,N=v,H=y,P=_,D=w,G=k,U=C,F=E,L=S,J=A,$=T,z=0;z<80;z++){var q,K,Y=c[z];if(z<16)K=Y.high=0|e[t+2*z],q=Y.low=0|e[t+2*z+1];else{var W=c[z-15],V=W.high,X=W.low,Q=(V>>>1|X<<31)^(V>>>8|X<<24)^V>>>7,Z=(X>>>1|V<<31)^(X>>>8|V<<24)^(X>>>7|V<<25),ee=c[z-2],et=ee.high,ea=ee.low,er=(et>>>19|ea<<13)^(et<<3|ea>>>29)^et>>>6,en=(ea>>>19|et<<13)^(ea<<3|et>>>29)^(ea>>>6|et<<26),ei=c[z-7],es=ei.high,eo=ei.low,ec=c[z-16],ed=ec.high,el=ec.low;K=Q+es+ +((q=Z+eo)>>>0<Z>>>0),q+=en,K=K+er+ +(q>>>0<en>>>0),q+=el,Y.high=K=K+ed+ +(q>>>0<el>>>0),Y.low=q}var ex=P&G^~P&F,ef=D&U^~D&L,eu=O&I^O&M^I&M,eh=R&B^R&j^B&j,eb=(O>>>28|R<<4)^(O<<30|R>>>2)^(O<<25|R>>>7),ep=(R>>>28|O<<4)^(R<<30|O>>>2)^(R<<25|O>>>7),em=(P>>>14|D<<18)^(P>>>18|D<<14)^(P<<23|D>>>9),eg=(D>>>14|P<<18)^(D>>>18|P<<14)^(D<<23|P>>>9),ev=o[z],ey=ev.high,e_=ev.low,ew=$+eg,ek=J+em+ +(ew>>>0<$>>>0),ew=ew+ef,ek=ek+ex+ +(ew>>>0<ef>>>0),ew=ew+e_,ek=ek+ey+ +(ew>>>0<e_>>>0),ew=ew+q,ek=ek+K+ +(ew>>>0<q>>>0),eC=ep+eh,eE=eb+eu+ +(eC>>>0<ep>>>0);J=F,$=L,F=G,L=U,G=P,U=D,P=N+ek+ +((D=H+ew|0)>>>0<H>>>0)|0,N=M,H=j,M=I,j=B,I=O,B=R,O=ek+eE+ +((R=ew+eC|0)>>>0<ew>>>0)|0}h=r.low=h+R,r.high=u+O+ +(h>>>0<R>>>0),p=n.low=p+B,n.high=b+I+ +(p>>>0<B>>>0),g=i.low=g+j,i.high=m+M+ +(g>>>0<j>>>0),y=s.low=y+H,s.high=v+N+ +(y>>>0<H>>>0),w=d.low=w+D,d.high=_+P+ +(w>>>0<D>>>0),C=l.low=C+U,l.high=k+G+ +(C>>>0<U>>>0),S=x.low=S+L,x.high=E+F+ +(S>>>0<L>>>0),T=f.low=T+$,f.high=A+J+ +(T>>>0<$>>>0)},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+128>>>10<<5)+30]=Math.floor(a/0x100000000),t[(r+128>>>10<<5)+31]=a,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});r.SHA512=e._createHelper(l),r.HmacSHA512=e._createHmacHelper(l)}(),e.exports=r.SHA512},13440:function(e,t,a){var r;r=a(87012),a(66238),r.pad.Iso10126={pad:function(e,t){var a=4*t,n=a-e.sigBytes%a;e.concat(r.lib.WordArray.random(n-1)).concat(r.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.exports=r.pad.Iso10126},20547:function(e,t,a){var r;r=a(87012),a(69251),a(95911),a(50459),a(66238),function(){var e=r.lib.StreamCipher,t=r.algo,a=[],n=[],i=[],s=t.RabbitLegacy=e.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,a=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,0xffff0000&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,0xffff0000&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,0xffff0000&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,0xffff0000&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)o.call(this);for(var n=0;n<8;n++)r[n]^=a[n+4&7];if(t){var i=t.words,s=i[0],c=i[1],d=(s<<8|s>>>24)&0xff00ff|(s<<24|s>>>8)&0xff00ff00,l=(c<<8|c>>>24)&0xff00ff|(c<<24|c>>>8)&0xff00ff00,x=d>>>16|0xffff0000&l,f=l<<16|65535&d;r[0]^=d,r[1]^=x,r[2]^=l,r[3]^=f,r[4]^=d,r[5]^=x,r[6]^=l,r[7]^=f;for(var n=0;n<4;n++)o.call(this)}},_doProcessBlock:function(e,t){var r=this._X;o.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)a[n]=(a[n]<<8|a[n]>>>24)&0xff00ff|(a[n]<<24|a[n]>>>8)&0xff00ff00,e[t+n]^=a[n]},blockSize:4,ivSize:2});function o(){for(var e=this._X,t=this._C,a=0;a<8;a++)n[a]=t[a];t[0]=t[0]+0x4d34d34d+this._b|0,t[1]=t[1]+0xd34d34d3+ +(t[0]>>>0<n[0]>>>0)|0,t[2]=t[2]+0x34d34d34+ +(t[1]>>>0<n[1]>>>0)|0,t[3]=t[3]+0x4d34d34d+ +(t[2]>>>0<n[2]>>>0)|0,t[4]=t[4]+0xd34d34d3+ +(t[3]>>>0<n[3]>>>0)|0,t[5]=t[5]+0x34d34d34+ +(t[4]>>>0<n[4]>>>0)|0,t[6]=t[6]+0x4d34d34d+ +(t[5]>>>0<n[5]>>>0)|0,t[7]=t[7]+0xd34d34d3+ +(t[6]>>>0<n[6]>>>0)|0,this._b=+(t[7]>>>0<n[7]>>>0);for(var a=0;a<8;a++){var r=e[a]+t[a],s=65535&r,o=r>>>16,c=((s*s>>>17)+s*o>>>15)+o*o,d=((0xffff0000&r)*r|0)+((65535&r)*r|0);i[a]=c^d}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}r.RabbitLegacy=e._createHelper(s)}(),e.exports=r.RabbitLegacy},22091:function(e,t,a){var r,n;r=a(87012),a(66238),r.mode.ECB=((n=r.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),n.Decryptor=n.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),n),e.exports=r.mode.ECB},24170:function(e,t,a){var r,n,i;r=a(87012),a(66238),r.mode.CTR=(i=(n=r.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,n=this._iv,i=this._counter;n&&(i=this._counter=n.slice(0),this._iv=void 0);var s=i.slice(0);a.encryptBlock(s,0),i[r-1]=i[r-1]+1|0;for(var o=0;o<r;o++)e[t+o]^=s[o]}}),n.Decryptor=i,n),e.exports=r.mode.CTR},24832:function(e,t,a){var r,n,i,s,o,c,d;r=a(87012),a(73849),a(12201),i=(n=r.x64).Word,s=n.WordArray,c=(o=r.algo).SHA512,d=o.SHA384=c.extend({_doReset:function(){this._hash=new s.init([new i.init(0xcbbb9d5d,0xc1059ed8),new i.init(0x629a292a,0x367cd507),new i.init(0x9159015a,0x3070dd17),new i.init(0x152fecd8,0xf70e5939),new i.init(0x67332667,0xffc00b31),new i.init(0x8eb44a87,0x68581511),new i.init(0xdb0c2e0d,0x64f98fa7),new i.init(0x47b5481d,0xbefa4fa4)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(d),r.HmacSHA384=c._createHmacHelper(d),e.exports=r.SHA384},27256:function(e,t,a){var r,n,i;e.exports=void(n=(r=a(87012)).lib.Base,i=r.enc.Utf8,r.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var a=e.blockSize,r=4*a;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),s=this._iKey=t.clone(),o=n.words,c=s.words,d=0;d<a;d++)o[d]^=0x5c5c5c5c,c[d]^=0x36363636;n.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,a=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(a))}}))},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},38168:function(e,t,a){var r,n,i;r=a(87012),a(66238),r.mode.OFB=(i=(n=r.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,n=this._iv,i=this._keystream;n&&(i=this._keystream=n.slice(0),this._iv=void 0),a.encryptBlock(i,0);for(var s=0;s<r;s++)e[t+s]^=i[s]}}),n.Decryptor=i,n),e.exports=r.mode.OFB},40383:function(e,t,a){var r;r=a(87012),a(73849),a(69959),a(56292),a(69251),a(96182),a(95911),a(61234),a(65404),a(71973),a(12201),a(24832),a(49700),a(90103),a(27256),a(986),a(50459),a(66238),a(53364),a(24170),a(70661),a(38168),a(22091),a(54040),a(13440),a(77519),a(78544),a(79999),a(90776),a(66472),a(51867),a(58782),a(51371),a(20547),a(80961),e.exports=r},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49700:function(e,t,a){var r;r=a(87012),a(73849),function(e){var t=r.lib,a=t.WordArray,n=t.Hasher,i=r.x64.Word,s=r.algo,o=[],c=[],d=[];!function(){for(var e=1,t=0,a=0;a<24;a++){o[e+5*t]=(a+1)*(a+2)/2%64;var r=t%5,n=(2*e+3*t)%5;e=r,t=n}for(var e=0;e<5;e++)for(var t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var s=1,l=0;l<24;l++){for(var x=0,f=0,u=0;u<7;u++){if(1&s){var h=(1<<u)-1;h<32?f^=1<<h:x^=1<<h-32}128&s?s=s<<1^113:s<<=1}d[l]=i.create(x,f)}}();for(var l=[],x=0;x<25;x++)l[x]=i.create();var f=s.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var a=this._state,r=this.blockSize/2,n=0;n<r;n++){var i=e[t+2*n],s=e[t+2*n+1];i=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00,s=(s<<8|s>>>24)&0xff00ff|(s<<24|s>>>8)&0xff00ff00;var x=a[n];x.high^=s,x.low^=i}for(var f=0;f<24;f++){for(var u=0;u<5;u++){for(var h=0,b=0,p=0;p<5;p++){var x=a[u+5*p];h^=x.high,b^=x.low}var m=l[u];m.high=h,m.low=b}for(var u=0;u<5;u++)for(var g=l[(u+4)%5],v=l[(u+1)%5],y=v.high,_=v.low,h=g.high^(y<<1|_>>>31),b=g.low^(_<<1|y>>>31),p=0;p<5;p++){var x=a[u+5*p];x.high^=h,x.low^=b}for(var w=1;w<25;w++){var h,b,x=a[w],k=x.high,C=x.low,E=o[w];E<32?(h=k<<E|C>>>32-E,b=C<<E|k>>>32-E):(h=C<<E-32|k>>>64-E,b=k<<E-32|C>>>64-E);var S=l[c[w]];S.high=h,S.low=b}var A=l[0],T=a[0];A.high=T.high,A.low=T.low;for(var u=0;u<5;u++)for(var p=0;p<5;p++){var w=u+5*p,x=a[w],O=l[w],R=l[(u+1)%5+5*p],I=l[(u+2)%5+5*p];x.high=O.high^~R.high&I.high,x.low=O.low^~R.low&I.low}var x=a[0],B=d[f];x.high^=B.high,x.low^=B.low}},_doFinalize:function(){var t=this._data,r=t.words;this._nDataBytes;var n=8*t.sigBytes,i=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var s=this._state,o=this.cfg.outputLength/8,c=o/8,d=[],l=0;l<c;l++){var x=s[l],f=x.high,u=x.low;f=(f<<8|f>>>24)&0xff00ff|(f<<24|f>>>8)&0xff00ff00,u=(u<<8|u>>>24)&0xff00ff|(u<<24|u>>>8)&0xff00ff00,d.push(u),d.push(f)}return new a.init(d,o)},clone:function(){for(var e=n.clone.call(this),t=e._state=this._state.slice(0),a=0;a<25;a++)t[a]=t[a].clone();return e}});r.SHA3=n._createHelper(f),r.HmacSHA3=n._createHmacHelper(f)}(Math),e.exports=r.SHA3},50459:function(e,t,a){var r,n,i,s,o,c,d;r=a(87012),a(61234),a(27256),i=(n=r.lib).Base,s=n.WordArray,c=(o=r.algo).MD5,d=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a,r=this.cfg,n=r.hasher.create(),i=s.create(),o=i.words,c=r.keySize,d=r.iterations;o.length<c;){a&&n.update(a),a=n.update(e).finalize(t),n.reset();for(var l=1;l<d;l++)a=n.finalize(a),n.reset();i.concat(a)}return i.sigBytes=4*c,i}}),r.EvpKDF=function(e,t,a){return d.create(a).compute(e,t)},e.exports=r.EvpKDF},51371:function(e,t,a){var r;r=a(87012),a(69251),a(95911),a(50459),a(66238),function(){var e=r.lib.StreamCipher,t=r.algo,a=[],n=[],i=[],s=t.Rabbit=e.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,a=0;a<4;a++)e[a]=(e[a]<<8|e[a]>>>24)&0xff00ff|(e[a]<<24|e[a]>>>8)&0xff00ff00;var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,0xffff0000&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,0xffff0000&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,0xffff0000&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,0xffff0000&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)o.call(this);for(var a=0;a<8;a++)n[a]^=r[a+4&7];if(t){var i=t.words,s=i[0],c=i[1],d=(s<<8|s>>>24)&0xff00ff|(s<<24|s>>>8)&0xff00ff00,l=(c<<8|c>>>24)&0xff00ff|(c<<24|c>>>8)&0xff00ff00,x=d>>>16|0xffff0000&l,f=l<<16|65535&d;n[0]^=d,n[1]^=x,n[2]^=l,n[3]^=f,n[4]^=d,n[5]^=x,n[6]^=l,n[7]^=f;for(var a=0;a<4;a++)o.call(this)}},_doProcessBlock:function(e,t){var r=this._X;o.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)a[n]=(a[n]<<8|a[n]>>>24)&0xff00ff|(a[n]<<24|a[n]>>>8)&0xff00ff00,e[t+n]^=a[n]},blockSize:4,ivSize:2});function o(){for(var e=this._X,t=this._C,a=0;a<8;a++)n[a]=t[a];t[0]=t[0]+0x4d34d34d+this._b|0,t[1]=t[1]+0xd34d34d3+ +(t[0]>>>0<n[0]>>>0)|0,t[2]=t[2]+0x34d34d34+ +(t[1]>>>0<n[1]>>>0)|0,t[3]=t[3]+0x4d34d34d+ +(t[2]>>>0<n[2]>>>0)|0,t[4]=t[4]+0xd34d34d3+ +(t[3]>>>0<n[3]>>>0)|0,t[5]=t[5]+0x34d34d34+ +(t[4]>>>0<n[4]>>>0)|0,t[6]=t[6]+0x4d34d34d+ +(t[5]>>>0<n[5]>>>0)|0,t[7]=t[7]+0xd34d34d3+ +(t[6]>>>0<n[6]>>>0)|0,this._b=+(t[7]>>>0<n[7]>>>0);for(var a=0;a<8;a++){var r=e[a]+t[a],s=65535&r,o=r>>>16,c=((s*s>>>17)+s*o>>>15)+o*o,d=((0xffff0000&r)*r|0)+((65535&r)*r|0);i[a]=c^d}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}r.Rabbit=e._createHelper(s)}(),e.exports=r.Rabbit},51867:function(e,t,a){var r;r=a(87012),a(69251),a(95911),a(50459),a(66238),function(){var e=r.lib,t=e.WordArray,a=e.BlockCipher,n=r.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],o=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,0x10000000:32768,0x20000000:8421378,0x30000000:2,0x40000000:512,0x50000000:8421890,0x60000000:8389122,0x70000000:8388608,0x80000000:514,0x90000000:8389120,0xa0000000:33280,0xb0000000:8421376,0xc0000000:32770,0xd0000000:8388610,0xe0000000:0,0xf0000000:33282,0x8000000:0,0x18000000:8421890,0x28000000:33282,0x38000000:32768,0x48000000:8421888,0x58000000:512,0x68000000:8421378,0x78000000:2,0x88000000:8389120,0x98000000:33280,0xa8000000:8421376,0xb8000000:8389122,0xc8000000:8388610,0xd8000000:32770,0xe8000000:514,0xf8000000:8388608,1:32768,0x10000001:2,0x20000001:8421888,0x30000001:8388608,0x40000001:8421378,0x50000001:33280,0x60000001:512,0x70000001:8389122,0x80000001:8421890,0x90000001:8421376,0xa0000001:8388610,0xb0000001:33282,0xc0000001:514,0xd0000001:8389120,0xe0000001:32770,0xf0000001:0,0x8000001:8421890,0x18000001:8421376,0x28000001:8388608,0x38000001:512,0x48000001:32768,0x58000001:8388610,0x68000001:2,0x78000001:33282,0x88000001:32770,0x98000001:8389122,0xa8000001:514,0xb8000001:8421888,0xc8000001:8389120,0xd8000001:0,0xe8000001:33280,0xf8000001:8421378},{0:0x40084010,0x1000000:16384,0x2000000:524288,0x3000000:0x40080010,0x4000000:0x40000010,0x5000000:0x40084000,0x6000000:0x40004000,0x7000000:16,0x8000000:540672,0x9000000:0x40004010,0xa000000:0x40000000,0xb000000:540688,0xc000000:524304,0xd000000:0,0xe000000:16400,0xf000000:0x40080000,8388608:0x40004000,0x1800000:540688,0x2800000:16,0x3800000:0x40004010,0x4800000:0x40084010,0x5800000:0x40000000,0x6800000:524288,0x7800000:0x40080010,0x8800000:524304,0x9800000:0,0xa800000:16384,0xb800000:0x40080000,0xc800000:0x40000010,0xd800000:540672,0xe800000:0x40084000,0xf800000:16400,0x10000000:0,0x11000000:0x40080010,0x12000000:0x40004010,0x13000000:0x40084000,0x14000000:0x40080000,0x15000000:16,0x16000000:540688,0x17000000:16384,0x18000000:16400,0x19000000:524288,0x1a000000:524304,0x1b000000:0x40000010,0x1c000000:540672,0x1d000000:0x40004000,0x1e000000:0x40000000,0x1f000000:0x40084010,0x10800000:540688,0x11800000:524288,0x12800000:0x40080000,0x13800000:16384,0x14800000:0x40004000,0x15800000:0x40084010,0x16800000:16,0x17800000:0x40000000,0x18800000:0x40084000,0x19800000:0x40000010,0x1a800000:0x40004010,0x1b800000:524304,0x1c800000:0,0x1d800000:16400,0x1e800000:0x40080010,0x1f800000:540672},{0:260,1048576:0,2097152:0x4000100,3145728:65796,4194304:65540,5242880:0x4000004,6291456:0x4010104,7340032:0x4010000,8388608:0x4000000,9437184:0x4010100,0xa00000:65792,0xb00000:0x4010004,0xc00000:0x4000104,0xd00000:65536,0xe00000:4,0xf00000:256,524288:0x4010100,1572864:0x4010004,2621440:0,3670016:0x4000100,4718592:0x4000004,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,0xa80000:0x4010000,0xb80000:65796,0xc80000:65792,0xd80000:0x4000104,0xe80000:0x4010104,0xf80000:0x4000000,0x1000000:0x4010100,0x1100000:65540,0x1200000:65536,0x1300000:0x4000100,0x1400000:256,0x1500000:0x4010104,0x1600000:0x4000004,0x1700000:0,0x1800000:0x4000104,0x1900000:0x4000000,0x1a00000:4,0x1b00000:65792,0x1c00000:0x4010000,0x1d00000:260,0x1e00000:65796,0x1f00000:0x4010004,0x1080000:0x4000000,0x1180000:260,0x1280000:0x4010100,0x1380000:0,0x1480000:65540,0x1580000:0x4000100,0x1680000:256,0x1780000:0x4010004,0x1880000:65536,0x1980000:0x4010104,0x1a80000:65796,0x1b80000:0x4000004,0x1c80000:0x4000104,0x1d80000:0x4010000,0x1e80000:4,0x1f80000:65792},{0:0x80401000,65536:0x80001040,131072:4198464,196608:0x80400000,262144:0,327680:4198400,393216:0x80000040,458752:4194368,524288:0x80000000,589824:4194304,655360:64,720896:0x80001000,786432:0x80400040,851968:4160,917504:4096,983040:0x80401040,32768:0x80001040,98304:64,163840:0x80400040,229376:0x80001000,294912:4198400,360448:0x80401040,425984:0,491520:0x80400000,557056:4096,622592:0x80401000,688128:4194304,753664:4160,819200:0x80000000,884736:4194368,950272:4198464,1015808:0x80000040,1048576:4194368,1114112:4198400,1179648:0x80000040,1245184:0,1310720:4160,1376256:0x80400040,1441792:0x80401000,1507328:0x80001040,1572864:0x80401040,1638400:0x80000000,1703936:0x80400000,1769472:4198464,1835008:0x80001000,1900544:4194304,1966080:64,2031616:4096,1081344:0x80400000,1146880:0x80401040,1212416:0,1277952:4198400,1343488:4194368,1409024:0x80000000,1474560:0x80001040,1540096:64,1605632:0x80000040,1671168:4096,1736704:0x80001000,1802240:0x80400040,1867776:4160,1933312:0x80401000,1998848:4194304,2064384:4198464},{0:128,4096:0x1040000,8192:262144,12288:0x20000000,16384:0x20040080,20480:0x1000080,24576:0x21000080,28672:262272,32768:0x1000000,36864:0x20040000,40960:0x20000080,45056:0x21040080,49152:0x21040000,53248:0,57344:0x1040080,61440:0x21000000,2048:0x1040080,6144:0x21000080,10240:128,14336:0x1040000,18432:262144,22528:0x20040080,26624:0x21040000,30720:0x20000000,34816:0x20040000,38912:0,43008:0x21040080,47104:0x1000080,51200:0x20000080,55296:0x21000000,59392:0x1000000,63488:262272,65536:262144,69632:128,73728:0x20000000,77824:0x21000080,81920:0x1000080,86016:0x21040000,90112:0x20040080,94208:0x1000000,98304:0x21040080,102400:0x21000000,106496:0x1040000,110592:0x20040000,114688:262272,118784:0x20000080,122880:0,126976:0x1040080,67584:0x21000080,71680:0x1000000,75776:0x1040000,79872:0x20040080,83968:0x20000000,88064:0x1040080,92160:128,96256:0x21040000,100352:262272,104448:0x21040080,108544:0,112640:0x21000000,116736:0x1000080,120832:262144,124928:0x20040000,129024:0x20000080},{0:0x10000008,256:8192,512:0x10200000,768:0x10202008,1024:0x10002000,1280:2097152,1536:2097160,1792:0x10000000,2048:0,2304:0x10002008,2560:2105344,2816:8,3072:0x10200008,3328:2105352,3584:8200,3840:0x10202000,128:0x10200000,384:0x10202008,640:8,896:2097152,1152:2105352,1408:0x10000008,1664:0x10002000,1920:8200,2176:2097160,2432:8192,2688:0x10002008,2944:0x10200008,3200:0,3456:0x10202000,3712:2105344,3968:0x10000000,4096:0x10002000,4352:0x10200008,4608:0x10202008,4864:8200,5120:2097152,5376:0x10000000,5632:0x10000008,5888:2105344,6144:2105352,6400:0,6656:8,6912:0x10200000,7168:8192,7424:0x10002008,7680:0x10202000,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:0x10000008,5248:0x10002000,5504:8200,5760:0x10202008,6016:0x10200000,6272:0x10202000,6528:0x10200008,6784:8192,7040:2105352,7296:2097160,7552:0,7808:0x10000000,8064:0x10002008},{0:1048576,16:0x2000401,32:1024,48:1049601,64:0x2100401,80:0,96:1,112:0x2100001,128:0x2000400,144:1048577,160:0x2000001,176:0x2100400,192:0x2100000,208:1025,224:1049600,240:0x2000000,8:0x2100001,24:0,40:0x2000401,56:0x2100400,72:1048576,88:0x2000001,104:0x2000000,120:1025,136:1049601,152:0x2000400,168:0x2100000,184:1048577,200:1024,216:0x2100401,232:1,248:1049600,256:0x2000000,272:1048576,288:0x2000401,304:0x2100001,320:1048577,336:0x2000400,352:0x2100400,368:1049601,384:1025,400:0x2100401,416:1049600,432:1,448:0,464:0x2100000,480:0x2000001,496:1024,264:1049600,280:0x2000401,296:0x2100001,312:1,328:0x2000000,344:1048576,360:1025,376:0x2100400,392:0x2000001,408:0x2100000,424:0,440:0x2100401,456:1049601,472:1024,488:0x2000400,504:1048577},{0:0x8000820,1:131072,2:0x8000000,3:32,4:131104,5:0x8020820,6:0x8020800,7:2048,8:0x8020000,9:0x8000800,10:133120,11:0x8020020,12:2080,13:0,14:0x8000020,15:133152,0x80000000:2048,0x80000001:0x8020820,0x80000002:0x8000820,0x80000003:0x8000000,0x80000004:0x8020000,0x80000005:133120,0x80000006:133152,0x80000007:32,0x80000008:0x8000020,0x80000009:2080,0x8000000a:131104,0x8000000b:0x8020800,0x8000000c:0,0x8000000d:0x8020020,0x8000000e:0x8000800,0x8000000f:131072,16:133152,17:0x8020800,18:32,19:2048,20:0x8000800,21:0x8000020,22:0x8020020,23:131072,24:0,25:131104,26:0x8020000,27:0x8000820,28:0x8020820,29:133120,30:2080,31:0x8000000,0x80000010:131072,0x80000011:2048,0x80000012:0x8020020,0x80000013:133152,0x80000014:32,0x80000015:0x8020000,0x80000016:0x8000000,0x80000017:0x8000820,0x80000018:0x8020820,0x80000019:0x8000020,0x8000001a:0x8000800,0x8000001b:0,0x8000001c:133120,0x8000001d:2080,0x8000001e:131104,0x8000001f:0x8020800}],d=[0xf8000001,0x1f800000,0x1f80000,2064384,129024,8064,504,0x8000001f],l=n.DES=a.extend({_doReset:function(){for(var e=this._key.words,t=[],a=0;a<56;a++){var r=i[a]-1;t[a]=e[r>>>5]>>>31-r%32&1}for(var n=this._subKeys=[],c=0;c<16;c++){for(var d=n[c]=[],l=o[c],a=0;a<24;a++)d[a/6|0]|=t[(s[a]-1+l)%28]<<31-a%6,d[4+(a/6|0)]|=t[28+(s[a+24]-1+l)%28]<<31-a%6;d[0]=d[0]<<1|d[0]>>>31;for(var a=1;a<7;a++)d[a]=d[a]>>>(a-1)*4+3;d[7]=d[7]<<5|d[7]>>>27}for(var x=this._invSubKeys=[],a=0;a<16;a++)x[a]=n[15-a]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,a){this._lBlock=e[t],this._rBlock=e[t+1],x.call(this,4,0xf0f0f0f),x.call(this,16,65535),f.call(this,2,0x33333333),f.call(this,8,0xff00ff),x.call(this,1,0x55555555);for(var r=0;r<16;r++){for(var n=a[r],i=this._lBlock,s=this._rBlock,o=0,l=0;l<8;l++)o|=c[l][((s^n[l])&d[l])>>>0];this._lBlock=s,this._rBlock=i^o}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,x.call(this,1,0x55555555),f.call(this,8,0xff00ff),f.call(this,2,0x33333333),x.call(this,16,65535),x.call(this,4,0xf0f0f0f),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function x(e,t){var a=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=a,this._lBlock^=a<<e}function f(e,t){var a=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=a,this._rBlock^=a<<e}r.DES=a._createHelper(l);var u=n.TripleDES=a.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var a=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),n=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=l.createEncryptor(t.create(a)),this._des2=l.createEncryptor(t.create(r)),this._des3=l.createEncryptor(t.create(n))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});r.TripleDES=a._createHelper(u)}(),e.exports=r.TripleDES},53364:function(e,t,a){var r;r=a(87012),a(66238),r.mode.CFB=function(){var e=r.lib.BlockCipherMode.extend();function t(e,t,a,r){var n,i=this._iv;i?(n=i.slice(0),this._iv=void 0):n=this._prevBlock,r.encryptBlock(n,0);for(var s=0;s<a;s++)e[t+s]^=n[s]}return e.Encryptor=e.extend({processBlock:function(e,a){var r=this._cipher,n=r.blockSize;t.call(this,e,a,n,r),this._prevBlock=e.slice(a,a+n)}}),e.Decryptor=e.extend({processBlock:function(e,a){var r=this._cipher,n=r.blockSize,i=e.slice(a,a+n);t.call(this,e,a,n,r),this._prevBlock=i}}),e}(),e.exports=r.mode.CFB},54040:function(e,t,a){var r;r=a(87012),a(66238),r.pad.AnsiX923={pad:function(e,t){var a=e.sigBytes,r=4*t,n=r-a%r,i=a+n-1;e.clamp(),e.words[i>>>2]|=n<<24-i%4*8,e.sigBytes+=n},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.exports=r.pad.Ansix923},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56292:function(e,t,a){e.exports=function(e){var t=e.lib.WordArray,a=e.enc;function r(e){return e<<8&0xff00ff00|e>>>8&0xff00ff}return a.Utf16=a.Utf16BE={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n+=2){var i=t[n>>>2]>>>16-n%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var a=e.length,r=[],n=0;n<a;n++)r[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return t.create(r,2*a)}},a.Utf16LE={stringify:function(e){for(var t=e.words,a=e.sigBytes,n=[],i=0;i<a;i+=2){var s=r(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var a=e.length,n=[],i=0;i<a;i++)n[i>>>1]|=r(e.charCodeAt(i)<<16-i%2*16);return t.create(n,2*a)}},e.enc.Utf16}(a(87012))},58782:function(e,t,a){var r;r=a(87012),a(69251),a(95911),a(50459),a(66238),function(){var e=r.lib.StreamCipher,t=r.algo,a=t.RC4=e.extend({_doReset:function(){for(var e=this._key,t=e.words,a=e.sigBytes,r=this._S=[],n=0;n<256;n++)r[n]=n;for(var n=0,i=0;n<256;n++){var s=n%a,o=t[s>>>2]>>>24-s%4*8&255;i=(i+r[n]+o)%256;var c=r[n];r[n]=r[i],r[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0});function n(){for(var e=this._S,t=this._i,a=this._j,r=0,n=0;n<4;n++){a=(a+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[a],e[a]=i,r|=e[(e[t]+e[a])%256]<<24-8*n}return this._i=t,this._j=a,r}r.RC4=e._createHelper(a);var i=t.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)n.call(this)}});r.RC4Drop=e._createHelper(i)}(),e.exports=r.RC4},60547:(e,t,a)=>{"use strict";a.d(t,{ON:()=>n,v7:()=>r});class r{constructor(e,t=100){this.kv=e,this.defaultLimit=t}async checkLimit(e,t=864e5,a=this.defaultLimit){let r=Date.now(),n=await this.kv.get(`rate_limit:${e}`,"json");if(!n||n.resetTime<r-t){let n=r+t;return await this.kv.put(`rate_limit:${e}`,JSON.stringify({count:1,resetTime:n}),{expirationTtl:Math.ceil(t/1e3)}),{allowed:!0,remaining:a-1,resetTime:n}}if(n.count>=a)return{allowed:!1,remaining:0,resetTime:n.resetTime};let i=n.count+1;return await this.kv.put(`rate_limit:${e}`,JSON.stringify({count:i,resetTime:n.resetTime}),{expirationTtl:Math.ceil((n.resetTime-r)/1e3)}),{allowed:!0,remaining:a-i,resetTime:n.resetTime}}}class n{constructor(e){this.kv=e}async get(e){return await this.kv.get(e,"json")}async set(e,t,a){await this.kv.put(e,JSON.stringify(t),a?{expirationTtl:a}:void 0)}async delete(e){await this.kv.delete(e)}}},61234:function(e,t,a){var r,n,i,s,o,c,d;i=(n=(r=a(87012)).lib).WordArray,s=n.Hasher,o=r.algo,c=[],d=o.SHA1=s.extend({_doReset:function(){this._hash=new i.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0])},_doProcessBlock:function(e,t){for(var a=this._hash.words,r=a[0],n=a[1],i=a[2],s=a[3],o=a[4],d=0;d<80;d++){if(d<16)c[d]=0|e[t+d];else{var l=c[d-3]^c[d-8]^c[d-14]^c[d-16];c[d]=l<<1|l>>>31}var x=(r<<5|r>>>27)+o+c[d];d<20?x+=(n&i|~n&s)+0x5a827999:d<40?x+=(n^i^s)+0x6ed9eba1:d<60?x+=(n&i|n&s|i&s)-0x70e44324:x+=(n^i^s)-0x359d3e2a,o=s,s=i,i=n<<30|n>>>2,n=r,r=x}a[0]=a[0]+r|0,a[1]=a[1]+n|0,a[2]=a[2]+i|0,a[3]=a[3]+s|0,a[4]=a[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(a/0x100000000),t[(r+64>>>9<<4)+15]=a,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=s._createHelper(d),r.HmacSHA1=s._createHmacHelper(d),e.exports=r.SHA1},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65404:function(e,t,a){var r;r=a(87012),function(e){var t=r.lib,a=t.WordArray,n=t.Hasher,i=r.algo,s=[],o=[];function c(e){return(e-(0|e))*0x100000000|0}for(var d=2,l=0;l<64;)(function(t){for(var a=e.sqrt(t),r=2;r<=a;r++)if(!(t%r))return!1;return!0})(d)&&(l<8&&(s[l]=c(e.pow(d,.5))),o[l]=c(e.pow(d,1/3)),l++),d++;var x=[],f=i.SHA256=n.extend({_doReset:function(){this._hash=new a.init(s.slice(0))},_doProcessBlock:function(e,t){for(var a=this._hash.words,r=a[0],n=a[1],i=a[2],s=a[3],c=a[4],d=a[5],l=a[6],f=a[7],u=0;u<64;u++){if(u<16)x[u]=0|e[t+u];else{var h=x[u-15],b=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,p=x[u-2],m=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;x[u]=b+x[u-7]+m+x[u-16]}var g=c&d^~c&l,v=r&n^r&i^n&i,y=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+g+o[u]+x[u],w=y+v;f=l,l=d,d=c,c=s+_|0,s=i,i=n,n=r,r=_+w|0}a[0]=a[0]+r|0,a[1]=a[1]+n|0,a[2]=a[2]+i|0,a[3]=a[3]+s|0,a[4]=a[4]+c|0,a[5]=a[5]+d|0,a[6]=a[6]+l|0,a[7]=a[7]+f|0},_doFinalize:function(){var t=this._data,a=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return a[n>>>5]|=128<<24-n%32,a[(n+64>>>9<<4)+14]=e.floor(r/0x100000000),a[(n+64>>>9<<4)+15]=r,t.sigBytes=4*a.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=n._createHelper(f),r.HmacSHA256=n._createHmacHelper(f)}(Math),e.exports=r.SHA256},66238:function(e,t,a){var r,n,i,s,o,c,d,l,x,f,u,h,b,p,m,g,v,y;r=a(87012),a(50459),e.exports=void(r.lib.Cipher||(i=(n=r.lib).Base,s=n.WordArray,o=n.BufferedBlockAlgorithm,(c=r.enc).Utf8,d=c.Base64,l=r.algo.EvpKDF,x=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?y:g}return function(t){return{encrypt:function(a,r,n){return e(r).encrypt(t,a,r,n)},decrypt:function(a,r,n){return e(r).decrypt(t,a,r,n)}}}}()}),n.StreamCipher=x.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=r.mode={},u=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=f.CBC=function(){var e=u.extend();function t(e,t,a){var r,n=this._iv;n?(r=n,this._iv=void 0):r=this._prevBlock;for(var i=0;i<a;i++)e[t+i]^=r[i]}return e.Encryptor=e.extend({processBlock:function(e,a){var r=this._cipher,n=r.blockSize;t.call(this,e,a,n),r.encryptBlock(e,a),this._prevBlock=e.slice(a,a+n)}}),e.Decryptor=e.extend({processBlock:function(e,a){var r=this._cipher,n=r.blockSize,i=e.slice(a,a+n);r.decryptBlock(e,a),t.call(this,e,a,n),this._prevBlock=i}}),e}(),b=(r.pad={}).Pkcs7={pad:function(e,t){for(var a=4*t,r=a-e.sigBytes%a,n=r<<24|r<<16|r<<8|r,i=[],o=0;o<r;o+=4)i.push(n);var c=s.create(i,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.BlockCipher=x.extend({cfg:x.cfg.extend({mode:h,padding:b}),reset:function(){x.reset.call(this);var e,t=this.cfg,a=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,a&&a.words):(this._mode=e.call(r,this,a&&a.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),p=n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(r.format={}).OpenSSL={stringify:function(e){var t,a=e.ciphertext,r=e.salt;return(r?s.create([0x53616c74,0x65645f5f]).concat(r).concat(a):a).toString(d)},parse:function(e){var t,a=d.parse(e),r=a.words;return 0x53616c74==r[0]&&0x65645f5f==r[1]&&(t=s.create(r.slice(2,4)),r.splice(0,4),a.sigBytes-=16),p.create({ciphertext:a,salt:t})}},g=n.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(e,t,a,r){r=this.cfg.extend(r);var n=e.createEncryptor(a,r),i=n.finalize(t),s=n.cfg;return p.create({ciphertext:i,key:a,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,a,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(a,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(r.kdf={}).OpenSSL={execute:function(e,t,a,r,n){if(r||(r=s.random(8)),n)var i=l.create({keySize:t+a,hasher:n}).compute(e,r);else var i=l.create({keySize:t+a}).compute(e,r);var o=s.create(i.words.slice(t),4*a);return i.sigBytes=4*t,p.create({key:i,iv:o,salt:r})}},y=n.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(e,t,a,r){var n=(r=this.cfg.extend(r)).kdf.execute(a,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=n.iv;var i=g.encrypt.call(this,e,t,n.key,r);return i.mixIn(n),i},decrypt:function(e,t,a,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var n=r.kdf.execute(a,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=n.iv,g.decrypt.call(this,e,t,n.key,r)}})))},66472:function(e,t,a){var r,n,i,s,o,c,d,l,x,f,u,h,b,p,m;r=a(87012),a(69251),a(95911),a(50459),a(66238),n=r.lib.BlockCipher,i=r.algo,s=[],o=[],c=[],d=[],l=[],x=[],f=[],u=[],h=[],b=[],function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var a=0,r=0,t=0;t<256;t++){var n=r^r<<1^r<<2^r<<3^r<<4;n=n>>>8^255&n^99,s[a]=n,o[n]=a;var i=e[a],p=e[i],m=e[p],g=257*e[n]^0x1010100*n;c[a]=g<<24|g>>>8,d[a]=g<<16|g>>>16,l[a]=g<<8|g>>>24,x[a]=g;var g=0x1010101*m^65537*p^257*i^0x1010100*a;f[n]=g<<24|g>>>8,u[n]=g<<16|g>>>16,h[n]=g<<8|g>>>24,b[n]=g,a?(a=i^e[e[e[m^i]]],r^=e[e[r]]):a=r=1}}(),p=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,a=t.words,r=t.sigBytes/4,n=((this._nRounds=r+6)+1)*4,i=this._keySchedule=[],o=0;o<n;o++)o<r?i[o]=a[o]:(e=i[o-1],o%r?r>6&&o%r==4&&(e=s[e>>>24]<<24|s[e>>>16&255]<<16|s[e>>>8&255]<<8|s[255&e]):e=(s[(e=e<<8|e>>>24)>>>24]<<24|s[e>>>16&255]<<16|s[e>>>8&255]<<8|s[255&e])^p[o/r|0]<<24,i[o]=i[o-r]^e);for(var c=this._invKeySchedule=[],d=0;d<n;d++){var o=n-d;if(d%4)var e=i[o];else var e=i[o-4];d<4||o<=4?c[d]=e:c[d]=f[s[e>>>24]]^u[s[e>>>16&255]]^h[s[e>>>8&255]]^b[s[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,c,d,l,x,s)},decryptBlock:function(e,t){var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,f,u,h,b,o);var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,r,n,i,s,o){for(var c=this._nRounds,d=e[t]^a[0],l=e[t+1]^a[1],x=e[t+2]^a[2],f=e[t+3]^a[3],u=4,h=1;h<c;h++){var b=r[d>>>24]^n[l>>>16&255]^i[x>>>8&255]^s[255&f]^a[u++],p=r[l>>>24]^n[x>>>16&255]^i[f>>>8&255]^s[255&d]^a[u++],m=r[x>>>24]^n[f>>>16&255]^i[d>>>8&255]^s[255&l]^a[u++],g=r[f>>>24]^n[d>>>16&255]^i[l>>>8&255]^s[255&x]^a[u++];d=b,l=p,x=m,f=g}var b=(o[d>>>24]<<24|o[l>>>16&255]<<16|o[x>>>8&255]<<8|o[255&f])^a[u++],p=(o[l>>>24]<<24|o[x>>>16&255]<<16|o[f>>>8&255]<<8|o[255&d])^a[u++],m=(o[x>>>24]<<24|o[f>>>16&255]<<16|o[d>>>8&255]<<8|o[255&l])^a[u++],g=(o[f>>>24]<<24|o[d>>>16&255]<<16|o[l>>>8&255]<<8|o[255&x])^a[u++];e[t]=b,e[t+1]=p,e[t+2]=m,e[t+3]=g},keySize:8}),r.AES=n._createHelper(m),e.exports=r.AES},69251:function(e,t,a){var r,n;n=(r=a(87012)).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,r=this._map;e.clamp();for(var n=[],i=0;i<a;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;o<4&&i+.75*o<a;o++)n.push(r.charAt(s>>>6*(3-o)&63));var c=r.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,a=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<a.length;i++)r[a.charCodeAt(i)]=i}var s=a.charAt(64);if(s){var o=e.indexOf(s);-1!==o&&(t=o)}for(var c=e,d=t,l=r,x=[],f=0,u=0;u<d;u++)if(u%4){var h=l[c.charCodeAt(u-1)]<<u%4*2|l[c.charCodeAt(u)]>>>6-u%4*2;x[f>>>2]|=h<<24-f%4*8,f++}return n.create(x,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=r.enc.Base64},69959:function(e,t,a){e.exports=function(e){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,a=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],n=0;n<t;n++)r[n>>>2]|=e[n]<<24-n%4*8;a.call(this,r,t)}else a.apply(this,arguments)}).prototype=t}return e.lib.WordArray}(a(87012))},70661:function(e,t,a){var r;r=a(87012),a(66238),r.mode.CTRGladman=function(){var e=r.lib.BlockCipherMode.extend();function t(e){if((e>>24&255)==255){var t=e>>16&255,a=e>>8&255,r=255&e;255===t?(t=0,255===a?(a=0,255===r?r=0:++r):++a):++t,e=0+(t<<16)+(a<<8)+r}else e+=0x1000000;return e}var a=e.Encryptor=e.extend({processBlock:function(e,a){var r,n=this._cipher,i=n.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0),0===((r=o)[0]=t(r[0]))&&(r[1]=t(r[1]));var c=o.slice(0);n.encryptBlock(c,0);for(var d=0;d<i;d++)e[a+d]^=c[d]}});return e.Decryptor=a,e}(),e.exports=r.mode.CTRGladman},71603:(e,t,a)=>{"use strict";function r(e,t){let a=[9,8,7,6,5,4,3,2,1],r=[];for(let n=0;n<t.length;n++)if(null!==t[n]&&void 0!==t[n]){let i=t[n],s=0===n?e:t[n-1]-1;r.push({grade:a[n],minMark:i,maxMark:s})}let n=t.filter(e=>null!=e).pop();return void 0!==n&&r.push({grade:0,minMark:0,maxMark:n-1}),r}a.r(t),a.d(t,{GradeBoundariesService:()=>d});let n={8700:{subjectCode:"8700",subjectTitle:"ENGLISH LANGUAGE",maxMark:160,boundaries:r(160,[121,111,101,91,81,75,64,53,42])},"8461F":{subjectCode:"8461F",subjectTitle:"MATHEMATICS FOUNDATION",tier:"F",maxMark:200,boundaries:r(200,[null,null,null,null,140,120,100,80,60])},"8461H":{subjectCode:"8461H",subjectTitle:"MATHEMATICS HIGHER",tier:"H",maxMark:200,boundaries:r(200,[160,140,120,100,90,80,null,null,null])}},i={J198:{subjectCode:"J198",subjectTitle:"",maxMark:210,boundaries:r(210,[null,null,null,174,157,140,null,null,123])},J170:{subjectCode:"J170",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,187,null,175,163,null,null,146])},J171:{subjectCode:"J171",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,187,null,175,163,null,null,146])},J172:{subjectCode:"J172",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,187,null,175,163,null,null,146])},J173:{subjectCode:"J173",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,187,null,175,163,null,null,146])},J174:{subjectCode:"J174",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,187,null,175,163,null,null,146])},J175:{subjectCode:"J175",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,187,null,175,163,null,null,146])},J176:{subjectCode:"J176",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,187,null,175,163,null,null,146])},J247:{subjectCode:"J247",subjectTitle:"Higher Tier: 03+04",maxMark:180,boundaries:r(180,[null,142,null,131,null,121,null,104,null])},J257:{subjectCode:"J257",subjectTitle:"Higher Tier: 03+04",maxMark:180,boundaries:r(180,[null,143,null,131,null,119,null,100,null])},J204:{subjectCode:"J204",subjectTitle:"",maxMark:160,boundaries:r(160,[null,null,116,null,106,96,null,null,84])},J248:{subjectCode:"J248",subjectTitle:"Higher Tier: 03+04",maxMark:180,boundaries:r(180,[null,154,null,140,null,127,null,107,null])},J258:{subjectCode:"J258",subjectTitle:"Higher Tier: 03+04",maxMark:180,boundaries:r(180,[null,128,null,114,null,100,null,81,null])},J270:{subjectCode:"J270",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,null,153,140,128,null,null,113])},J199:{subjectCode:"J199",subjectTitle:"Option F: 12+23",maxMark:180,boundaries:r(180,[null,null,null,142,131,120,null,null,106])},J292:{subjectCode:"J292",subjectTitle:"Option K: 01+05+06",maxMark:200,boundaries:r(200,[null,null,null,169,147,126,null,null,113])},J277:{subjectCode:"J277",subjectTitle:"",maxMark:160,boundaries:r(160,[null,null,null,136,126,117,null,null,102])},J310:{subjectCode:"J310",subjectTitle:"All options",maxMark:200,boundaries:r(200,[null,null,null,152,137,122,null,null,106])},J316:{subjectCode:"J316",subjectTitle:"All options",maxMark:200,boundaries:r(200,[null,null,null,177,167,158,null,null,143])},J205:{subjectCode:"J205",subjectTitle:"",maxMark:160,boundaries:r(160,[null,null,null,118,107,97,null,null,84])},J351:{subjectCode:"J351",subjectTitle:"",maxMark:160,boundaries:r(160,[null,130,null,null,119,109,null,null,97])},J352:{subjectCode:"J352",subjectTitle:"",maxMark:160,boundaries:r(160,[null,null,null,133,118,103,null,null,84])},J309:{subjectCode:"J309",subjectTitle:"All options  *To create the overall boundaries, components are weighted to give marks out of 150",maxMark:300,boundaries:r(300,[null,null,null,235,212,190,null,null,167])},J383:{subjectCode:"J383",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,null,157,141,126,null,null,110])},J384:{subjectCode:"J384",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,null,158,145,132,null,null,118])},J411:{subjectCode:"J411",subjectTitle:"Option HF: 18+21+39",maxMark:210,boundaries:r(210,[null,null,null,160,140,120,null,null,105])},J282:{subjectCode:"J282",subjectTitle:"Option K: 01+05+06",maxMark:200,boundaries:r(200,[null,null,null,172,156,140,null,null,123])},J560:{subjectCode:"J560",subjectTitle:"Higher Tier: 04+05+06",maxMark:300,boundaries:r(300,[null,null,245,null,195,null,145,null,110])},J200:{subjectCode:"J200",subjectTitle:"All options  *To create the overall boundaries, components 03 and 04 are weighted to give marks out of 60",maxMark:200,boundaries:r(200,[null,null,null,163,152,141,null,null,125])},J536:{subjectCode:"J536",subjectTitle:"",maxMark:200,boundaries:r(200,[null,null,null,170,159,149,null,null,136])},J587:{subjectCode:"J587",subjectTitle:"All options",maxMark:200,boundaries:r(200,[null,null,160,null,150,141,null,null,128])},J249:{subjectCode:"J249",subjectTitle:"Higher Tier: 03+04",maxMark:180,boundaries:r(180,[null,null,147,null,135,null,123,null,104])},J259:{subjectCode:"J259",subjectTitle:"Higher Tier: 03+04",maxMark:180,boundaries:r(180,[null,null,144,null,131,null,118,null,102])},J203:{subjectCode:"J203",subjectTitle:"",maxMark:180,boundaries:r(180,[null,null,null,143,132,121,null,null,105])},J625:{subjectCode:"J625",subjectTitle:"Option DA: 04+05+09",maxMark:252,boundaries:r(252,[null,null,null,196,181,166,null,null,145])},J125:{subjectCode:"J125",subjectTitle:"Religion, philosophy and ethics in the modern world",maxMark:1,boundaries:r(1,[null,null,null,null,null,null,null,null,126])},"J250   F":{subjectCode:"J250   F",subjectTitle:"Option components 01, 02, 03, 04, 05, 06",maxMark:360,boundaries:r(360,[null,null,null,null,null,null,null,null,null])},"J250   H":{subjectCode:"J250   H",subjectTitle:"Option components 07, 08, 09, 10, 11, 12",maxMark:360,boundaries:r(360,[273,260,248,236,null,224,208,null,192])},"J260   F":{subjectCode:"J260   F",subjectTitle:"Option components 01, 02, 03, 04",maxMark:360,boundaries:r(360,[null,null,null,null,null,null,null,null,null])},"J260   H":{subjectCode:"J260   H",subjectTitle:"Option components 05, 06, 07, 08",maxMark:360,boundaries:r(360,[256,242,228,214,null,201,185,null,169])}},s={subjects:{...n,...i},components:{"8572/1":{subjectCode:"8572",componentCode:"8572/1",componentTitle:"BIOLOGY PAPER 1",maxMark:84,boundaries:r(84,[70,62,54,46,38,30,22,14,10])},"8572/2":{subjectCode:"8572",componentCode:"8572/2",componentTitle:"BIOLOGY PAPER 2",maxMark:84,boundaries:r(84,[null,68,60,52,44,36,28,20,12])}}};function o(e){return s.subjects[e]}function c(e){return s.components[e]}class d{static calculateGrade(e,t){let a=o(e);if(!a)throw Error(`Subject boundaries not found for code: ${e}`);return this.calculateGradeFromBoundaries(a,t)}static calculateComponentGrade(e,t){let a=c(e);if(!a)throw Error(`Component boundaries not found for code: ${e}`);return this.calculateGradeFromBoundaries(a,t)}static calculateGradeFromBoundaries(e,t){let a,r;if(!e||!e.boundaries||0===e.boundaries.length)throw Error("Invalid boundaries data");if(t<0||t>e.maxMark)throw Error(`Mark ${t} is outside valid range 0-${e.maxMark}`);let{maxMark:n}=e,i=Math.round(t/n*100),s=null,o=[...e.boundaries].filter(t=>t.minMark<=e.maxMark).sort((e,t)=>t.grade-e.grade);for(let e of o)if(t>=e.minMark){s=e.grade;let t=o.find(t=>t.grade>e.grade);t&&(a=t.minMark);let n=o.find(t=>t.grade<e.grade);n&&(r=n.minMark);break}return null===s&&(s=0),{grade:s,percentage:i,mark:t,maxMark:n,nextGradeBoundary:a,previousGradeBoundary:r}}static getSubjectBoundaries(e){return o(e)}static getComponentBoundaries(e){return c(e)}static getAllSubjects(){return Object.values(s.subjects)}static getSubjectsByTier(e){return Object.values(s.subjects).filter(t=>t.tier===e)}static searchSubjectsByTitle(e){let t=e.toLowerCase();return Object.values(s.subjects).filter(e=>e.subjectTitle.toLowerCase().includes(t))}static marksToNextGrade(e,t){try{let a=o(e);if(!a)return null;let r=[...a.boundaries].sort((e,t)=>t.grade-e.grade),n=0;for(let e of r)if(t>=e.minMark){n=e.grade;break}if(9===n)return null;let i=r.find(e=>e.grade===n+1);if(!i)return null;return Math.max(0,i.minMark-t)}catch(e){return null}}static getGradeDescription(e){switch(e){case 9:return"Grade 9 (A*)";case 8:return"Grade 8 (A/A*)";case 7:return"Grade 7 (A)";case 6:return"Grade 6 (B)";case 5:return"Grade 5 (Strong Pass)";case 4:return"Grade 4 (Standard Pass)";case 3:return"Grade 3 (D/E)";case 2:return"Grade 2 (E/F)";case 1:return"Grade 1 (F/G)";case 0:return"Unclassified (U)";default:return"Invalid Grade"}}static validateMark(e,t){let a=o(e);return!!a&&t>=0&&t<=a.maxMark}static getGradeDistribution(e){let t=o(e);return t?t.boundaries.map(e=>({grade:e.grade,description:this.getGradeDescription(e.grade),minMark:e.minMark,maxMark:e.maxMark,percentage:Math.round(e.minMark/t.maxMark*100)})):null}}},71973:function(e,t,a){var r,n,i,s,o;r=a(87012),a(65404),n=r.lib.WordArray,s=(i=r.algo).SHA256,o=i.SHA224=s.extend({_doReset:function(){this._hash=new n.init([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=s._createHelper(o),r.HmacSHA224=s._createHmacHelper(o),e.exports=r.SHA224},73849:function(e,t,a){var r,n,i,s,o;i=(n=(r=a(87012)).lib).Base,s=n.WordArray,(o=r.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],void 0!=t?this.sigBytes=t:this.sigBytes=8*e.length},toX32:function(){for(var e=this.words,t=e.length,a=[],r=0;r<t;r++){var n=e[r];a.push(n.high),a.push(n.low)}return s.create(a,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),a=t.length,r=0;r<a;r++)t[r]=t[r].clone();return e}}),e.exports=r},74075:e=>{"use strict";e.exports=require("zlib")},77025:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>eR,routeModule:()=>eS,serverHooks:()=>eO,workAsyncStorage:()=>eA,workUnitAsyncStorage:()=>eT});var r,n,i,s,o,c,d,l,x,f,u,h,b={};a.r(b),a.d(b,{GET:()=>eE,POST:()=>eC,runtime:()=>ew});var p=a(96559),m=a(48088),g=a(37719),v=a(36463),y=a(32190),_=a(72289),w=a(5069),k=a(12909);!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(r||(r={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(n||(n={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(i||(i={}));let C=["user","model","function","system"];!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(s||(s={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(o||(o={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(c||(c={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(d||(d={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"}(l||(l={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(x||(x={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(f||(f={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(u||(u={}));class E extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class S extends E{constructor(e,t){super(e),this.response=t}}class A extends E{constructor(e,t,a,r){super(e),this.status=t,this.statusText=a,this.errorDetails=r}}class T extends E{}class O extends E{}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(h||(h={}));class R{constructor(e,t,a,r,n){this.model=e,this.task=t,this.apiKey=a,this.stream=r,this.requestOptions=n}toString(){var e,t;let a=(null==(e=this.requestOptions)?void 0:e.apiVersion)||"v1beta",r=(null==(t=this.requestOptions)?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",n=`${r}/${a}/${this.model}:${this.task}`;return this.stream&&(n+="?alt=sse"),n}}async function I(e){var t;let a=new Headers;a.append("Content-Type","application/json"),a.append("x-goog-api-client",function(e){let t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.24.1"),t.join(" ")}(e.requestOptions)),a.append("x-goog-api-key",e.apiKey);let r=null==(t=e.requestOptions)?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(e){throw new T(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${e.message}`)}for(let[e,t]of r.entries()){if("x-goog-api-key"===e)throw new T(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new T(`Header name ${e} can only be set using the apiClient field`);a.append(e,t)}}return a}async function B(e,t,a,r,n,i){let s=new R(e,t,a,r,i);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let a=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>a.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{a.abort()}),t.signal=a.signal}return t}(i)),{method:"POST",headers:await I(s),body:n})}}async function M(e,t,a,r,n,i={},s=fetch){let{url:o,fetchOptions:c}=await B(e,t,a,r,n,i);return j(o,c,s)}async function j(e,t,a=fetch){let r;try{r=await a(e,t)}catch(a){var n=a,i=e;let t=n;throw"AbortError"===t.name?(t=new O(`Request aborted when fetching ${i.toString()}: ${n.message}`)).stack=n.stack:n instanceof A||n instanceof T||((t=new E(`Error fetching from ${i.toString()}: ${n.message}`)).stack=n.stack),t}return r.ok||await N(r,e),r}async function N(e,t){let a,r="";try{let t=await e.json();r=t.error.message,t.error.details&&(r+=` ${JSON.stringify(t.error.details)}`,a=t.error.details)}catch(e){}throw new A(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,a)}function H(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),G(e.candidates[0]))throw new S(`${U(e)}`,e);return function(e){var t,a,r,n;let i=[];if(null==(a=null==(t=e.candidates)?void 0:t[0].content)?void 0:a.parts)for(let t of null==(n=null==(r=e.candidates)?void 0:r[0].content)?void 0:n.parts)t.text&&i.push(t.text),t.executableCode&&i.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&i.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(e)}if(e.promptFeedback)throw new S(`Text not available. ${U(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),G(e.candidates[0]))throw new S(`${U(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),P(e)[0]}if(e.promptFeedback)throw new S(`Function call not available. ${U(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),G(e.candidates[0]))throw new S(`${U(e)}`,e);return P(e)}if(e.promptFeedback)throw new S(`Function call not available. ${U(e)}`,e)},e}function P(e){var t,a,r,n;let i=[];if(null==(a=null==(t=e.candidates)?void 0:t[0].content)?void 0:a.parts)for(let t of null==(n=null==(r=e.candidates)?void 0:r[0].content)?void 0:n.parts)t.functionCall&&i.push(t.functionCall);return i.length>0?i:void 0}let D=[l.RECITATION,l.SAFETY,l.LANGUAGE];function G(e){return!!e.finishReason&&D.includes(e.finishReason)}function U(e){var t,a,r;let n="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)n+="Response was blocked",(null==(t=e.promptFeedback)?void 0:t.blockReason)&&(n+=` due to ${e.promptFeedback.blockReason}`),(null==(a=e.promptFeedback)?void 0:a.blockReasonMessage)&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null==(r=e.candidates)?void 0:r[0]){let t=e.candidates[0];G(t)&&(n+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(n+=`: ${t.finishMessage}`))}return n}function F(e){return this instanceof F?(this.v=e,this):new F(e)}"function"==typeof SuppressedError&&SuppressedError;let L=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function J(e){let t=[],a=e.getReader();for(;;){let{done:e,value:r}=await a.read();if(e)return H(function(e){let t=e[e.length-1],a={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let r of t.candidates)if(a.candidates||(a.candidates=[]),a.candidates[e]||(a.candidates[e]={index:e}),a.candidates[e].citationMetadata=r.citationMetadata,a.candidates[e].groundingMetadata=r.groundingMetadata,a.candidates[e].finishReason=r.finishReason,a.candidates[e].finishMessage=r.finishMessage,a.candidates[e].safetyRatings=r.safetyRatings,r.content&&r.content.parts){a.candidates[e].content||(a.candidates[e].content={role:r.content.role||"user",parts:[]});let t={};for(let n of r.content.parts)n.text&&(t.text=n.text),n.functionCall&&(t.functionCall=n.functionCall),n.executableCode&&(t.executableCode=n.executableCode),n.codeExecutionResult&&(t.codeExecutionResult=n.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),a.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(a.usageMetadata=t.usageMetadata)}return a}(t));t.push(r)}}async function $(e,t,a,r){let[n,i]=(function(e){let t=e.getReader();return new ReadableStream({start(e){let a="";return function r(){return t.read().then(({value:t,done:n})=>{let i;if(n)return a.trim()?void e.error(new E("Failed to parse stream")):void e.close();let s=(a+=t).match(L);for(;s;){try{i=JSON.parse(s[1])}catch(t){e.error(new E(`Error parsing JSON response: "${s[1]}"`));return}e.enqueue(i),s=(a=a.substring(s[0].length)).match(L)}return r()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new O("Request aborted when reading from the stream"):new E("Error reading from the stream")})}()}})})((await M(t,h.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(a),r)).body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(e){return function(e,t,a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,n=a.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){n[e]&&(r[e]=function(t){return new Promise(function(a,r){i.push([e,t,a,r])>1||o(e,t)})})}function o(e,t){try{var a;(a=n[e](t)).value instanceof F?Promise.resolve(a.value.v).then(c,d):l(i[0][2],a)}catch(e){l(i[0][3],e)}}function c(e){o("next",e)}function d(e){o("throw",e)}function l(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:a}=yield F(t.read());if(a)break;yield yield F(H(e))}})}(n),response:J(i)}}async function z(e,t,a,r){let n=await M(t,h.GENERATE_CONTENT,e,!1,JSON.stringify(a),r);return{response:H(await n.json())}}function q(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)if(!e.role)return{role:"system",parts:e.parts};else return e}}function K(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let a of e)"string"==typeof a?t.push({text:a}):t.push(a);var a=t;let r={role:"user",parts:[]},n={role:"function",parts:[]},i=!1,s=!1;for(let e of a)"functionResponse"in e?(n.parts.push(e),s=!0):(r.parts.push(e),i=!0);if(i&&s)throw new E("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new E("No content is provided for sending chat message.");return i?r:n}function Y(e){let t;return t=e.contents?e:{contents:[K(e)]},e.systemInstruction&&(t.systemInstruction=q(e.systemInstruction)),t}let W=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],V={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function X(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;let a=null==(t=e.candidates[0])?void 0:t.content;if(void 0===a||void 0===a.parts||0===a.parts.length)return!1;for(let e of a.parts)if(void 0===e||0===Object.keys(e).length||void 0!==e.text&&""===e.text)return!1;return!0}let Q="SILENT_ERROR";class Z{constructor(e,t,a,r={}){this.model=t,this.params=a,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==a?void 0:a.history)&&(!function(e){let t=!1;for(let a of e){let{role:e,parts:r}=a;if(!t&&"user"!==e)throw new E(`First content should be with role 'user', got ${e}`);if(!C.includes(e))throw new E(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(C)}`);if(!Array.isArray(r))throw new E("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new E("Each Content should have at least one part");let n={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of r)for(let t of W)t in e&&(n[t]+=1);let i=V[e];for(let t of W)if(!i.includes(t)&&n[t]>0)throw new E(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var a,r,n,i,s,o;let c;await this._sendPromise;let d=K(e),l={safetySettings:null==(a=this.params)?void 0:a.safetySettings,generationConfig:null==(r=this.params)?void 0:r.generationConfig,tools:null==(n=this.params)?void 0:n.tools,toolConfig:null==(i=this.params)?void 0:i.toolConfig,systemInstruction:null==(s=this.params)?void 0:s.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,d]},x=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>z(this._apiKey,this.model,l,x)).then(e=>{var t;if(X(e.response)){this._history.push(d);let a=Object.assign({parts:[],role:"model"},null==(t=e.response.candidates)?void 0:t[0].content);this._history.push(a)}else{let t=U(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}c=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,c}async sendMessageStream(e,t={}){var a,r,n,i,s,o;await this._sendPromise;let c=K(e),d={safetySettings:null==(a=this.params)?void 0:a.safetySettings,generationConfig:null==(r=this.params)?void 0:r.generationConfig,tools:null==(n=this.params)?void 0:n.tools,toolConfig:null==(i=this.params)?void 0:i.toolConfig,systemInstruction:null==(s=this.params)?void 0:s.systemInstruction,cachedContent:null==(o=this.params)?void 0:o.cachedContent,contents:[...this._history,c]},l=Object.assign(Object.assign({},this._requestOptions),t),x=$(this._apiKey,this.model,d,l);return this._sendPromise=this._sendPromise.then(()=>x).catch(e=>{throw Error(Q)}).then(e=>e.response).then(e=>{if(X(e)){this._history.push(c);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=U(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==Q&&console.error(e)}),x}}async function ee(e,t,a,r){return(await M(t,h.COUNT_TOKENS,e,!1,JSON.stringify(a),r)).json()}async function et(e,t,a,r){return(await M(t,h.EMBED_CONTENT,e,!1,JSON.stringify(a),r)).json()}async function ea(e,t,a,r){let n=a.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await M(t,h.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),r)).json()}class er{constructor(e,t,a={}){this.apiKey=e,this._requestOptions=a,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=q(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var a;let r=Y(e),n=Object.assign(Object.assign({},this._requestOptions),t);return z(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(a=this.cachedContent)?void 0:a.name},r),n)}async generateContentStream(e,t={}){var a;let r=Y(e),n=Object.assign(Object.assign({},this._requestOptions),t);return $(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(a=this.cachedContent)?void 0:a.name},r),n)}startChat(e){var t;return new Z(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(t=this.cachedContent)?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let a=function(e,t){var a;let r={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null==(a=null==t?void 0:t.cachedContent)?void 0:a.name,contents:[]},n=null!=e.generateContentRequest;if(e.contents){if(n)throw new T("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(n)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{let t=K(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return ee(this.apiKey,this.model,a,r)}async embedContent(e,t={}){let a="string"==typeof e||Array.isArray(e)?{content:K(e)}:e,r=Object.assign(Object.assign({},this._requestOptions),t);return et(this.apiKey,this.model,a,r)}async batchEmbedContents(e,t={}){let a=Object.assign(Object.assign({},this._requestOptions),t);return ea(this.apiKey,this.model,e,a)}}class en{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new E("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new er(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,a){if(!e.name)throw new T("Cached content must contain a `name` field.");if(!e.model)throw new T("Cached content must contain a `model` field.");for(let a of["model","systemInstruction"])if((null==t?void 0:t[a])&&e[a]&&(null==t?void 0:t[a])!==e[a]){if("model"===a&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new T(`Different value for "${a}" specified in modelParams (${t[a]}) and cachedContent (${e[a]})`)}let r=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new er(this.apiKey,r,a)}}class ei{generateGradeFromScore(e,t=100,r){if(r)try{let{GradeBoundariesService:t}=a(71603);if(t.validateMark(r,e)){let a=t.calculateGrade(r,e);return 0===a.grade?"U":a.grade.toString()}}catch(e){}let n=e/t*100;return n>=97?"9":n>=90?"8":n>=80?"7":n>=70?"6":n>=60?"5":n>=50?"4":n>=40?"3":n>=30?"2":n>=20?"1":"U"}buildPrompt(e){let t=e.subject||"General GCSE",a=e.examBoard||"Generic",r=e.marksTotal||20;return`You are an expert GCSE examiner with extensive experience in marking ${t} papers for ${a}. You have over 15 years of marking experience, have trained other examiners, and are thoroughly familiar with current GCSE specifications, mark schemes, and assessment standards. Your expertise includes understanding common student misconceptions, effective pedagogical approaches, and how to provide feedback that genuinely improves student performance.

CONTEXT AND REQUIREMENTS:
You are marking a student's response to help them understand their performance level and identify specific areas for improvement. Your marking must be:
- Accurate according to current GCSE standards and specifications (2024-2025)
- Constructive and developmental in nature, encouraging growth mindset
- Specific and actionable for student improvement with clear next steps
- Encouraging while maintaining honest assessment standards
- Aligned with the latest curriculum requirements and assessment objectives
- Sensitive to diverse learning styles and backgrounds
- Focused on both content mastery and skill development

QUESTION:
${e.question}

STUDENT ANSWER:
${e.answer}

${e.markScheme?`OFFICIAL MARK SCHEME:
${e.markScheme}
`:""}

MARKING CRITERIA AND STANDARDS:
- Total marks available: ${r}
- Subject: ${t}
- Exam board: ${a}
- Grade boundaries: Based on official ${a} grade boundaries where available, otherwise using standard GCSE percentages: Grade 9 (97-100%), Grade 8 (90-96%), Grade 7 (80-89%), Grade 6 (70-79%), Grade 5 (60-69%), Grade 4 (50-59%), Grade 3 (40-49%), Grade 2 (30-39%), Grade 1 (20-29%), U (0-19%)
- Assessment level: GCSE (typically ages 14-16, Key Stage 4)
- Current specification year: 2024-2025 academic cycle
- Cognitive demand level: Appropriate for Key Stage 4 students

ASSESSMENT OBJECTIVES TO EVALUATE:
${this.getAssessmentObjectives(t)}

DETAILED MARKING INSTRUCTIONS:

1. ACCURACY AND STANDARDS COMPLIANCE:
   - Apply current GCSE marking standards consistently
   - Use the official mark scheme if provided, otherwise apply subject-specific GCSE criteria
   - Consider partial credit where appropriate according to GCSE conventions
   - Ensure marking reflects the difficulty level expected at GCSE
   - Account for alternative valid interpretations or approaches where applicable

2. ASSESSMENT OBJECTIVE ANALYSIS:
   - Systematically evaluate against each relevant AO for the subject
   - Identify specific evidence in the student's response that demonstrates each AO
   - Note where AOs are partially met vs. fully demonstrated
   - Consider the weighting and importance of different AOs for this type of question

3. QUALITY INDICATORS TO ASSESS:
   - Factual accuracy and subject knowledge demonstration
   - Understanding of key concepts, processes, and principles
   - Application of knowledge to the specific question context
   - Use of appropriate subject-specific terminology and vocabulary
   - Logical structure and coherent argument development
   - Evidence of critical thinking and analysis (where appropriate to the question)
   - Clarity of communication and expression
   - Completeness of response relative to marks available

4. IMPROVEMENT SUGGESTIONS CRITERIA:
   - Provide 3-5 specific, actionable recommendations ranked by impact
   - Focus on the most impactful areas for improvement first
   - Include both content-based and skills-based suggestions
   - Reference specific parts of the student's answer where relevant
   - Suggest concrete study strategies, techniques, or resources where appropriate
   - Prioritize suggestions that would most significantly improve future performance
   - Connect improvements to specific assessment objectives
   - Include realistic timescales for implementing improvements

5. FEEDBACK QUALITY STANDARDS:
   - Begin with genuine positive recognition of strengths and achievements
   - Explain your marking decisions with clear, educational reasoning
   - Quote specific examples from the student's response to illustrate points
   - Connect feedback directly to the assessment objectives and mark scheme
   - Use encouraging, growth-oriented language that motivates continued learning
   - Provide context about GCSE expectations and standards at this level
   - Include specific guidance on how to develop weaker areas
   - Offer alternative approaches for different learning styles
   - Reference relevant revision techniques or exam strategies where appropriate

6. PEDAGOGICAL CONSIDERATIONS:
   - Consider the developmental stage and typical capabilities of GCSE students
   - Recognize effort and attempt even in weaker responses
   - Identify misconceptions and provide clarification
   - Suggest appropriate resources or study approaches
   - Consider different learning styles and approaches in your suggestions
   - Maintain appropriate challenge level for the student's demonstrated ability

7. QUALITY ASSURANCE CHECKS:
   - Ensure the score accurately reflects the quality demonstrated
   - Verify that feedback addresses the most significant issues
   - Confirm that improvement suggestions are realistic and achievable
   - Check that the grade aligns with established GCSE grade boundaries
   - Ensure consistency between the numerical score, grade, and written feedback

Please respond in the following JSON format with comprehensive detail:
{
  "score": [numerical score out of ${r}],
  "aosMet": ["List all AOs that are clearly evidenced", "Include partial AOs as 'AO1 (partial)' where appropriate"],
  "improvementSuggestions": [
    "Specific suggestion 1 with clear action steps",
    "Specific suggestion 2 referencing student's work",
    "Specific suggestion 3 with study strategy guidance",
    "Additional suggestions as needed (up to 5 total)"
  ],
  "detailedFeedback": "Comprehensive feedback (200-400 words) that includes: (1) Acknowledgment of strengths and positive aspects, (2) Detailed explanation of marking decisions with specific examples from the student's work, (3) Clear identification of areas for improvement with reasoning, (4) Connections to GCSE standards and expectations, (5) Constructive guidance for future improvement, (6) Encouragement and motivation for continued learning. Use specific quotes from the student's answer where relevant.",
  "confidenceScore": [numerical score from 1-10 representing confidence in the marking accuracy]
}

CRITICAL REQUIREMENTS:
- Be precise and justified in your scoring decisions
- Provide specific examples and quotes from the student's work
- Ensure feedback is appropriately detailed for the marks available
- Maintain professional examiner standards while being supportive
- Focus on helping the student understand both what they did well and how to improve
- Ensure all feedback is directly relevant to GCSE standards and expectations
- Provide actionable guidance that students can realistically implement
- Include a confidence score from 1-10 based on:
  * Clarity of the student's answer
  * Availability of a mark scheme
  * Familiarity with the subject and question type
  * Completeness of the response
  * Alignment with assessment objectives
  * Your certainty in the scoring decision`}getAssessmentObjectives(e){return({"English Literature":"AO1: Respond to texts critically and imaginatively\nAO2: Analyse language, form and structure\nAO3: Show understanding of relationships between texts and contexts\nAO4: Use range of vocabulary and sentence structures","English Language":"AO1: Identify and interpret explicit and implicit information\nAO2: Explain, comment on and analyse language and structure\nAO3: Compare writers' ideas and perspectives\nAO4: Evaluate texts critically\nAO5: Communicate clearly and effectively\nAO6: Use vocabulary and sentence structures accurately",Mathematics:"AO1: Use and apply standard techniques\nAO2: Reason, interpret and communicate mathematically\nAO3: Solve problems within mathematics and other contexts",Biology:"AO1: Demonstrate knowledge and understanding\nAO2: Apply knowledge and understanding\nAO3: Analyse information and ideas to interpret and evaluate, make judgements and draw conclusions",Chemistry:"AO1: Demonstrate knowledge and understanding\nAO2: Apply knowledge and understanding\nAO3: Analyse information and ideas to interpret and evaluate, make judgements and draw conclusions",Physics:"AO1: Demonstrate knowledge and understanding\nAO2: Apply knowledge and understanding\nAO3: Analyse information and ideas to interpret and evaluate, make judgements and draw conclusions",History:"AO1: Demonstrate knowledge and understanding\nAO2: Explain and analyse historical events and periods\nAO3: Analyse, evaluate and use sources\nAO4: Analyse and evaluate different interpretations",Geography:"AO1: Demonstrate knowledge and understanding\nAO2: Apply knowledge and understanding\nAO3: Use a variety of skills and techniques\nAO4: Enquire into geographical questions and issues"})[e]||"AO1: Demonstrate knowledge and understanding\nAO2: Apply knowledge and understanding\nAO3: Analyse and evaluate information"}}var es=a(43294);class eo extends ei{async getClient(){if(!this.client){let e=await (0,es.getEnvVar)("GOOGLE_AI_API_KEY");if(!e)throw Error("GOOGLE_AI_API_KEY is required");this.client=new en(e)}return this.client}async mark(e){try{let t,a=(await this.getClient()).getGenerativeModel({model:this.model}),r=this.buildPrompt(e),n=await a.generateContent(r),i=(await n.response).text();try{t=JSON.parse(i)}catch(e){t=this.parseTextResponse(i)}return{score:t.score||0,grade:this.generateGradeFromScore(t.score||0,e.marksTotal||100),aosMet:t.aosMet||[],improvementSuggestions:t.improvementSuggestions||[],aiResponse:t.detailedFeedback||i,modelUsed:this.model}}catch(e){throw Error("Failed to process marking request with Gemini")}}parseTextResponse(e){return{score:this.extractScore(e),aosMet:this.extractAOs(e),improvementSuggestions:this.extractSuggestions(e),detailedFeedback:e}}extractScore(e){let t=e.match(/(?:score|marks?)[:\s]+(\d+)/i);return t?parseInt(t[1]):0}extractAOs(e){return[...new Set(e.match(/AO\d+/g)||[])]}extractSuggestions(e){let t=[];for(let a of e.split("\n"))(a.includes("improve")||a.includes("better")||a.includes("could"))&&t.push(a.trim());return t.slice(0,5)}constructor(...e){super(...e),this.name="Gemini",this.model="gemini-2.0-flash-thinking-exp-1219",this.tier="free",this.available=!0,this.client=null}}class ec extends ei{async mark(e){try{let t,a=await (0,es.getEnvVar)("OPENROUTER_API_KEY");if(!a)throw Error("OPENROUTER_API_KEY is required");let r=await (0,es.getEnvVar)("NEXT_PUBLIC_APP_URL"),n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json","HTTP-Referer":r||"https://aimarker.tech","X-Title":"AIMARKER - AI-Powered GCSE Marking"},body:JSON.stringify({model:this.model,messages:[{role:"user",content:this.buildPrompt(e)}],temperature:.3,max_tokens:2e3})});if(!n.ok)throw Error(`Kimi API error: ${n.status}`);let i=await n.json(),s=i.choices[0]?.message?.content||"";try{t=JSON.parse(s)}catch(e){t=this.parseTextResponse(s)}return{score:t.score||0,grade:this.generateGradeFromScore(t.score||0,e.marksTotal||100),aosMet:t.aosMet||[],improvementSuggestions:t.improvementSuggestions||[],aiResponse:t.detailedFeedback||s,modelUsed:this.model}}catch(e){throw Error("Failed to process marking request with Kimi")}}parseTextResponse(e){return{score:this.extractScore(e),aosMet:this.extractAOs(e),improvementSuggestions:this.extractSuggestions(e),detailedFeedback:e}}extractScore(e){let t=e.match(/(?:score|marks?)[:\s]+(\d+)/i);return t?parseInt(t[1]):0}extractAOs(e){return[...new Set(e.match(/AO\d+/g)||[])]}extractSuggestions(e){let t=[];for(let a of e.split("\n"))(a.includes("improve")||a.includes("better")||a.includes("could"))&&t.push(a.trim());return t.slice(0,5)}constructor(...e){super(...e),this.name="Advanced AI",this.model="moonshot/kimi-v2",this.tier="pro",this.available=!0}}class ed extends ei{async mark(e){try{let t,a=await (0,es.getEnvVar)("OPENROUTER_API_KEY");if(!a)throw Error("OPENROUTER_API_KEY is required");let r=await (0,es.getEnvVar)("NEXT_PUBLIC_APP_URL"),n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json","HTTP-Referer":r||"https://aimarker.tech","X-Title":"AIMARKER - AI-Powered GCSE Marking"},body:JSON.stringify({model:this.model,messages:[{role:"user",content:this.buildPrompt(e)}],temperature:.2,max_tokens:3e3})});if(!n.ok)throw Error(`DeepSeek API error: ${n.status}`);let i=await n.json(),s=i.choices[0]?.message?.content||"";try{t=JSON.parse(s)}catch(e){t=this.parseTextResponse(s)}return{score:t.score||0,grade:this.generateGradeFromScore(t.score||0,e.marksTotal||100),aosMet:t.aosMet||[],improvementSuggestions:t.improvementSuggestions||[],aiResponse:t.detailedFeedback||s,modelUsed:this.model}}catch(e){throw Error("Failed to process marking request with DeepSeek")}}parseTextResponse(e){return{score:this.extractScore(e),aosMet:this.extractAOs(e),improvementSuggestions:this.extractSuggestions(e),detailedFeedback:e}}extractScore(e){let t=e.match(/(?:score|marks?)[:\s]+(\d+)/i);return t?parseInt(t[1]):0}extractAOs(e){return[...new Set(e.match(/AO\d+/g)||[])]}extractSuggestions(e){let t=[];for(let a of e.split("\n"))(a.includes("improve")||a.includes("better")||a.includes("could"))&&t.push(a.trim());return t.slice(0,5)}constructor(...e){super(...e),this.name="DeepThink",this.model="deepseek/r1",this.tier="pro",this.available=!0}}class el extends ei{async mark(e){let t=this.buildPrompt(e),a=null;for(let e of this.PROVIDER_ORDER)try{let a=await this.makeRequest(t,e);return this.parseResponse(a,e)}catch(e){a=e;continue}throw a||Error("All OpenRouter models failed")}async makeRequest(e,t){let a=await (0,es.getEnvVar)("OPENROUTER_API_KEY");if(!a)throw Error("OPENROUTER_API_KEY is required");let r=await fetch(this.API_URL,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json","HTTP-Referer":"https://aimarker.tech","X-Title":"AIMARKER - GCSE AI Marking"},body:JSON.stringify({model:t,messages:[{role:"user",content:e}],max_tokens:2e3,temperature:.3,top_p:.9,stream:!1})});if(!r.ok){let e=await r.text();throw Error(`OpenRouter API error (${r.status}): ${e}`)}return(await r.json()).choices[0].message.content}parseResponse(e,t){try{let a=e.match(/\{[\s\S]*\}/);if(!a)throw Error("No JSON found in response");let r=JSON.parse(a[0]),n=parseInt(r.score)||0,i=this.generateGradeFromScore(n,20);return{score:n,grade:i,aosMet:Array.isArray(r.aosMet)?r.aosMet:[],improvementSuggestions:Array.isArray(r.improvementSuggestions)?r.improvementSuggestions:[],aiResponse:r.detailedFeedback||e,modelUsed:`OpenRouter (${t})`}}catch(a){return{score:0,grade:"U",aosMet:[],improvementSuggestions:["Please try again with a clearer answer"],aiResponse:e,modelUsed:`OpenRouter (${t})`}}}constructor(...e){super(...e),this.name="OpenRouter",this.model="Multi-Model Router",this.tier="free",this.available=!0,this.API_URL="https://openrouter.ai/api/v1/chat/completions",this.PROVIDER_ORDER=["deepseek/deepseek-r1","anthropic/claude-3.5-sonnet:beta","google/gemini-2.0-flash-exp:free","google/gemini-flash-1.5:free"]}}var ex=a(32846),ef=a(40383),eu=a.n(ef),eh=a(60547);class eb{async initialize(){if(!this.initialized){try{let e=await (0,es.getEnvVar)("UPSTASH_REDIS_REST_URL"),t=await (0,es.getEnvVar)("UPSTASH_REDIS_REST_TOKEN");if(e&&t)this.redis=new ex.Q({url:e,token:t});else{try{let e=globalThis.CACHE||globalThis.ENV?.CACHE;e&&(this.workersCache=new eh.ON(e))}catch{}this.workersCache||v.v.warn("Redis credentials not provided and Workers KV not available, using in-memory cache")}}catch(e){v.v.error("Cache initialization error:",e)}this.initialized=!0}}generateCacheKey(e){let t={answer:e.answer,question:e.question,subject:e.subject,examBoard:e.examBoard,markScheme:e.markScheme},a=eu().SHA256(JSON.stringify(t)).toString();return`marking:${a}`}async get(e){await this.initialize();let t=this.generateCacheKey(e);try{if(this.redis){let e=await this.redis.get(t);if(e)return e}else if(this.workersCache){let e=await this.workersCache.get(t);if(e)return e}else{let e=this.memoryCache.get(t);if(e&&Date.now()<e.expires)return e.data;e&&this.memoryCache.delete(t)}}catch(e){v.v.error("Cache get error:",e)}return null}async set(e,t){await this.initialize();let a=this.generateCacheKey(e);try{this.redis?await this.redis.set(a,JSON.stringify(t),{ex:this.CACHE_TTL}):this.workersCache?await this.workersCache.set(a,t,this.CACHE_TTL):(this.memoryCache.set(a,{data:t,expires:Date.now()+1e3*this.CACHE_TTL}),this.memoryCache.size>100&&this.cleanupMemoryCache())}catch(e){v.v.error("Cache set error:",e)}}cleanupMemoryCache(){let e=Date.now();for(let[t,a]of this.memoryCache.entries())e>=a.expires&&this.memoryCache.delete(t)}async invalidatePattern(e){if(await this.initialize(),this.redis)try{let t=await this.redis.keys(e);t.length>0&&await this.redis.del(...t)}catch(e){v.v.error("Cache invalidation error:",e)}else if(this.workersCache)v.v.warn("Pattern invalidation not supported with Workers KV cache");else{let t=new RegExp(e.replace("*",".*"));for(let e of this.memoryCache.keys())t.test(e)&&this.memoryCache.delete(e)}}async getCacheStats(){if(await this.initialize(),this.redis||this.workersCache)try{return{hits:0,misses:0,size:0}}catch(e){v.v.error("Cache stats error:",e)}return{hits:0,misses:0,size:this.memoryCache.size}}constructor(){this.redis=null,this.workersCache=null,this.memoryCache=new Map,this.CACHE_TTL=3600,this.initialized=!1}}let ep=new eb;class em{constructor(){this.providers=[],this.providers=[new el,new ed,new ec,new eo]}async mark(e,t,a){try{let r=await ep.get(e);if(r)return v.v.info("Cache hit for marking request"),r;let n=this.getAvailableProviders(t);if(0===n.length)throw v.v.error("No AI providers available for user tier:",t),Error("No AI providers available");let i=n[0];if(a){let e=n.find(e=>e.name===a);e?(i=e,v.v.info(`Using preferred provider: ${a}`)):v.v.warn(`Preferred provider ${a} not available, using default`)}let s=null;for(let t=0;t<3;t++)try{v.v.info(`Attempting marking with ${i.name} (attempt ${t+1}/3)`);let a=await this.attemptMarkWithTimeout(i,e);return await ep.set(e,a),v.v.info(`Successfully marked with ${i.name}`),a}catch(e){if(s=e instanceof Error?e:Error(String(e)),v.v.error(`Provider ${i.name} failed (attempt ${t+1}/3):`,e),t<2){let e=1e3*Math.pow(2,t);v.v.info(`Retrying in ${e}ms...`),await this.delay(e)}}for(let t of n.filter(e=>e!==i))try{v.v.info(`Trying fallback provider: ${t.name}`);let a=await this.attemptMarkWithTimeout(t,e);return await ep.set(e,a),v.v.info(`Successfully marked with fallback provider: ${t.name}`),a}catch(e){v.v.error(`Fallback provider ${t.name} failed:`,e instanceof Error?e:Error(String(e)))}throw v.v.error("All AI providers failed to process marking request"),s||Error("All AI providers failed")}catch(e){throw v.v.error("Error in AIRouter.mark:",e),e}}async attemptMarkWithTimeout(e,t,a=3e4){try{return await Promise.race([e.mark(t),new Promise((t,r)=>setTimeout(()=>r(Error(`Request to ${e.name} timed out after ${a}ms`)),a))])}catch(t){throw t instanceof Error&&t.message.includes("timed out")&&v.v.warn(`Request to ${e.name} timed out after ${a}ms`),t}}async delay(e){return new Promise(t=>setTimeout(t,e))}getAvailableProviders(e){return this.providers.filter(t=>!!t.available&&("FREE"===e?"free"===t.tier:"PRO"===e))}getProviderInfo(e){return this.getAvailableProviders(e).map(e=>({name:e.name,model:e.model,tier:e.tier,available:e.available}))}}let eg=new em;var ev=a(71603);class ey{static async enhanceWithGradeBoundaries(e,t){try{if(!ev.GradeBoundariesService.getSubjectBoundaries(t))return{...e};let a=e.score,r=ev.GradeBoundariesService.calculateGrade(t,a),n=ev.GradeBoundariesService.marksToNextGrade(t,a),i=ev.GradeBoundariesService.getGradeDistribution(t)||[];return{...e,gradeBoundaries:{calculatedGrade:r.grade??0,gradeDescription:r.grade?ev.GradeBoundariesService.getGradeDescription(r.grade):"Unclassified (U)",percentage:r.percentage,maxMark:r.maxMark,marksToNextGrade:n??void 0,gradeDistribution:i}}}catch(t){return{...e}}}static getAvailableSubjects(){return ev.GradeBoundariesService.getAllSubjects()}static searchSubjects(e){return ev.GradeBoundariesService.searchSubjectsByTitle(e)}static hasGradeBoundaries(e){return null!==ev.GradeBoundariesService.getSubjectBoundaries(e)}static getGradeInfo(e,t){return ev.GradeBoundariesService.calculateGrade(e,t)}}var e_=a(96027);let ew="nodejs",ek=_.Ik({question:_.Yj().min(1,"Question is required").max(1e4,"Question is too long"),answer:_.Yj().min(1,"Answer is required").max(5e4,"Answer is too long"),markScheme:_.Yj().max(1e4,"Mark scheme is too long").optional(),marksTotal:_.ai().int().positive().max(1e3).optional(),subject:_.Yj().max(100).optional(),examBoard:_.Yj().max(100).optional(),preferredProvider:_.Yj().max(50).optional(),includeGradeBoundaries:_.zM().optional().default(!1),subjectCode:_.Yj().max(20).optional()});async function eC(e){let t=Math.random().toString(36).substring(2,15);v.v.info("POST /api/mark request received",{requestId:t});try{let a,r,n=await (0,k.HW)();if(!n)return v.v.warn("Authentication failed for POST /api/mark",{requestId:t}),y.NextResponse.json({error:"Authentication required",requestId:t},{status:401});v.v.info(`User ${n.id} authenticated for marking request`,{requestId:t,userId:n.id});try{a=await e.json()}catch(e){return v.v.error("Failed to parse JSON body",{requestId:t,error:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),y.NextResponse.json({error:"Invalid JSON in request body",requestId:t},{status:400})}let i=ek.safeParse(a);if(!i.success)return v.v.warn("Validation failed for marking request",{requestId:t,userId:n.id,errors:i.error.errors}),y.NextResponse.json({error:"Validation failed",details:i.error.errors,requestId:t},{status:400});v.v.info("Request body validated successfully",{requestId:t,userId:n.id,questionLength:i.data.question.length,answerLength:i.data.answer.length,subject:i.data.subject,examBoard:i.data.examBoard});let s=await (0,k.hS)(n.id);if(!s.canUse)return v.v.warn(`User ${n.id} has reached daily limit`,{requestId:t,userId:n.id,usedToday:s.usedToday,limit:s.limit}),y.NextResponse.json({error:"Daily limit reached",usage:{used:s.usedToday,limit:s.limit,remaining:0},requestId:t},{status:429});let o={question:i.data.question,answer:i.data.answer,markScheme:i.data.markScheme,marksTotal:i.data.marksTotal,subject:i.data.subject,examBoard:i.data.examBoard};v.v.info(`Processing marking request for user ${n.id}`,{requestId:t,userId:n.id});try{r=await eg.mark(o,n.subscriptionTier,i.data.preferredProvider),v.v.info(`Successfully received AI marking response for user ${n.id}`,{requestId:t,userId:n.id,modelUsed:r.modelUsed,score:r.score})}catch(e){return v.v.error("AI marking failed",{requestId:t,userId:n.id,error:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),y.NextResponse.json({error:"Failed to process marking request",details:"Our AI systems are currently experiencing issues. Please try again later.",requestId:t},{status:503})}let c=r;if(i.data.includeGradeBoundaries&&i.data.subjectCode&&i.data.marksTotal)try{v.v.info(`Enhancing response with grade boundaries for subject ${i.data.subjectCode}`,{requestId:t,userId:n.id,subjectCode:i.data.subjectCode}),c=await ey.enhanceWithGradeBoundaries(r,i.data.subjectCode),v.v.info("Successfully enhanced response with grade boundaries",{requestId:t,userId:n.id,grade:c.grade})}catch(e){v.v.warn("Failed to enhance with grade boundaries",{requestId:t,userId:n.id,error:e instanceof Error?e.message:"Unknown error",subjectCode:i.data.subjectCode})}let d=await w.db,{data:l,error:x}=await d.from("submissions").insert({user_id:n.id,question:o.question,answer:o.answer,mark_scheme:o.markScheme,marks_total:o.marksTotal,subject:o.subject,exam_board:o.examBoard,request_id:t}).select("id, created_at").single();if(x||!l)return v.v.error("Supabase submission creation error",{requestId:t,userId:n.id,error:x}),y.NextResponse.json({error:"Failed to create submission",details:"There was an issue saving your submission. Please try again.",requestId:t},{status:500});v.v.info(`Submission ${l.id} created successfully for user ${n.id}`,{requestId:t,submissionId:l.id,userId:n.id}),(0,e_.gF)({userId:n.id,submissionId:l.id,subject:o.subject||null});let{data:f,error:u}=await d.from("feedback").insert({submission_id:l.id,ai_response:c.aiResponse,score:c.score,grade:c.grade,aos_met:c.aosMet,improvement_suggestions:c.improvementSuggestions,model_used:c.modelUsed,grade_boundaries:c.gradeBoundaries||null,request_id:t}).select("*").single();if(u||!f)return v.v.error("Supabase feedback creation error",{requestId:t,submissionId:l.id,error:u}),y.NextResponse.json({error:"Failed to create feedback",details:"There was an issue saving the feedback. Please try again.",requestId:t},{status:500});v.v.info(`Feedback ${f.id} created successfully for submission ${l.id}`,{requestId:t,feedbackId:f.id,submissionId:l.id}),await (0,k.rN)(n.id);let h=await (0,k.hS)(n.id);return v.v.info(`Usage updated for user ${n.id}: ${h.usedToday}/${h.limit}`,{requestId:t,userId:n.id,usedToday:h.usedToday,limit:h.limit}),y.NextResponse.json({success:!0,submission:{id:l.id,createdAt:l.created_at},feedback:{id:f.id,score:f.score,grade:f.grade,aosMet:f.aos_met,improvementSuggestions:f.improvement_suggestions,aiResponse:f.ai_response,modelUsed:f.model_used,gradeBoundaries:f.grade_boundaries},usage:{used:h.usedToday,limit:h.limit,remaining:h.limit-h.usedToday},requestId:t})}catch(e){return v.v.error("Unexpected error in POST /api/mark",{requestId:t,error:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),y.NextResponse.json({error:"Internal server error",details:"An unexpected error occurred. Please try again later.",requestId:t},{status:500})}}async function eE(){let e=Math.random().toString(36).substring(2,15);v.v.info("GET /api/mark request received",{requestId:e});try{let t=await (0,k.HW)();if(!t)return v.v.warn("Authentication failed for GET /api/mark",{requestId:e}),y.NextResponse.json({error:"Authentication required",requestId:e},{status:401});v.v.info(`User ${t.id} authenticated for GET /api/mark`,{requestId:e,userId:t.id});let a=await (0,k.hS)(t.id),r=eg.getProviderInfo(t.subscriptionTier);return v.v.info(`Returning marking info for user ${t.id}`,{requestId:e,userId:t.id,usedToday:a.usedToday,limit:a.limit,providerCount:r.length}),y.NextResponse.json({success:!0,usage:{used:a.usedToday,limit:a.limit,remaining:a.limit-a.usedToday,canUse:a.canUse},providers:r,userTier:t.subscriptionTier,requestId:e})}catch(t){return v.v.error("Error in GET /api/mark",{requestId:e,error:t instanceof Error?t.message:"Unknown error",stack:t instanceof Error?t.stack:void 0}),y.NextResponse.json({error:"Internal server error",details:"An unexpected error occurred. Please try again later.",requestId:e},{status:500})}}let eS=new p.AppRouteRouteModule({definition:{kind:m.RouteKind.APP_ROUTE,page:"/api/mark/route",pathname:"/api/mark",filename:"route",bundlePath:"app/api/mark/route"},resolvedPagePath:"/home/new_username/Documents/projects/aiamrkerv2/worktrees/claude/src/app/api/mark/route.ts",nextConfigOutput:"standalone",userland:b}),{workAsyncStorage:eA,workUnitAsyncStorage:eT,serverHooks:eO}=eS;function eR(){return(0,g.patchFetch)({workAsyncStorage:eA,workUnitAsyncStorage:eT})}},77519:function(e,t,a){var r;r=a(87012),a(66238),r.pad.Iso97971={pad:function(e,t){e.concat(r.lib.WordArray.create([0x80000000],1)),r.pad.ZeroPadding.pad(e,t)},unpad:function(e){r.pad.ZeroPadding.unpad(e),e.sigBytes--}},e.exports=r.pad.Iso97971},77598:e=>{"use strict";e.exports=require("node:crypto")},78544:function(e,t,a){var r;r=a(87012),a(66238),r.pad.ZeroPadding={pad:function(e,t){var a=4*t;e.clamp(),e.sigBytes+=a-(e.sigBytes%a||a)},unpad:function(e){for(var t=e.words,a=e.sigBytes-1,a=e.sigBytes-1;a>=0;a--)if(t[a>>>2]>>>24-a%4*8&255){e.sigBytes=a+1;break}}},e.exports=r.pad.ZeroPadding},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79999:function(e,t,a){var r;r=a(87012),a(66238),r.pad.NoPadding={pad:function(){},unpad:function(){}},e.exports=r.pad.NoPadding},80961:function(e,t,a){var r;r=a(87012),a(69251),a(95911),a(50459),a(66238),function(){var e=r.lib.BlockCipher,t=r.algo;let a=[0x243f6a88,0x85a308d3,0x13198a2e,0x3707344,0xa4093822,0x299f31d0,0x82efa98,0xec4e6c89,0x452821e6,0x38d01377,0xbe5466cf,0x34e90c6c,0xc0ac29b7,0xc97c50dd,0x3f84d5b5,0xb5470917,0x9216d5d9,0x8979fb1b],n=[[0xd1310ba6,0x98dfb5ac,0x2ffd72db,0xd01adfb7,0xb8e1afed,0x6a267e96,0xba7c9045,0xf12c7f99,0x24a19947,0xb3916cf7,0x801f2e2,0x858efc16,0x636920d8,0x71574e69,0xa458fea3,0xf4933d7e,0xd95748f,0x728eb658,0x718bcd58,0x82154aee,0x7b54a41d,0xc25a59b5,0x9c30d539,0x2af26013,0xc5d1b023,0x286085f0,0xca417918,0xb8db38ef,0x8e79dcb0,0x603a180e,0x6c9e0e8b,0xb01e8a3e,0xd71577c1,0xbd314b27,0x78af2fda,0x55605c60,0xe65525f3,0xaa55ab94,0x57489862,0x63e81440,0x55ca396a,0x2aab10b6,0xb4cc5c34,0x1141e8ce,0xa15486af,0x7c72e993,0xb3ee1411,0x636fbc2a,0x2ba9c55d,0x741831f6,0xce5c3e16,0x9b87931e,0xafd6ba33,0x6c24cf5c,0x7a325381,0x28958677,0x3b8f4898,0x6b4bb9af,0xc4bfe81b,0x66282193,0x61d809cc,0xfb21a991,0x487cac60,0x5dec8032,0xef845d5d,0xe98575b1,0xdc262302,0xeb651b88,0x23893e81,0xd396acc5,0xf6d6ff3,0x83f44239,0x2e0b4482,0xa4842004,0x69c8f04a,0x9e1f9b5e,0x21c66842,0xf6e96c9a,0x670c9c61,0xabd388f0,0x6a51a0d2,0xd8542f68,0x960fa728,0xab5133a3,0x6eef0b6c,0x137a3be4,0xba3bf050,0x7efb2a98,0xa1f1651d,0x39af0176,0x66ca593e,0x82430e88,0x8cee8619,0x456f9fb4,0x7d84a5c3,0x3b8b5ebe,0xe06f75d8,0x85c12073,0x401a449f,0x56c16aa6,0x4ed3aa62,0x363f7706,0x1bfedf72,0x429b023d,0x37d0d724,0xd00a1248,0xdb0fead3,0x49f1c09b,0x75372c9,0x80991b7b,0x25d479d8,0xf6e8def7,0xe3fe501a,0xb6794c3b,0x976ce0bd,0x4c006ba,0xc1a94fb6,0x409f60c4,0x5e5c9ec2,0x196a2463,0x68fb6faf,0x3e6c53b5,0x1339b2eb,0x3b52ec6f,0x6dfc511f,0x9b30952c,0xcc814544,0xaf5ebd09,0xbee3d004,0xde334afd,0x660f2807,0x192e4bb3,0xc0cba857,0x45c8740f,0xd20b5f39,0xb9d3fbdb,0x5579c0bd,0x1a60320a,0xd6a100c6,0x402c7279,0x679f25fe,0xfb1fa3cc,0x8ea5e9f8,0xdb3222f8,0x3c7516df,0xfd616b15,0x2f501ec8,0xad0552ab,0x323db5fa,0xfd238760,0x53317b48,0x3e00df82,0x9e5c57bb,0xca6f8ca0,0x1a87562e,0xdf1769db,0xd542a8f6,0x287effc3,0xac6732c6,0x8c4f5573,0x695b27b0,0xbbca58c8,0xe1ffa35d,0xb8f011a0,0x10fa3d98,0xfd2183b8,0x4afcb56c,0x2dd1d35b,0x9a53e479,0xb6f84565,0xd28e49bc,0x4bfb9790,0xe1ddf2da,0xa4cb7e33,0x62fb1341,0xcee4c6e8,0xef20cada,0x36774c01,0xd07e9efe,0x2bf11fb4,0x95dbda4d,0xae909198,0xeaad8e71,0x6b93d5a0,0xd08ed1d0,0xafc725e0,0x8e3c5b2f,0x8e7594b7,0x8ff6e2fb,0xf2122b64,0x8888b812,0x900df01c,0x4fad5ea0,0x688fc31c,0xd1cff191,0xb3a8c1ad,0x2f2f2218,0xbe0e1777,0xea752dfe,0x8b021fa1,0xe5a0cc0f,0xb56f74e8,0x18acf3d6,0xce89e299,0xb4a84fe0,0xfd13e0b7,0x7cc43b81,0xd2ada8d9,0x165fa266,0x80957705,0x93cc7314,0x211a1477,0xe6ad2065,0x77b5fa86,0xc75442f5,0xfb9d35cf,0xebcdaf0c,0x7b3e89a0,0xd6411bd3,0xae1e7e49,2428461,0x2071b35e,0x226800bb,0x57b8e0af,0x2464369b,0xf009b91e,0x5563911d,0x59dfa6aa,0x78c14389,0xd95a537f,0x207d5ba2,0x2e5b9c5,0x83260376,0x6295cfa9,0x11c81968,0x4e734a41,0xb3472dca,0x7b14a94a,0x1b510052,0x9a532915,0xd60f573f,0xbc9bc6e4,0x2b60a476,0x81e67400,0x8ba6fb5,0x571be91f,0xf296ec6b,0x2a0dd915,0xb6636521,0xe7b9f9b6,0xff34052e,0xc5855664,0x53b02d5d,0xa99f8fa1,0x8ba4799,0x6e85076a],[0x4b7a70e9,0xb5b32944,0xdb75092e,0xc4192623,290971e4,0x49a7df7d,0x9cee60b8,0x8fedb266,0xecaa8c71,0x699a17ff,0x5664526c,0xc2b19ee1,0x193602a5,0x75094c29,0xa0591340,0xe4183a3e,0x3f54989a,0x5b429d65,0x6b8fe4d6,0x99f73fd6,0xa1d29c07,0xefe830f5,0x4d2d38e6,0xf0255dc1,0x4cdd2086,0x8470eb26,0x6382e9c6,0x21ecc5e,0x9686b3f,0x3ebaefc9,0x3c971814,0x6b6a70a1,0x687f3584,0x52a0e286,0xb79c5305,0xaa500737,0x3e07841c,0x7fdeae5c,0x8e7d44ec,0x5716f2b8,0xb03ada37,0xf0500c0d,0xf01c1f04,0x200b3ff,0xae0cf51a,0x3cb574b2,0x25837a58,0xdc0921bd,0xd19113f9,0x7ca92ff6,0x94324773,0x22f54701,0x3ae5e581,0x37c2dadc,0xc8b57634,0x9af3dda7,0xa9446146,0xfd0030e,0xecc8c73e,0xa4751e41,0xe238cd99,0x3bea0e2f,0x3280bba1,0x183eb331,0x4e548b38,0x4f6db908,0x6f420d03,0xf60a04bf,0x2cb81290,0x24977c79,0x5679b072,0xbcaf89af,0xde9a771f,0xd9930810,0xb38bae12,0xdccf3f2e,0x5512721f,0x2e6b7124,0x501adde6,0x9f84cd87,0x7a584718,0x7408da17,0xbc9f9abc,0xe94b7d8c,0xec7aec3a,0xdb851dfa,0x63094366,0xc464c3d2,0xef1c1847,0x3215d908,0xdd433b37,0x24c2ba16,0x12a14d43,0x2a65c451,0x50940002,0x133ae4dd,0x71dff89e,0x10314e55,0x81ac77d6,0x5f11199b,0x43556f1,0xd7a3c76b,0x3c11183b,0x5924a509,0xf28fe6ed,0x97f1fbfa,0x9ebabf2c,0x1e153c6e,0x86e34570,0xeae96fb1,0x860e5e0a,0x5a3e2ab3,0x771fe71c,0x4e3d06fa,0x2965dcb9,0x99e71d0f,0x803e89d6,0x5266c825,0x2e4cc978,0x9c10b36a,0xc6150eba,0x94e2ea78,0xa5fc3c53,0x1e0a2df4,0xf2f74ea7,0x361d2b3d,0x1939260f,0x19c27960,0x5223a708,0xf71312b6,0xebadfe6e,0xeac31f66,0xe3bc4595,0xa67bc883,0xb17f37d1,0x18cff28,0xc332ddef,0xbe6c5aa5,0x65582185,0x68ab9802,0xeecea50f,0xdb2f953b,0x2aef7dad,0x5b6e2f84,0x1521b628,0x29076170,0xecdd4775,0x619f1510,0x13cca830,0xeb61bd96,0x334fe1e,0xaa0363cf,0xb5735c90,0x4c70a239,0xd59e9e0b,0xcbaade14,0xeecc86bc,0x60622ca7,0x9cab5cab,0xb2f3846e,0x648b1eaf,0x19bdf0ca,0xa02369b9,0x655abb50,0x40685a32,0x3c2ab4b3,0x319ee9d5,0xc021b8f7,0x9b540b19,0x875fa099,0x95f7997e,0x623d7da8,0xf837889a,0x97e32d77,0x11ed935f,0x16681281,0xe358829,0xc7e61fd6,0x96dedfa1,0x7858ba99,0x57f584a5,0x1b227263,0x9b83c3ff,0x1ac24696,0xcdb30aeb,0x532e3054,0x8fd948e4,0x6dbc3128,0x58ebf2ef,0x34c6ffea,0xfe28ed61,0xee7c3c73,0x5d4a14d9,0xe864b7e3,0x42105d14,0x203e13e0,0x45eee2b6,0xa3aaabea,0xdb6c4f15,0xfacb4fd0,0xc742f442,0xef6abbb5,0x654f3b1d,0x41cd2105,0xd81e799e,0x86854dc7,0xe44b476a,0x3d816250,0xcf62a1f2,0x5b8d2646,0xfc8883a0,0xc1c7b6a3,0x7f1524c3,0x69cb7492,0x47848a0b,0x5692b285,0x95bbf00,0xad19489d,0x1462b174,0x23820e00,0x58428d2a,0xc55f5ea,0x1dadf43e,0x233f7061,0x3372f092,0x8d937e41,0xd65fecf1,0x6c223bdb,0x7cde3759,0xcbee7460,0x4085f2a7,0xce77326e,0xa6078084,0x19f8509e,0xe8efd855,0x61d99735,0xa969a7aa,0xc50c06c2,0x5a04abfc,0x800bcadc,0x9e447a2e,0xc3453484,0xfdd56705,0xe1e9ec9,0xdb73dbd3,0x105588cd,0x675fda79,0xe3674340,0xc5c43465,0x713e38d8,0x3d28f89e,0xf16dff20,0x153e21e7,0x8fb03d4a,0xe6e39f2b,0xdb83adf7],[0xe93d5a68,0x948140f7,0xf64c261c,0x94692934,0x411520f7,0x7602d4f7,0xbcf46b2e,0xd4a20068,0xd4082471,0x3320f46a,0x43b7d4b7,0x500061af,0x1e39f62e,0x97244546,0x14214f74,0xbf8b8840,0x4d95fc1d,0x96b591af,0x70f4ddd3,0x66a02f45,0xbfbc09ec,0x3bd9785,0x7fac6dd0,0x31cb8504,0x96eb27b3,0x55fd3941,0xda2547e6,0xabca0a9a,0x28507825,0x530429f4,0xa2c86da,0xe9b66dfb,0x68dc1462,0xd7486900,0x680ec0a4,0x27a18dee,0x4f3ffea2,0xe887ad8c,0xb58ce006,0x7af4d6b6,0xaace1e7c,0xd3375fec,0xce78a399,0x406b2a42,0x20fe9e35,0xd9f385b9,0xee39d7ab,0x3b124e8b,0x1dc9faf7,0x4b6d1856,0x26a36631,0xeae397b2,0x3a6efa74,0xdd5b4332,0x6841e7f7,0xca7820fb,0xfb0af54e,0xd8feb397,0x454056ac,0xba489527,0x55533a3a,0x20838d87,0xfe6ba9b7,0xd096954b,0x55a867bc,0xa1159a58,0xcca92963,0x99e1db33,0xa62a4a56,0x3f3125f9,0x5ef47e1c,0x9029317c,0xfdf8e802,0x4272f70,0x80bb155c,0x5282ce3,0x95c11548,0xe4c66d22,0x48c1133f,0xc70f86dc,0x7f9c9ee,0x41041f0f,0x404779a4,0x5d886e17,0x325f51eb,0xd59bc0d1,0xf2bcc18f,0x41113564,0x257b7834,0x602a9c60,0xdff8e8a3,0x1f636c1b,0xe12b4c2,0x2e1329e,0xaf664fd1,0xcad18115,0x6b2395e0,0x333e92e1,0x3b240b62,0xeebeb922,0x85b2a20e,0xe6ba0d99,0xde720c8c,0x2da2f728,0xd0127845,0x95b794fd,0x647d0862,0xe7ccf5f0,0x5449a36f,0x877d48fa,0xc39dfd27,0xf33e8d1e,0xa476341,0x992eff74,0x3a6f6eab,0xf4f8fd37,0xa812dc60,0xa1ebddf8,0x991be14c,0xdb6e6b0d,0xc67b5510,0x6d672c37,0x2765d43b,0xdcd0e804,0xf1290dc7,0xcc00ffa3,0xb5390f92,0x690fed0b,0x667b9ffb,0xcedb7d9c,0xa091cf0b,0xd9155ea3,0xbb132f88,0x515bad24,0x7b9479bf,0x763bd6eb,0x37392eb3,0xcc115979,0x8026e297,0xf42e312d,0x6842ada7,0xc66a2b3b,0x12754ccc,0x782ef11c,0x6a124237,0xb79251e7,0x6a1bbe6,0x4bfb6350,0x1a6b1018,0x11caedfa,0x3d25bdd8,0xe2e1c3c9,0x44421659,0xa121386,0xd90cec6e,0xd5abea2a,0x64af674e,0xda86a85f,0xbebfe988,0x64e4c3fe,0x9dbc8057,0xf0f7c086,0x60787bf8,0x6003604d,0xd1fd8346,0xf6381fb0,0x7745ae04,0xd736fccc,0x83426b33,0xf01eab71,0xb0804187,0x3c005e5f,0x77a057be,0xbde8ae24,0x55464299,0xbf582e61,0x4e58f48f,0xf2ddfda2,0xf474ef38,0x8789bdc2,0x5366f9c3,0xc8b38e74,0xb475f255,0x46fcd9b9,0x7aeb2661,0x8b1ddf84,0x846a0e79,0x915f95e2,0x466e598e,0x20b45770,0x8cd55591,0xc902de4c,0xb90bace1,0xbb8205d0,0x11a86248,0x7574a99e,0xb77f19b6,0xe0a9dc09,0x662d09a1,0xc4324633,0xe85a1f02,0x9f0be8c,0x4a99a025,0x1d6efe10,0x1ab93d1d,0xba5a4df,0xa186f20f,0x2868f169,0xdcb7da83,0x573906fe,0xa1e2ce9b,0x4fcd7f52,0x50115e01,0xa70683fa,0xa002b5c4,0xde6d027,0x9af88c27,0x773f8641,0xc3604c06,0x61a806b5,0xf0177a28,0xc0f586e0,6314154,0x30dc7d62,0x11e69ed7,0x2338ea63,0x53c2dd94,0xc2c21634,0xbbcbee56,0x90bcb6de,0xebfc7da1,0xce591d76,0x6f05e409,0x4b7c0188,0x39720a3d,0x7c927c24,0x86e3725f,0x724d9db9,0x1ac15bb4,0xd39eb8fc,0xed545578,0x8fca5b5,0xd83d7cd3,0x4dad0fc4,0x1e50ef5e,0xb161e6f8,0xa28514d9,0x6c51133c,0x6fd5c7e7,0x56e14ec4,0x362abfce,0xddc6c837,0xd79a3234,0x92638212,0x670efa8e,0x406000e0],[0x3a39ce37,0xd3faf5cf,0xabc27737,0x5ac52d1b,0x5cb0679e,0x4fa33742,0xd3822740,0x99bc9bbe,0xd5118e9d,0xbf0f7315,0xd62d1c7e,0xc700c47b,0xb78c1b6b,0x21a19045,0xb26eb1be,0x6a366eb4,0x5748ab2f,0xbc946e79,0xc6a376d2,0x6549c2c8,0x530ff8ee,0x468dde7d,0xd5730a1d,0x4cd04dc6,0x2939bbdb,0xa9ba4650,0xac9526e8,0xbe5ee304,0xa1fad5f0,0x6a2d519a,0x63ef8ce2,0x9a86ee22,0xc089c2b8,0x43242ef6,0xa51e03aa,0x9cf2d0a4,0x83c061ba,0x9be96a4d,0x8fe51550,0xba645bd6,0x2826a2f9,0xa73a3ae1,0x4ba99586,0xef5562e9,0xc72fefd3,0xf752f7da,0x3f046f69,0x77fa0a59,0x80e4a915,0x87b08601,0x9b09e6ad,0x3b3ee593,0xe990fd5a,0x9e34d797,0x2cf0b7d9,0x22b8b51,0x96d5ac3a,0x17da67d,0xd1cf3ed6,0x7c7d2d28,0x1f9f25cf,0xadf2b89b,0x5ad6b472,0x5a88f54c,0xe029ac71,0xe019a5e6,0x47b0acfd,0xed93fa9b,0xe8d3c48d,0x283b57cc,0xf8d56629,0x79132e28,0x785f0191,0xed756055,0xf7960e44,0xe3d35e8c,0x15056dd4,0x88f46dba,0x3a16125,0x564f0bd,0xc3eb9e15,0x3c9057a2,0x97271aec,0xa93a072a,0x1b3f6d9b,0x1e6321f5,0xf59c66fb,0x26dcf319,0x7533d928,0xb155fdf5,0x3563482,0x8aba3cbb,0x28517711,0xc20ad9f8,0xabcc5167,0xccad925f,0x4de81751,0x3830dc8e,0x379d5862,0x9320f991,0xea7a90c2,0xfb3e7bce,0x5121ce64,0x774fbe32,0xa8b6e37e,0xc3293d46,0x48de5369,0x6413e680,0xa2ae0810,0xdd6db224,0x69852dfd,0x9072166,0xb39a460a,0x6445c0dd,0x586cdecf,0x1c20c8ae,0x5bbef7dd,0x1b588d40,0xccd2017f,0x6bb4e3bb,0xdda26a7e,0x3a59ff45,0x3e350a44,0xbcb4cdd5,0x72eacea8,0xfa6484bb,0x8d6612ae,0xbf3c6f47,0xd29be463,0x542f5d9e,0xaec2771b,0xf64e6370,0x740e0d8d,0xe75b1357,0xf8721671,0xaf537d5d,0x4040cb08,0x4eb4e2cc,0x34d2466a,0x115af84,3786409e3,0x95983a1d,0x6b89fb4,0xce6ea048,0x6f3f3b82,0x3520ab82,0x11a1d4b,0x277227f8,0x611560b1,0xe7933fdc,0xbb3a792b,0x344525bd,0xa08839e1,0x51ce794b,0x2f32c9b7,0xa01fbac9,0xe01cc87e,0xbcc7d1f6,0xcf0111c3,0xa1e8aac7,0x1a908749,0xd44fbd9a,0xd0dadecb,0xd50ada38,0x339c32a,0xc6913667,0x8df9317c,0xe0b12b4f,0xf79e59b7,0x43f5bb3a,0xf2d519ff,0x27d9459c,0xbf97222c,0x15e6fc2a,0xf91fc71,0x9b941525,0xfae59361,0xceb69ceb,0xc2a86459,0x12baa8d1,0xb6c1075e,0xe3056a0c,0x10d25065,0xcb03a442,0xe0ec6e0e,0x1698db3b,0x4c98a0be,0x3278e964,0x9f1f9532,0xe0d392df,0xd3a0342b,0x8971f21e,0x1b0a7441,0x4ba3348c,0xc5be7120,0xc37632d8,0xdf359f8d,0x9b992f2e,0xe60b6f47,0xfe3f11d,0xe54cda54,0x1edad891,0xce6279cf,0xcd3e7e6f,0x1618b166,0xfd2c1d05,0x848fd2c5,0xf6fb2299,0xf523f357,0xa6327623,0x93a83531,0x56cccd02,0xacf08162,0x5a75ebb5,0x6e163697,0x88d273cc,0xde966292,0x81b949d0,0x4c50901b,0x71c65614,0xe6c6c7bd,0x327a140a,0x45e1d006,0xc3f27b9a,0xc9aa53fd,0x62a80f00,0xbb25bfe2,0x35bdd2f6,0x71126905,0xb2040222,0xb6cbcf7c,0xcd769c2b,0x53113ec0,0x1640e3d3,0x38abbd60,0x2547adf0,0xba38209c,0xf746ce76,0x77afa1c5,0x20756060,0x85cbfe4e,0x8ae88dd8,0x7aaaf9b0,0x4cf9aa7e,0x1948c25c,0x2fb8a8c,0x1c36ae4,0xd6ebe1f9,0x90d4f869,0xa65cdea0,0x3f09252d,0xc208e69f,0xb74e6132,0xce77e25b,0x578fdfe3,0x3ac372e6]];var i={pbox:[],sbox:[]};function s(e,t){let a=e.sbox[0][t>>24&255]+e.sbox[1][t>>16&255];return a^=e.sbox[2][t>>8&255],a+=e.sbox[3][255&t]}function o(e,t,a){let r,n=t,i=a;for(let t=0;t<16;++t)n^=e.pbox[t],i=s(e,n)^i,r=n,n=i,i=r;return r=n,n=i,i=r^e.pbox[16],{left:n^=e.pbox[17],right:i}}var c=t.Blowfish=e.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key;!function(e,t,r){for(let t=0;t<4;t++){e.sbox[t]=[];for(let a=0;a<256;a++)e.sbox[t][a]=n[t][a]}let i=0;for(let n=0;n<18;n++)e.pbox[n]=a[n]^t[i],++i>=r&&(i=0);let s=0,c=0,d=0;for(let t=0;t<18;t+=2)s=(d=o(e,s,c)).left,c=d.right,e.pbox[t]=s,e.pbox[t+1]=c;for(let t=0;t<4;t++)for(let a=0;a<256;a+=2)s=(d=o(e,s,c)).left,c=d.right,e.sbox[t][a]=s,e.sbox[t][a+1]=c}(i,e.words,e.sigBytes/4)}},encryptBlock:function(e,t){var a=o(i,e[t],e[t+1]);e[t]=a.left,e[t+1]=a.right},decryptBlock:function(e,t){var a=function(e,t,a){let r,n=t,i=a;for(let t=17;t>1;--t)n^=e.pbox[t],i=s(e,n)^i,r=n,n=i,i=r;return r=n,n=i,i=r^e.pbox[1],{left:n^=e.pbox[0],right:i}}(i,e[t],e[t+1]);e[t]=a.left,e[t+1]=a.right},blockSize:2,keySize:4,ivSize:2});r.Blowfish=e._createHelper(c)}(),e.exports=r.Blowfish},81630:e=>{"use strict";e.exports=require("http")},87012:function(e,t,a){var r;e.exports=r||function(e,t){if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r)try{r=a(55511)}catch(e){}var r,n=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var a;return e.prototype=t,a=new e,e.prototype=null,a}}(),s={},o=s.lib={},c=o.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=o.WordArray=c.extend({init:function(e,a){e=this.words=e||[],t!=a?this.sigBytes=a:this.sigBytes=4*e.length},toString:function(e){return(e||x).stringify(this)},concat:function(e){var t=this.words,a=e.words,r=this.sigBytes,n=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<n;i++){var s=a[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var o=0;o<n;o+=4)t[r+o>>>2]=a[o>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=0xffffffff<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],a=0;a<e;a+=4)t.push(n());return new d.init(t,e)}}),l=s.enc={},x=l.Hex={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r+=2)a[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new d.init(a,t/2)}},f=l.Latin1={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new d.init(a,t)}},u=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},h=o.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a,r=this._data,n=r.words,i=r.sigBytes,s=this.blockSize,o=i/(4*s),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*s,l=e.min(4*c,i);if(c){for(var x=0;x<c;x+=s)this._doProcessBlock(n,x);a=n.splice(0,c),r.sigBytes-=l}return new d.init(a,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new b.HMAC.init(e,a).finalize(t)}}});var b=s.algo={};return s}(Math)},90103:function(e,t,a){var r;r=a(87012),function(e){var t=r.lib,a=t.WordArray,n=t.Hasher,i=r.algo,s=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),o=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=a.create([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),x=a.create([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]),f=i.RIPEMD160=n.extend({_doReset:function(){this._hash=a.create([0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0])},_doProcessBlock:function(e,t){for(var a,r,n,i,f,h,b,p,m,g,v,y,_,w,k,C,E,S,A,T=0;T<16;T++){var O=t+T,R=e[O];e[O]=(R<<8|R>>>24)&0xff00ff|(R<<24|R>>>8)&0xff00ff00}var I=this._hash.words,B=l.words,M=x.words,j=s.words,N=o.words,H=c.words,P=d.words;w=m=I[0],k=g=I[1],C=v=I[2],E=y=I[3],S=_=I[4];for(var T=0;T<80;T+=1){A=m+e[t+j[T]]|0,T<16?A+=(g^v^y)+B[0]:T<32?A+=((a=g)&v|~a&y)+B[1]:T<48?A+=((g|~v)^y)+B[2]:T<64?A+=(r=g,n=v,(r&(i=y)|n&~i)+B[3]):A+=(g^(v|~y))+B[4],A|=0,A=(A=u(A,H[T]))+_|0,m=_,_=y,y=u(v,10),v=g,g=A,A=w+e[t+N[T]]|0,T<16?A+=(k^(C|~E))+M[0]:T<32?A+=(f=k,h=C,(f&(b=E)|h&~b)+M[1]):T<48?A+=((k|~C)^E)+M[2]:T<64?A+=((p=k)&C|~p&E)+M[3]:A+=(k^C^E)+M[4],A|=0,A=(A=u(A,P[T]))+S|0,w=S,S=E,E=u(C,10),C=k,k=A}A=I[1]+v+E|0,I[1]=I[2]+y+S|0,I[2]=I[3]+_+w|0,I[3]=I[4]+m+k|0,I[4]=I[0]+g+C|0,I[0]=A},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=(a<<8|a>>>24)&0xff00ff|(a<<24|a>>>8)&0xff00ff00,e.sigBytes=(t.length+1)*4,this._process();for(var n=this._hash,i=n.words,s=0;s<5;s++){var o=i[s];i[s]=(o<<8|o>>>24)&0xff00ff|(o<<24|o>>>8)&0xff00ff00}return n},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t){return e<<t|e>>>32-t}r.RIPEMD160=n._createHelper(f),r.HmacRIPEMD160=n._createHmacHelper(f)}(Math),e.exports=r.RIPEMD160},90776:function(e,t,a){var r,n,i;r=a(87012),a(66238),n=r.lib.CipherParams,i=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return n.create({ciphertext:t})}},e.exports=r.format.Hex},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95911:function(e,t,a){var r;r=a(87012),function(e){for(var t=r.lib,a=t.WordArray,n=t.Hasher,i=r.algo,s=[],o=0;o<64;o++)s[o]=0x100000000*e.abs(e.sin(o+1))|0;var c=i.MD5=n.extend({_doReset:function(){this._hash=new a.init([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var r=t+a,n=e[r];e[r]=(n<<8|n>>>24)&0xff00ff|(n<<24|n>>>8)&0xff00ff00}var i=this._hash.words,o=e[t+0],c=e[t+1],u=e[t+2],h=e[t+3],b=e[t+4],p=e[t+5],m=e[t+6],g=e[t+7],v=e[t+8],y=e[t+9],_=e[t+10],w=e[t+11],k=e[t+12],C=e[t+13],E=e[t+14],S=e[t+15],A=i[0],T=i[1],O=i[2],R=i[3];A=d(A,T,O,R,o,7,s[0]),R=d(R,A,T,O,c,12,s[1]),O=d(O,R,A,T,u,17,s[2]),T=d(T,O,R,A,h,22,s[3]),A=d(A,T,O,R,b,7,s[4]),R=d(R,A,T,O,p,12,s[5]),O=d(O,R,A,T,m,17,s[6]),T=d(T,O,R,A,g,22,s[7]),A=d(A,T,O,R,v,7,s[8]),R=d(R,A,T,O,y,12,s[9]),O=d(O,R,A,T,_,17,s[10]),T=d(T,O,R,A,w,22,s[11]),A=d(A,T,O,R,k,7,s[12]),R=d(R,A,T,O,C,12,s[13]),O=d(O,R,A,T,E,17,s[14]),T=d(T,O,R,A,S,22,s[15]),A=l(A,T,O,R,c,5,s[16]),R=l(R,A,T,O,m,9,s[17]),O=l(O,R,A,T,w,14,s[18]),T=l(T,O,R,A,o,20,s[19]),A=l(A,T,O,R,p,5,s[20]),R=l(R,A,T,O,_,9,s[21]),O=l(O,R,A,T,S,14,s[22]),T=l(T,O,R,A,b,20,s[23]),A=l(A,T,O,R,y,5,s[24]),R=l(R,A,T,O,E,9,s[25]),O=l(O,R,A,T,h,14,s[26]),T=l(T,O,R,A,v,20,s[27]),A=l(A,T,O,R,C,5,s[28]),R=l(R,A,T,O,u,9,s[29]),O=l(O,R,A,T,g,14,s[30]),T=l(T,O,R,A,k,20,s[31]),A=x(A,T,O,R,p,4,s[32]),R=x(R,A,T,O,v,11,s[33]),O=x(O,R,A,T,w,16,s[34]),T=x(T,O,R,A,E,23,s[35]),A=x(A,T,O,R,c,4,s[36]),R=x(R,A,T,O,b,11,s[37]),O=x(O,R,A,T,g,16,s[38]),T=x(T,O,R,A,_,23,s[39]),A=x(A,T,O,R,C,4,s[40]),R=x(R,A,T,O,o,11,s[41]),O=x(O,R,A,T,h,16,s[42]),T=x(T,O,R,A,m,23,s[43]),A=x(A,T,O,R,y,4,s[44]),R=x(R,A,T,O,k,11,s[45]),O=x(O,R,A,T,S,16,s[46]),T=x(T,O,R,A,u,23,s[47]),A=f(A,T,O,R,o,6,s[48]),R=f(R,A,T,O,g,10,s[49]),O=f(O,R,A,T,E,15,s[50]),T=f(T,O,R,A,p,21,s[51]),A=f(A,T,O,R,k,6,s[52]),R=f(R,A,T,O,h,10,s[53]),O=f(O,R,A,T,_,15,s[54]),T=f(T,O,R,A,c,21,s[55]),A=f(A,T,O,R,v,6,s[56]),R=f(R,A,T,O,S,10,s[57]),O=f(O,R,A,T,m,15,s[58]),T=f(T,O,R,A,C,21,s[59]),A=f(A,T,O,R,b,6,s[60]),R=f(R,A,T,O,w,10,s[61]),O=f(O,R,A,T,u,15,s[62]),T=f(T,O,R,A,y,21,s[63]),i[0]=i[0]+A|0,i[1]=i[1]+T|0,i[2]=i[2]+O|0,i[3]=i[3]+R|0},_doFinalize:function(){var t=this._data,a=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;a[n>>>5]|=128<<24-n%32;var i=e.floor(r/0x100000000);a[(n+64>>>9<<4)+15]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00,a[(n+64>>>9<<4)+14]=(r<<8|r>>>24)&0xff00ff|(r<<24|r>>>8)&0xff00ff00,t.sigBytes=(a.length+1)*4,this._process();for(var s=this._hash,o=s.words,c=0;c<4;c++){var d=o[c];o[c]=(d<<8|d>>>24)&0xff00ff|(d<<24|d>>>8)&0xff00ff00}return s},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function d(e,t,a,r,n,i,s){var o=e+(t&a|~t&r)+n+s;return(o<<i|o>>>32-i)+t}function l(e,t,a,r,n,i,s){var o=e+(t&r|a&~r)+n+s;return(o<<i|o>>>32-i)+t}function x(e,t,a,r,n,i,s){var o=e+(t^a^r)+n+s;return(o<<i|o>>>32-i)+t}function f(e,t,a,r,n,i,s){var o=e+(a^(t|~r))+n+s;return(o<<i|o>>>32-i)+t}r.MD5=n._createHelper(c),r.HmacMD5=n._createHmacHelper(c)}(Math),e.exports=r.MD5},96182:function(e,t,a){var r,n;n=(r=a(87012)).lib.WordArray,r.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var a=e.words,r=e.sigBytes,n=t?this._safe_map:this._map;e.clamp();for(var i=[],s=0;s<r;s+=3)for(var o=(a[s>>>2]>>>24-s%4*8&255)<<16|(a[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|a[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<r;c++)i.push(n.charAt(o>>>6*(3-c)&63));var d=n.charAt(64);if(d)for(;i.length%4;)i.push(d);return i.join("")},parse:function(e,t){void 0===t&&(t=!0);var a=e.length,r=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<r.length;s++)i[r.charCodeAt(s)]=s}var o=r.charAt(64);if(o){var c=e.indexOf(o);-1!==c&&(a=c)}for(var d=e,l=a,x=i,f=[],u=0,h=0;h<l;h++)if(h%4){var b=x[d.charCodeAt(h-1)]<<h%4*2|x[d.charCodeAt(h)]>>>6-h%4*2;f[u>>>2]|=b<<24-u%4*8,u++}return n.create(f,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},e.exports=r.enc.Base64url}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4243,2822,580,2289,6829,2846,4242],()=>a(77025));module.exports=r})();