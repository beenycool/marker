(()=>{var e={};e.id=8910,e.ids=[8910],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},15079:(e,t,i)=>{"use strict";i.d(t,{bq:()=>d,eb:()=>p,gC:()=>h,l6:()=>c,yv:()=>u});var s=i(60687);i(43210);var r=i(22670),n=i(78272),a=i(13964),o=i(3589),l=i(4780);function c({...e}){return(0,s.jsx)(r.bL,{"data-slot":"select",...e})}function u({...e}){return(0,s.jsx)(r.WT,{"data-slot":"select-value",...e})}function d({className:e,size:t="default",children:i,...a}){return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[i,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function h({className:e,children:t,position:i="popper",...n}){return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:i,...n,children:[(0,s.jsx)(g,{}),(0,s.jsx)(r.LM,{className:(0,l.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(f,{})]})})}function p({className:e,children:t,...i}){return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(a.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:t})]})}function g({className:e,...t}){return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(o.A,{className:"size-4"})})}function f({className:e,...t}){return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(n.A,{className:"size-4"})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34729:(e,t,i)=>{"use strict";i.d(t,{T:()=>n});var s=i(60687);i(43210);var r=i(4780);function n({className:e,...t}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}},49242:(e,t,i)=>{Promise.resolve().then(i.bind(i,84903))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64977:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>a.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>c});var s=i(65239),r=i(48088),n=i(88170),a=i.n(n),o=i(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);i.d(t,l);let c={children:["",{children:["mark",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,86138)),"/home/new_username/Documents/projects/aiamrkerv2/worktrees/claude/src/app/mark/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,94431)),"/home/new_username/Documents/projects/aiamrkerv2/worktrees/claude/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(i.bind(i,67393)),"/home/new_username/Documents/projects/aiamrkerv2/worktrees/claude/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/new_username/Documents/projects/aiamrkerv2/worktrees/claude/src/app/mark/page.tsx"],d={require:i,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/mark/page",pathname:"/mark",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},65406:(e,t,i)=>{"use strict";i.d(t,{$:()=>o,s:()=>a});var s=i(33465),r=i(62536),n=i(29604),a=class extends r.k{#e;#t;#i;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#s({type:"continue"})};this.#i=(0,n.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#s({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let i="pending"===this.state.status,s=!this.#i.canStart();try{if(i)t();else{this.#s({type:"pending",variables:e,isPaused:s}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#s({type:"pending",context:t,variables:e,isPaused:s})}let r=await this.#i.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#s({type:"success",data:r}),r}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#s({type:"error",error:t})}}finally{this.#t.runNext(this)}}#s(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),s.jG.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},66501:(e,t,i)=>{"use strict";i.d(t,{v:()=>r});class s{constructor(){this.logLevel=process.env.NEXT_PUBLIC_LOG_LEVEL||"info",this.setupProductionLogging()}static getInstance(){return s.instance||(s.instance=new s),s.instance}shouldLog(e){let t={debug:0,info:1,warn:2,error:3};return t[e]>=t[this.logLevel]}formatMessage(e,t,i){let s=new Date().toISOString(),r=i?` ${JSON.stringify(i)}`:"";return`[${s}] [${e.toUpperCase()}] ${t}${r}`}async setupProductionLogging(){try{let{getEnvVar:e}=await i.e(1029).then(i.bind(i,21029)),t=await e("LOGGING_SERVICE");if("sentry"===t)await e("SENTRY_DSN")&&console.warn("Sentry logging not available in Cloudflare Workers environment");else if("logflare"===t){let t=await e("LOGFLARE_API_KEY"),i=await e("LOGFLARE_SOURCE_ID");t&&i&&console.warn("Winston-Logflare logging not available in Cloudflare Workers environment")}else if("datadog"===t){let t=await e("DATADOG_API_KEY");if(t){let{datadogLogs:e}=await i.e(3384).then(i.bind(i,63384));e.init({clientToken:t,site:"datadoghq.com",forwardErrorsToLogs:!0}),this.productionLogger=e}}}catch(e){console.error("Failed to initialize production logging:",e)}}debug(e,t){this.shouldLog("debug")&&console.debug(this.formatMessage("debug",e,t))}info(e,t){this.shouldLog("info")&&(console.info(this.formatMessage("info",e,t)),this.productionLogger&&(this.productionLogger.captureMessage?this.productionLogger.captureMessage(e,"info",t):this.productionLogger.logger&&this.productionLogger.logger.info(e,t)))}warn(e,t){this.shouldLog("warn")&&(console.warn(this.formatMessage("warn",e,t)),this.productionLogger&&(this.productionLogger.captureMessage?this.productionLogger.captureMessage(e,"warning",t):this.productionLogger.logger&&this.productionLogger.logger.warn(e,t)))}error(e,t,i){if(this.shouldLog("error")){let s=t?{error:t.message||t,stack:t.stack}:{};console.error(this.formatMessage("error",e,{...i,...s})),this.productionLogger&&(this.productionLogger.captureException?this.productionLogger.captureException(t||Error(e),{contexts:{context:i}}):this.productionLogger.logger&&this.productionLogger.logger.error(e,{...i,...s}))}}}let r=s.getInstance()},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,i)=>{"use strict";i.d(t,{J:()=>a});var s=i(60687);i(43210);var r=i(78148),n=i(4780);function a({className:e,...t}){return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},81538:(e,t,i)=>{"use strict";i.d(t,{MarkingForm:()=>s});let s=(0,i(12907).registerClientReference)(function(){throw Error("Attempted to call MarkingForm() from the server but MarkingForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/new_username/Documents/projects/aiamrkerv2/worktrees/claude/src/components/forms/marking-form.tsx","MarkingForm")},81630:e=>{"use strict";e.exports=require("http")},84903:(e,t,i)=>{"use strict";let s;i.d(t,{MarkingForm:()=>li});var r,n=i(60687),a=i(43210),o=i(27605);let l=(e,t,i)=>{if(e&&"reportValidity"in e){let s=(0,o.Jt)(i,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},c=(e,t)=>{for(let i in t.fields){let s=t.fields[i];s&&s.ref&&"reportValidity"in s.ref?l(s.ref,i,e):s&&s.refs&&s.refs.forEach(t=>l(t,i,e))}},u=(e,t)=>{t.shouldUseNativeValidation&&c(e,t);let i={};for(let s in e){let r=(0,o.Jt)(t.fields,s),n=Object.assign(e[s]||{},{ref:r&&r.ref});if(d(t.names||Object.keys(e),s)){let e=Object.assign({},(0,o.Jt)(i,s));(0,o.hZ)(e,"root",n),(0,o.hZ)(i,s,e)}else(0,o.hZ)(i,s,n)}return i},d=(e,t)=>{let i=h(t);return e.some(e=>h(e).match(`^${i}\\.\\d+`))};function h(e){return e.replace(/\]|\[/g,"")}function p(e,t,i){function s(i,s){var r;for(let n in Object.defineProperty(i,"_zod",{value:i._zod??{},enumerable:!1}),(r=i._zod).traits??(r.traits=new Set),i._zod.traits.add(e),t(i,s),a.prototype)n in i||Object.defineProperty(i,n,{value:a.prototype[n].bind(i)});i._zod.constr=a,i._zod.def=s}let r=i?.Parent??Object;class n extends r{}function a(e){var t;let r=i?.Parent?new n:this;for(let i of(s(r,e),(t=r._zod).deferred??(t.deferred=[]),r._zod.deferred))i();return r}return Object.defineProperty(n,"name",{value:e}),Object.defineProperty(a,"init",{value:s}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!i?.Parent&&t instanceof i.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}Object.freeze({status:"aborted"}),Symbol("zod_brand");class g extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let f={};function v(e){return e&&Object.assign(f,e),f}function _(e,t){return"bigint"==typeof t?t.toString():t}let m=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function y(e){return"string"==typeof e?e:e?.message}function b(e,t,i){let s={...e,path:e.path??[]};return e.message||(s.message=y(e.inst?._zod.def?.error?.(e))??y(t?.error?.(e))??y(i.customError?.(e))??y(i.localeError?.(e))??"Invalid input"),delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MAX_VALUE,Number.MAX_VALUE;let x=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,_,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},w=p("$ZodError",x),k=p("$ZodError",x,{Parent:Error}),E=(e,t,i,s)=>{let r=i?Object.assign(i,{async:!1}):{async:!1},n=e._zod.run({value:t,issues:[]},r);if(n instanceof Promise)throw new g;if(n.issues.length){let e=new(s?.Err??k)(n.issues.map(e=>b(e,r,v())));throw m(e,s?.callee),e}return n.value},S=async(e,t,i,s)=>{let r=i?Object.assign(i,{async:!0}):{async:!0},n=e._zod.run({value:t,issues:[]},r);if(n instanceof Promise&&(n=await n),n.issues.length){let e=new(s?.Err??k)(n.issues.map(e=>b(e,r,v())));throw m(e,s?.callee),e}return n.value};function C(e,t){try{var i=e()}catch(e){return t(e)}return i&&i.then?i.then(void 0,t):i}!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let i of e)t[i]=i;return t},e.getValidEnumValues=t=>{let i=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),s={};for(let e of i)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},e.find=(e,t)=>{for(let i of e)if(t(i))return i},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(sD||(sD={})),(sZ||(sZ={})).mergeShapes=(e,t)=>({...e,...t});let j=sD.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),I=e=>{switch(typeof e){case"undefined":return j.undefined;case"string":return j.string;case"number":return Number.isNaN(e)?j.nan:j.number;case"boolean":return j.boolean;case"function":return j.function;case"bigint":return j.bigint;case"symbol":return j.symbol;case"object":if(Array.isArray(e))return j.array;if(null===e)return j.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return j.promise;if("undefined"!=typeof Map&&e instanceof Map)return j.map;if("undefined"!=typeof Set&&e instanceof Set)return j.set;if("undefined"!=typeof Date&&e instanceof Date)return j.date;return j.object;default:return j.unknown}},N=sD.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class T extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},i={_errors:[]},s=e=>{for(let r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(s);else if("invalid_return_type"===r.code)s(r.returnTypeError);else if("invalid_arguments"===r.code)s(r.argumentsError);else if(0===r.path.length)i._errors.push(t(r));else{let e=i,s=0;for(;s<r.path.length;){let i=r.path[s];s===r.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(t(r))):e[i]=e[i]||{_errors:[]},e=e[i],s++}}};return s(this),i}static assert(e){if(!(e instanceof T))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,sD.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},i=[];for(let s of this.issues)if(s.path.length>0){let i=s.path[0];t[i]=t[i]||[],t[i].push(e(s))}else i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}T.create=e=>new T(e);let P=(e,t)=>{let i;switch(e.code){case N.invalid_type:i=e.received===j.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case N.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,sD.jsonStringifyReplacer)}`;break;case N.unrecognized_keys:i=`Unrecognized key(s) in object: ${sD.joinValues(e.keys,", ")}`;break;case N.invalid_union:i="Invalid input";break;case N.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${sD.joinValues(e.options)}`;break;case N.invalid_enum_value:i=`Invalid enum value. Expected ${sD.joinValues(e.options)}, received '${e.received}'`;break;case N.invalid_arguments:i="Invalid function arguments";break;case N.invalid_return_type:i="Invalid function return type";break;case N.invalid_date:i="Invalid date";break;case N.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(i=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?i=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?i=`Invalid input: must end with "${e.validation.endsWith}"`:sD.assertNever(e.validation):i="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case N.too_small:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case N.too_big:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case N.custom:i="Invalid input";break;case N.invalid_intersection_types:i="Intersection results could not be merged";break;case N.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case N.not_finite:i="Number must be finite";break;default:i=t.defaultError,sD.assertNever(e)}return{message:i}};!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(sq||(sq={}));let O=e=>{let{data:t,path:i,errorMaps:s,issueData:r}=e,n=[...i,...r.path||[]],a={...r,path:n};if(void 0!==r.message)return{...r,path:n,message:r.message};let o="";for(let e of s.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...r,path:n,message:o}};function $(e,t){let i=O({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,P,P==P?void 0:P].filter(e=>!!e)});e.common.issues.push(i)}class A{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let i=[];for(let s of t){if("aborted"===s.status)return F;"dirty"===s.status&&e.dirty(),i.push(s.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){let i=[];for(let e of t){let t=await e.key,s=await e.value;i.push({key:t,value:s})}return A.mergeObjectSync(e,i)}static mergeObjectSync(e,t){let i={};for(let s of t){let{key:t,value:r}=s;if("aborted"===t.status||"aborted"===r.status)return F;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==r.value||s.alwaysSet)&&(i[t.value]=r.value)}return{status:e.value,value:i}}}let F=Object.freeze({status:"aborted"}),R=e=>({status:"dirty",value:e}),M=e=>({status:"valid",value:e}),L=e=>"aborted"===e.status,D=e=>"dirty"===e.status,Z=e=>"valid"===e.status,q=e=>"undefined"!=typeof Promise&&e instanceof Promise;class z{constructor(e,t,i,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let B=(e,t)=>{if(Z(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new T(e.common.issues);return this._error=t,this._error}}};function U(e){if(!e)return{};let{errorMap:t,invalid_type_error:i,required_error:s,description:r}=e;if(t&&(i||s))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:r}:{errorMap:(t,r)=>{let{message:n}=e;return"invalid_enum_value"===t.code?{message:n??r.defaultError}:void 0===r.data?{message:n??s??r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:n??i??r.defaultError}},description:r}}class H{get description(){return this._def.description}_getType(e){return I(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:I(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new A,ctx:{common:e.parent.common,data:e.data,parsedType:I(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(q(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){let i={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:I(e)},s=this._parseSync({data:e,path:i.path,parent:i});return B(i,s)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:I(e)};if(!this["~standard"].async)try{let i=this._parseSync({data:e,path:[],parent:t});return Z(i)?{value:i.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>Z(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){let i={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:I(e)},s=this._parse({data:e,path:i.path,parent:i});return B(i,await (q(s)?s:Promise.resolve(s)))}refine(e,t){let i=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,s)=>{let r=e(t),n=()=>s.addIssue({code:N.custom,...i(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then(e=>!!e||(n(),!1)):!!r||(n(),!1)})}refinement(e,t){return this._refinement((i,s)=>!!e(i)||(s.addIssue("function"==typeof t?t(i,s):t),!1))}_refinement(e){return new eL({schema:this,typeName:sz.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eD.create(this,this._def)}nullable(){return eZ.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ex.create(this)}promise(){return eM.create(this,this._def)}or(e){return ek.create([this,e],this._def)}and(e){return eC.create(this,e,this._def)}transform(e){return new eL({...U(this._def),schema:this,typeName:sz.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eq({...U(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:sz.ZodDefault})}brand(){return new eU({typeName:sz.ZodBranded,type:this,...U(this._def)})}catch(e){return new ez({...U(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:sz.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eH.create(this,e)}readonly(){return eV.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let V=/^c[^\s-]{8,}$/i,G=/^[0-9a-z]+$/,W=/^[0-9A-HJKMNP-TV-Z]{26}$/i,K=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Y=/^[a-z0-9_-]{21}$/i,J=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,X=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Q=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,et=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ei=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,es=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,er=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,en=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ea="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eo=RegExp(`^${ea}$`);function el(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let i=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${i}`}class ec extends H{_parse(e){var t,i,r,n;let a;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==j.string){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.string,received:t.parsedType}),F}let o=new A;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&($(a=this._getOrReturnCtx(e,a),{code:N.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&($(a=this._getOrReturnCtx(e,a),{code:N.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,i=e.data.length<l.value;(t||i)&&(a=this._getOrReturnCtx(e,a),t?$(a,{code:N.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):i&&$(a,{code:N.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)Q.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"email",code:N.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)s||(s=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),s.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"emoji",code:N.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)K.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"uuid",code:N.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)Y.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"nanoid",code:N.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)V.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"cuid",code:N.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)G.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"cuid2",code:N.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)W.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"ulid",code:N.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch{$(a=this._getOrReturnCtx(e,a),{validation:"url",code:N.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"regex",code:N.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||($(a=this._getOrReturnCtx(e,a),{code:N.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||($(a=this._getOrReturnCtx(e,a),{code:N.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||($(a=this._getOrReturnCtx(e,a),{code:N.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?(function(e){let t=`${ea}T${el(e)}`,i=[];return i.push(e.local?"Z?":"Z"),e.offset&&i.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${i.join("|")})`,RegExp(`^${t}$`)})(l).test(e.data)||($(a=this._getOrReturnCtx(e,a),{code:N.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?eo.test(e.data)||($(a=this._getOrReturnCtx(e,a),{code:N.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${el(l)}$`).test(e.data)||($(a=this._getOrReturnCtx(e,a),{code:N.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?X.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"duration",code:N.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(t=e.data,!(("v4"===(i=l.version)||!i)&&ee.test(t)||("v6"===i||!i)&&ei.test(t))&&1&&($(a=this._getOrReturnCtx(e,a),{validation:"ip",code:N.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!J.test(e))return!1;try{let[i]=e.split(".");if(!i)return!1;let s=i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+(4-i.length%4)%4,"="),r=JSON.parse(atob(s));if("object"!=typeof r||null===r||"typ"in r&&r?.typ!=="JWT"||!r.alg||t&&r.alg!==t)return!1;return!0}catch{return!1}}(e.data,l.alg)&&($(a=this._getOrReturnCtx(e,a),{validation:"jwt",code:N.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(r=e.data,!(("v4"===(n=l.version)||!n)&&et.test(r)||("v6"===n||!n)&&es.test(r))&&1&&($(a=this._getOrReturnCtx(e,a),{validation:"cidr",code:N.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?er.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"base64",code:N.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?en.test(e.data)||($(a=this._getOrReturnCtx(e,a),{validation:"base64url",code:N.invalid_string,message:l.message}),o.dirty()):sD.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,i){return this.refinement(t=>e.test(t),{validation:t,code:N.invalid_string,...sq.errToObj(i)})}_addCheck(e){return new ec({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...sq.errToObj(e)})}url(e){return this._addCheck({kind:"url",...sq.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...sq.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...sq.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...sq.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...sq.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...sq.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...sq.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...sq.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...sq.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...sq.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...sq.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...sq.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...sq.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...sq.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...sq.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...sq.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...sq.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...sq.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...sq.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...sq.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...sq.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...sq.errToObj(t)})}nonempty(e){return this.min(1,sq.errToObj(e))}trim(){return new ec({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ec({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ec({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ec.create=e=>new ec({checks:[],typeName:sz.ZodString,coerce:e?.coerce??!1,...U(e)});class eu extends H{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==j.number){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.number,received:t.parsedType}),F}let i=new A;for(let s of this._def.checks)"int"===s.kind?sD.isInteger(e.data)||($(t=this._getOrReturnCtx(e,t),{code:N.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&($(t=this._getOrReturnCtx(e,t),{code:N.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&($(t=this._getOrReturnCtx(e,t),{code:N.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):"multipleOf"===s.kind?0!==function(e,t){let i=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,r=i>s?i:s;return Number.parseInt(e.toFixed(r).replace(".",""))%Number.parseInt(t.toFixed(r).replace(".",""))/10**r}(e.data,s.value)&&($(t=this._getOrReturnCtx(e,t),{code:N.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):"finite"===s.kind?Number.isFinite(e.data)||($(t=this._getOrReturnCtx(e,t),{code:N.not_finite,message:s.message}),i.dirty()):sD.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,sq.toString(t))}gt(e,t){return this.setLimit("min",e,!1,sq.toString(t))}lte(e,t){return this.setLimit("max",e,!0,sq.toString(t))}lt(e,t){return this.setLimit("max",e,!1,sq.toString(t))}setLimit(e,t,i,s){return new eu({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:sq.toString(s)}]})}_addCheck(e){return new eu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:sq.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:sq.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:sq.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:sq.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:sq.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:sq.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:sq.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:sq.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:sq.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&sD.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let i of this._def.checks)if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;else"min"===i.kind?(null===t||i.value>t)&&(t=i.value):"max"===i.kind&&(null===e||i.value<e)&&(e=i.value);return Number.isFinite(t)&&Number.isFinite(e)}}eu.create=e=>new eu({checks:[],typeName:sz.ZodNumber,coerce:e?.coerce||!1,...U(e)});class ed extends H{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==j.bigint)return this._getInvalidInput(e);let i=new A;for(let s of this._def.checks)"min"===s.kind?(s.inclusive?e.data<s.value:e.data<=s.value)&&($(t=this._getOrReturnCtx(e,t),{code:N.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):"max"===s.kind?(s.inclusive?e.data>s.value:e.data>=s.value)&&($(t=this._getOrReturnCtx(e,t),{code:N.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&($(t=this._getOrReturnCtx(e,t),{code:N.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):sD.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.bigint,received:t.parsedType}),F}gte(e,t){return this.setLimit("min",e,!0,sq.toString(t))}gt(e,t){return this.setLimit("min",e,!1,sq.toString(t))}lte(e,t){return this.setLimit("max",e,!0,sq.toString(t))}lt(e,t){return this.setLimit("max",e,!1,sq.toString(t))}setLimit(e,t,i,s){return new ed({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:sq.toString(s)}]})}_addCheck(e){return new ed({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:sq.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:sq.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:sq.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:sq.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:sq.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ed.create=e=>new ed({checks:[],typeName:sz.ZodBigInt,coerce:e?.coerce??!1,...U(e)});class eh extends H{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==j.boolean){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.boolean,received:t.parsedType}),F}return M(e.data)}}eh.create=e=>new eh({typeName:sz.ZodBoolean,coerce:e?.coerce||!1,...U(e)});class ep extends H{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==j.date){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.date,received:t.parsedType}),F}if(Number.isNaN(e.data.getTime()))return $(this._getOrReturnCtx(e),{code:N.invalid_date}),F;let i=new A;for(let s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&($(t=this._getOrReturnCtx(e,t),{code:N.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):"max"===s.kind?e.data.getTime()>s.value&&($(t=this._getOrReturnCtx(e,t),{code:N.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):sD.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ep({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:sq.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:sq.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ep.create=e=>new ep({checks:[],coerce:e?.coerce||!1,typeName:sz.ZodDate,...U(e)});class eg extends H{_parse(e){if(this._getType(e)!==j.symbol){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.symbol,received:t.parsedType}),F}return M(e.data)}}eg.create=e=>new eg({typeName:sz.ZodSymbol,...U(e)});class ef extends H{_parse(e){if(this._getType(e)!==j.undefined){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.undefined,received:t.parsedType}),F}return M(e.data)}}ef.create=e=>new ef({typeName:sz.ZodUndefined,...U(e)});class ev extends H{_parse(e){if(this._getType(e)!==j.null){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.null,received:t.parsedType}),F}return M(e.data)}}ev.create=e=>new ev({typeName:sz.ZodNull,...U(e)});class e_ extends H{constructor(){super(...arguments),this._any=!0}_parse(e){return M(e.data)}}e_.create=e=>new e_({typeName:sz.ZodAny,...U(e)});class em extends H{constructor(){super(...arguments),this._unknown=!0}_parse(e){return M(e.data)}}em.create=e=>new em({typeName:sz.ZodUnknown,...U(e)});class ey extends H{_parse(e){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.never,received:t.parsedType}),F}}ey.create=e=>new ey({typeName:sz.ZodNever,...U(e)});class eb extends H{_parse(e){if(this._getType(e)!==j.undefined){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.void,received:t.parsedType}),F}return M(e.data)}}eb.create=e=>new eb({typeName:sz.ZodVoid,...U(e)});class ex extends H{_parse(e){let{ctx:t,status:i}=this._processInputParams(e),s=this._def;if(t.parsedType!==j.array)return $(t,{code:N.invalid_type,expected:j.array,received:t.parsedType}),F;if(null!==s.exactLength){let e=t.data.length>s.exactLength.value,r=t.data.length<s.exactLength.value;(e||r)&&($(t,{code:e?N.too_big:N.too_small,minimum:r?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&($(t,{code:N.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&($(t,{code:N.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((e,i)=>s.type._parseAsync(new z(t,e,t.path,i)))).then(e=>A.mergeArray(i,e));let r=[...t.data].map((e,i)=>s.type._parseSync(new z(t,e,t.path,i)));return A.mergeArray(i,r)}get element(){return this._def.type}min(e,t){return new ex({...this._def,minLength:{value:e,message:sq.toString(t)}})}max(e,t){return new ex({...this._def,maxLength:{value:e,message:sq.toString(t)}})}length(e,t){return new ex({...this._def,exactLength:{value:e,message:sq.toString(t)}})}nonempty(e){return this.min(1,e)}}ex.create=(e,t)=>new ex({type:e,minLength:null,maxLength:null,exactLength:null,typeName:sz.ZodArray,...U(t)});class ew extends H{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=sD.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==j.object){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.object,received:t.parsedType}),F}let{status:t,ctx:i}=this._processInputParams(e),{shape:s,keys:r}=this._getCached(),n=[];if(!(this._def.catchall instanceof ey&&"strip"===this._def.unknownKeys))for(let e in i.data)r.includes(e)||n.push(e);let a=[];for(let e of r){let t=s[e],r=i.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new z(i,r,i.path,e)),alwaysSet:e in i.data})}if(this._def.catchall instanceof ey){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of n)a.push({key:{status:"valid",value:e},value:{status:"valid",value:i.data[e]}});else if("strict"===e)n.length>0&&($(i,{code:N.unrecognized_keys,keys:n}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of n){let s=i.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new z(i,s,i.path,t)),alwaysSet:t in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let i=await t.key,s=await t.value;e.push({key:i,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>A.mergeObjectSync(t,e)):A.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return sq.errToObj,new ew({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,i)=>{let s=this._def.errorMap?.(t,i).message??i.defaultError;return"unrecognized_keys"===t.code?{message:sq.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new ew({...this._def,unknownKeys:"strip"})}passthrough(){return new ew({...this._def,unknownKeys:"passthrough"})}extend(e){return new ew({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ew({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:sz.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ew({...this._def,catchall:e})}pick(e){let t={};for(let i of sD.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new ew({...this._def,shape:()=>t})}omit(e){let t={};for(let i of sD.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new ew({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ew){let i={};for(let s in t.shape){let r=t.shape[s];i[s]=eD.create(e(r))}return new ew({...t._def,shape:()=>i})}if(t instanceof ex)return new ex({...t._def,type:e(t.element)});if(t instanceof eD)return eD.create(e(t.unwrap()));if(t instanceof eZ)return eZ.create(e(t.unwrap()));if(t instanceof ej)return ej.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let i of sD.objectKeys(this.shape)){let s=this.shape[i];e&&!e[i]?t[i]=s:t[i]=s.optional()}return new ew({...this._def,shape:()=>t})}required(e){let t={};for(let i of sD.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let e=this.shape[i];for(;e instanceof eD;)e=e._def.innerType;t[i]=e}return new ew({...this._def,shape:()=>t})}keyof(){return eA(sD.objectKeys(this.shape))}}ew.create=(e,t)=>new ew({shape:()=>e,unknownKeys:"strip",catchall:ey.create(),typeName:sz.ZodObject,...U(t)}),ew.strictCreate=(e,t)=>new ew({shape:()=>e,unknownKeys:"strict",catchall:ey.create(),typeName:sz.ZodObject,...U(t)}),ew.lazycreate=(e,t)=>new ew({shape:e,unknownKeys:"strip",catchall:ey.create(),typeName:sz.ZodObject,...U(t)});class ek extends H{_parse(e){let{ctx:t}=this._processInputParams(e),i=this._def.options;if(t.common.async)return Promise.all(i.map(async e=>{let i={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let i of e)if("dirty"===i.result.status)return t.common.issues.push(...i.ctx.common.issues),i.result;let i=e.map(e=>new T(e.ctx.common.issues));return $(t,{code:N.invalid_union,unionErrors:i}),F});{let e,s=[];for(let r of i){let i={...t,common:{...t.common,issues:[]},parent:null},n=r._parseSync({data:t.data,path:t.path,parent:i});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:i}),i.common.issues.length&&s.push(i.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let r=s.map(e=>new T(e));return $(t,{code:N.invalid_union,unionErrors:r}),F}}get options(){return this._def.options}}ek.create=(e,t)=>new ek({options:e,typeName:sz.ZodUnion,...U(t)});let eE=e=>{if(e instanceof eO)return eE(e.schema);if(e instanceof eL)return eE(e.innerType());if(e instanceof e$)return[e.value];if(e instanceof eF)return e.options;if(e instanceof eR)return sD.objectValues(e.enum);else if(e instanceof eq)return eE(e._def.innerType);else if(e instanceof ef)return[void 0];else if(e instanceof ev)return[null];else if(e instanceof eD)return[void 0,...eE(e.unwrap())];else if(e instanceof eZ)return[null,...eE(e.unwrap())];else if(e instanceof eU)return eE(e.unwrap());else if(e instanceof eV)return eE(e.unwrap());else if(e instanceof ez)return eE(e._def.innerType);else return[]};class eS extends H{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.object)return $(t,{code:N.invalid_type,expected:j.object,received:t.parsedType}),F;let i=this.discriminator,s=t.data[i],r=this.optionsMap.get(s);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):($(t,{code:N.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),F)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){let s=new Map;for(let i of t){let t=eE(i.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let r of t){if(s.has(r))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);s.set(r,i)}}return new eS({typeName:sz.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...U(i)})}}class eC extends H{_parse(e){let{status:t,ctx:i}=this._processInputParams(e),s=(e,s)=>{if(L(e)||L(s))return F;let r=function e(t,i){let s=I(t),r=I(i);if(t===i)return{valid:!0,data:t};if(s===j.object&&r===j.object){let s=sD.objectKeys(i),r=sD.objectKeys(t).filter(e=>-1!==s.indexOf(e)),n={...t,...i};for(let s of r){let r=e(t[s],i[s]);if(!r.valid)return{valid:!1};n[s]=r.data}return{valid:!0,data:n}}if(s===j.array&&r===j.array){if(t.length!==i.length)return{valid:!1};let s=[];for(let r=0;r<t.length;r++){let n=e(t[r],i[r]);if(!n.valid)return{valid:!1};s.push(n.data)}return{valid:!0,data:s}}if(s===j.date&&r===j.date&&+t==+i)return{valid:!0,data:t};return{valid:!1}}(e.value,s.value);return r.valid?((D(e)||D(s))&&t.dirty(),{status:t.value,value:r.data}):($(i,{code:N.invalid_intersection_types}),F)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([e,t])=>s(e,t)):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}eC.create=(e,t,i)=>new eC({left:e,right:t,typeName:sz.ZodIntersection,...U(i)});class ej extends H{_parse(e){let{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==j.array)return $(i,{code:N.invalid_type,expected:j.array,received:i.parsedType}),F;if(i.data.length<this._def.items.length)return $(i,{code:N.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F;!this._def.rest&&i.data.length>this._def.items.length&&($(i,{code:N.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let s=[...i.data].map((e,t)=>{let s=this._def.items[t]||this._def.rest;return s?s._parse(new z(i,e,i.path,t)):null}).filter(e=>!!e);return i.common.async?Promise.all(s).then(e=>A.mergeArray(t,e)):A.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new ej({...this._def,rest:e})}}ej.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ej({items:e,typeName:sz.ZodTuple,rest:null,...U(t)})};class eI extends H{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==j.object)return $(i,{code:N.invalid_type,expected:j.object,received:i.parsedType}),F;let s=[],r=this._def.keyType,n=this._def.valueType;for(let e in i.data)s.push({key:r._parse(new z(i,e,i.path,e)),value:n._parse(new z(i,i.data[e],i.path,e)),alwaysSet:e in i.data});return i.common.async?A.mergeObjectAsync(t,s):A.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,i){return new eI(t instanceof H?{keyType:e,valueType:t,typeName:sz.ZodRecord,...U(i)}:{keyType:ec.create(),valueType:e,typeName:sz.ZodRecord,...U(t)})}}class eN extends H{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==j.map)return $(i,{code:N.invalid_type,expected:j.map,received:i.parsedType}),F;let s=this._def.keyType,r=this._def.valueType,n=[...i.data.entries()].map(([e,t],n)=>({key:s._parse(new z(i,e,i.path,[n,"key"])),value:r._parse(new z(i,t,i.path,[n,"value"]))}));if(i.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let i of n){let s=await i.key,r=await i.value;if("aborted"===s.status||"aborted"===r.status)return F;("dirty"===s.status||"dirty"===r.status)&&t.dirty(),e.set(s.value,r.value)}return{status:t.value,value:e}})}{let e=new Map;for(let i of n){let s=i.key,r=i.value;if("aborted"===s.status||"aborted"===r.status)return F;("dirty"===s.status||"dirty"===r.status)&&t.dirty(),e.set(s.value,r.value)}return{status:t.value,value:e}}}}eN.create=(e,t,i)=>new eN({valueType:t,keyType:e,typeName:sz.ZodMap,...U(i)});class eT extends H{_parse(e){let{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==j.set)return $(i,{code:N.invalid_type,expected:j.set,received:i.parsedType}),F;let s=this._def;null!==s.minSize&&i.data.size<s.minSize.value&&($(i,{code:N.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&i.data.size>s.maxSize.value&&($(i,{code:N.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let r=this._def.valueType;function n(e){let i=new Set;for(let s of e){if("aborted"===s.status)return F;"dirty"===s.status&&t.dirty(),i.add(s.value)}return{status:t.value,value:i}}let a=[...i.data.values()].map((e,t)=>r._parse(new z(i,e,i.path,t)));return i.common.async?Promise.all(a).then(e=>n(e)):n(a)}min(e,t){return new eT({...this._def,minSize:{value:e,message:sq.toString(t)}})}max(e,t){return new eT({...this._def,maxSize:{value:e,message:sq.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eT.create=(e,t)=>new eT({valueType:e,minSize:null,maxSize:null,typeName:sz.ZodSet,...U(t)});class eP extends H{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==j.function)return $(t,{code:N.invalid_type,expected:j.function,received:t.parsedType}),F;function i(e,i){return O({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,P,P].filter(e=>!!e),issueData:{code:N.invalid_arguments,argumentsError:i}})}function s(e,i){return O({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,P,P].filter(e=>!!e),issueData:{code:N.invalid_return_type,returnTypeError:i}})}let r={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof eM){let e=this;return M(async function(...t){let a=new T([]),o=await e._def.args.parseAsync(t,r).catch(e=>{throw a.addIssue(i(t,e)),a}),l=await Reflect.apply(n,this,o);return await e._def.returns._def.type.parseAsync(l,r).catch(e=>{throw a.addIssue(s(l,e)),a})})}{let e=this;return M(function(...t){let a=e._def.args.safeParse(t,r);if(!a.success)throw new T([i(t,a.error)]);let o=Reflect.apply(n,this,a.data),l=e._def.returns.safeParse(o,r);if(!l.success)throw new T([s(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eP({...this._def,args:ej.create(e).rest(em.create())})}returns(e){return new eP({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new eP({args:e||ej.create([]).rest(em.create()),returns:t||em.create(),typeName:sz.ZodFunction,...U(i)})}}class eO extends H{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eO.create=(e,t)=>new eO({getter:e,typeName:sz.ZodLazy,...U(t)});class e$ extends H{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return $(t,{received:t.data,code:N.invalid_literal,expected:this._def.value}),F}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eA(e,t){return new eF({values:e,typeName:sz.ZodEnum,...U(t)})}e$.create=(e,t)=>new e$({value:e,typeName:sz.ZodLiteral,...U(t)});class eF extends H{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),i=this._def.values;return $(t,{expected:sD.joinValues(i),received:t.parsedType,code:N.invalid_type}),F}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),i=this._def.values;return $(t,{received:t.data,code:N.invalid_enum_value,options:i}),F}return M(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eF.create(e,{...this._def,...t})}exclude(e,t=this._def){return eF.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}eF.create=eA;class eR extends H{_parse(e){let t=sD.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==j.string&&i.parsedType!==j.number){let e=sD.objectValues(t);return $(i,{expected:sD.joinValues(e),received:i.parsedType,code:N.invalid_type}),F}if(this._cache||(this._cache=new Set(sD.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=sD.objectValues(t);return $(i,{received:i.data,code:N.invalid_enum_value,options:e}),F}return M(e.data)}get enum(){return this._def.values}}eR.create=(e,t)=>new eR({values:e,typeName:sz.ZodNativeEnum,...U(t)});class eM extends H{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==j.promise&&!1===t.common.async?($(t,{code:N.invalid_type,expected:j.promise,received:t.parsedType}),F):M((t.parsedType===j.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eM.create=(e,t)=>new eM({type:e,typeName:sz.ZodPromise,...U(t)});class eL extends H{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===sz.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:i}=this._processInputParams(e),s=this._def.effect||null,r={addIssue:e=>{$(i,e),e.fatal?t.abort():t.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===s.type){let e=s.transform(i.data,r);if(i.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return F;let s=await this._def.schema._parseAsync({data:e,path:i.path,parent:i});return"aborted"===s.status?F:"dirty"===s.status||"dirty"===t.value?R(s.value):s});{if("aborted"===t.value)return F;let s=this._def.schema._parseSync({data:e,path:i.path,parent:i});return"aborted"===s.status?F:"dirty"===s.status||"dirty"===t.value?R(s.value):s}}if("refinement"===s.type){let e=e=>{let t=s.refinement(e,r);if(i.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==i.common.async)return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(i=>"aborted"===i.status?F:("dirty"===i.status&&t.dirty(),e(i.value).then(()=>({status:t.value,value:i.value}))));{let s=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===s.status?F:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}}if("transform"===s.type)if(!1!==i.common.async)return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(e=>Z(e)?Promise.resolve(s.transform(e.value,r)).then(e=>({status:t.value,value:e})):F);else{let e=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Z(e))return F;let n=s.transform(e.value,r);if(n instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}sD.assertNever(s)}}eL.create=(e,t,i)=>new eL({schema:e,typeName:sz.ZodEffects,effect:t,...U(i)}),eL.createWithPreprocess=(e,t,i)=>new eL({schema:t,effect:{type:"preprocess",transform:e},typeName:sz.ZodEffects,...U(i)});class eD extends H{_parse(e){return this._getType(e)===j.undefined?M(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eD.create=(e,t)=>new eD({innerType:e,typeName:sz.ZodOptional,...U(t)});class eZ extends H{_parse(e){return this._getType(e)===j.null?M(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eZ.create=(e,t)=>new eZ({innerType:e,typeName:sz.ZodNullable,...U(t)});class eq extends H{_parse(e){let{ctx:t}=this._processInputParams(e),i=t.data;return t.parsedType===j.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eq.create=(e,t)=>new eq({innerType:e,typeName:sz.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...U(t)});class ez extends H{_parse(e){let{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return q(s)?s.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new T(i.common.issues)},input:i.data})})):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new T(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}ez.create=(e,t)=>new ez({innerType:e,typeName:sz.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...U(t)});class eB extends H{_parse(e){if(this._getType(e)!==j.nan){let t=this._getOrReturnCtx(e);return $(t,{code:N.invalid_type,expected:j.nan,received:t.parsedType}),F}return{status:"valid",value:e.data}}}eB.create=e=>new eB({typeName:sz.ZodNaN,...U(e)}),Symbol("zod_brand");class eU extends H{_parse(e){let{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class eH extends H{_parse(e){let{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?F:"dirty"===e.status?(t.dirty(),R(e.value)):this._def.out._parseAsync({data:e.value,path:i.path,parent:i})})();{let e=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?F:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:i.path,parent:i})}}static create(e,t){return new eH({in:e,out:t,typeName:sz.ZodPipeline})}}class eV extends H{_parse(e){let t=this._def.innerType._parse(e),i=e=>(Z(e)&&(e.value=Object.freeze(e.value)),e);return q(t)?t.then(e=>i(e)):i(t)}unwrap(){return this._def.innerType}}eV.create=(e,t)=>new eV({innerType:e,typeName:sz.ZodReadonly,...U(t)}),ew.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(sz||(sz={}));let eG=ec.create,eW=eu.create;eB.create,ed.create,eh.create,ep.create,eg.create,ef.create,ev.create,e_.create,em.create,ey.create,eb.create,ex.create;let eK=ew.create;ew.strictCreate,ek.create,eS.create,eC.create,ej.create,eI.create,eN.create,eT.create,eP.create,eO.create,e$.create,eF.create,eR.create,eM.create,eL.create,eD.create,eZ.create,eL.createWithPreprocess,eH.create;var eY=i(29523),eJ=i(44493),eX=i(8730),eQ=i(4780),e0=i(80013);let e1=o.Op,e2=a.createContext({}),e3=({...e})=>(0,n.jsx)(e2.Provider,{value:{name:e.name},children:(0,n.jsx)(o.xI,{...e})}),e4=()=>{let e=a.useContext(e2),t=a.useContext(e5),{getFieldState:i}=(0,o.xW)(),s=(0,o.lN)({name:e.name}),r=i(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...r}},e5=a.createContext({});function e6({className:e,...t}){let i=a.useId();return(0,n.jsx)(e5.Provider,{value:{id:i},children:(0,n.jsx)("div",{"data-slot":"form-item",className:(0,eQ.cn)("grid gap-2",e),...t})})}function e9({className:e,...t}){let{error:i,formItemId:s}=e4();return(0,n.jsx)(e0.J,{"data-slot":"form-label","data-error":!!i,className:(0,eQ.cn)("data-[error=true]:text-destructive",e),htmlFor:s,...t})}function e8({...e}){let{error:t,formItemId:i,formDescriptionId:s,formMessageId:r}=e4();return(0,n.jsx)(eX.DX,{"data-slot":"form-control",id:i,"aria-describedby":t?`${s} ${r}`:`${s}`,"aria-invalid":!!t,...e})}function e7({className:e,...t}){let{formDescriptionId:i}=e4();return(0,n.jsx)("p",{"data-slot":"form-description",id:i,className:(0,eQ.cn)("text-muted-foreground text-sm",e),...t})}function te({className:e,...t}){let{error:i,formMessageId:s}=e4(),r=i?String(i?.message??""):t.children;return r?(0,n.jsx)("p",{"data-slot":"form-message",id:s,className:(0,eQ.cn)("text-destructive text-sm",e),...t,children:r}):null}var tt=i(89667),ti=i(15079),ts=i(34729),tr=i(32775),tn=i(62381),ta=i(65406),to=i(33465),tl=i(35536),tc=i(31212),tu=class extends tl.Q{#r;#n=void 0;#a;#o;constructor(e,t){super(),this.#r=e,this.setOptions(t),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#r.defaultMutationOptions(e),(0,tc.f8)(this.options,t)||this.#r.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,tc.EN)(t.mutationKey)!==(0,tc.EN)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(e){this.#l(),this.#c(e)}getCurrentResult(){return this.#n}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#l(),this.#c()}mutate(e,t){return this.#o=t,this.#a?.removeObserver(this),this.#a=this.#r.getMutationCache().build(this.#r,this.options),this.#a.addObserver(this),this.#a.execute(e)}#l(){let e=this.#a?.state??(0,ta.$)();this.#n={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#c(e){to.jG.batch(()=>{if(this.#o&&this.hasListeners()){let t=this.#n.variables,i=this.#n.context;e?.type==="success"?(this.#o.onSuccess?.(e.data,t,i),this.#o.onSettled?.(e.data,null,t,i)):e?.type==="error"&&(this.#o.onError?.(e.error,t,i),this.#o.onSettled?.(void 0,e.error,t,i))}this.listeners.forEach(e=>{e(this.#n)})})}},td=i(66501),th=i(96834),tp=i(23562),tg=i(5336),tf=i(93613),tv=i(35071),t_=i(86561),tm=i(28947),ty=i(15807),tb=i(78200),tx=i(70615),tw=i(2117),tk=i(81620),tE=i(51743);function tS({feedback:e}){var t;let{feedback:i}=e,s=i.score/20*100,r=e=>{navigator.clipboard.writeText(e)};return(0,n.jsxs)(tE.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[(0,n.jsxs)(eJ.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,n.jsxs)(eJ.aR,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(eJ.ZB,{className:"text-white flex items-center gap-2",children:[(0,n.jsx)(t_.A,{className:"h-5 w-5"}),"Your Results"]}),(0,n.jsxs)(th.E,{className:`${(e=>{switch(e){case"9":return"bg-green-500";case"8":return"bg-green-400";case"7":return"bg-blue-500";case"6":return"bg-cyan-500";case"5":return"bg-yellow-500";case"4":return"bg-orange-400";case"3":return"bg-orange-500";case"2":return"bg-red-400";case"1":return"bg-red-500";default:return"bg-gray-500"}})(i.grade)} text-white`,children:[["9","8"].includes(t=i.grade)?(0,n.jsx)(tg.A,{className:"h-4 w-4"}):["7","6","5","4"].includes(t)?(0,n.jsx)(tf.A,{className:"h-4 w-4"}):(0,n.jsx)(tv.A,{className:"h-4 w-4"}),(0,n.jsxs)("span",{className:"ml-1",children:["Grade ",i.grade]})]})]}),(0,n.jsxs)(eJ.BT,{className:"text-gray-300",children:["Marked by ",i.modelUsed," •"," ",new Date(e.submission.createdAt).toLocaleDateString(),i.confidenceScore&&(0,n.jsxs)("span",{className:"ml-2",children:["• Confidence: ",i.confidenceScore,"/10"]})]})]}),(0,n.jsx)(eJ.Wu,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-white font-medium",children:"Score"}),(0,n.jsxs)("span",{className:"text-2xl font-bold text-white",children:[i.score,"/20"]})]}),i.confidenceScore&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Confidence"}),(0,n.jsxs)("span",{className:"text-gray-400",children:[i.confidenceScore,"/10"]})]}),(0,n.jsx)(tp.k,{value:10*i.confidenceScore,className:"h-2"})]}),(0,n.jsx)(tp.k,{value:s,className:"h-2"}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Performance"}),(0,n.jsxs)("span",{className:"text-gray-400",children:[s.toFixed(1),"%"]})]})]})})]}),(0,n.jsxs)(eJ.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,n.jsxs)(eJ.aR,{children:[(0,n.jsxs)(eJ.ZB,{className:"text-white flex items-center gap-2",children:[(0,n.jsx)(tm.A,{className:"h-5 w-5"}),"Assessment Objectives Met"]}),(0,n.jsx)(eJ.BT,{className:"text-gray-300",children:"Key skills and knowledge demonstrated in your answer"})]}),(0,n.jsx)(eJ.Wu,{children:(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:i.aosMet.length>0?i.aosMet.map((e,t)=>(0,n.jsx)(tE.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},children:(0,n.jsxs)(th.E,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:[(0,n.jsx)(tg.A,{className:"h-3 w-3 mr-1"}),e]})},e)):(0,n.jsx)("p",{className:"text-gray-400",children:"No assessment objectives identified"})})})]}),(0,n.jsxs)(eJ.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,n.jsxs)(eJ.aR,{children:[(0,n.jsxs)(eJ.ZB,{className:"text-white flex items-center gap-2",children:[(0,n.jsx)(ty.A,{className:"h-5 w-5"}),"How to Improve"]}),(0,n.jsx)(eJ.BT,{className:"text-gray-300",children:"Specific suggestions to enhance your performance"})]}),(0,n.jsx)(eJ.Wu,{children:(0,n.jsx)("div",{className:"space-y-3",children:i.improvementSuggestions.length>0?i.improvementSuggestions.map((e,t)=>(0,n.jsxs)(tE.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-start gap-3 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold flex-shrink-0",children:t+1}),(0,n.jsx)("p",{className:"text-gray-300 text-sm",children:e})]},t)):(0,n.jsx)("p",{className:"text-gray-400",children:"No specific suggestions provided"})})})]}),(0,n.jsxs)(eJ.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,n.jsxs)(eJ.aR,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(eJ.ZB,{className:"text-white flex items-center gap-2",children:[(0,n.jsx)(tb.A,{className:"h-5 w-5"}),"Detailed Feedback"]}),(0,n.jsxs)(eY.$,{variant:"outline",size:"sm",onClick:()=>r(i.aiResponse),className:"border-white/20 text-white hover:bg-white/10",children:[(0,n.jsx)(tx.A,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),(0,n.jsx)(eJ.BT,{className:"text-gray-300",children:"Comprehensive analysis of your work"})]}),(0,n.jsx)(eJ.Wu,{children:(0,n.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,n.jsx)("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:(0,n.jsx)("pre",{className:"whitespace-pre-wrap text-gray-300 text-sm leading-relaxed",children:i.aiResponse})})})})]}),(0,n.jsx)(eJ.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:(0,n.jsx)(eJ.Wu,{className:"pt-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,n.jsxs)(eY.$,{className:"bg-blue-600 text-white",children:[(0,n.jsx)(tw.A,{className:"h-4 w-4 mr-2"}),"Submit Another"]}),(0,n.jsxs)(eY.$,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[(0,n.jsx)(tk.A,{className:"h-4 w-4 mr-2"}),"Share Results"]})]})})})]})}var tC=i(99858),tj=i(29867),tI=i(41862),tN=i(82080),tT=i(11860),tP="undefined"!=typeof window?window:void 0,tO="undefined"!=typeof globalThis?globalThis:tP,t$=Array.prototype,tA=t$.forEach,tF=t$.indexOf,tR=null==tO?void 0:tO.navigator,tM=null==tO?void 0:tO.document,tL=null==tO?void 0:tO.location,tD=null==tO?void 0:tO.fetch,tZ=null!=tO&&tO.XMLHttpRequest&&"withCredentials"in new tO.XMLHttpRequest?tO.XMLHttpRequest:void 0,tq=null==tO?void 0:tO.AbortController,tz=null==tR?void 0:tR.userAgent,tB=null!=tP?tP:{},tU={DEBUG:!1,LIB_VERSION:"1.257.1"},tH="$copy_autocapture",tV=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],tG=function(e){return e.GZipJS="gzip-js",e.Base64="base64",e}({}),tW=["fatal","error","warning","log","info","debug"];function tK(e,t){return -1!==e.indexOf(t)}var tY=function(e){return e.trim()},tJ=function(e){return e.replace(/^\$/,"")},tX=Array.isArray,tQ=Object.prototype,t0=tQ.hasOwnProperty,t1=tQ.toString,t2=tX||function(e){return"[object Array]"===t1.call(e)},t3=e=>"function"==typeof e,t4=e=>e===Object(e)&&!t2(e),t5=e=>{if(t4(e)){for(var t in e)if(t0.call(e,t))return!1;return!0}return!1},t6=e=>void 0===e,t9=e=>"[object String]"==t1.call(e),t8=e=>t9(e)&&0===e.trim().length,t7=e=>null===e,ie=e=>t6(e)||t7(e),it=e=>"[object Number]"==t1.call(e),ii=e=>"[object Boolean]"===t1.call(e),is=e=>e instanceof FormData,ir=e=>tK(tV,e),ia=e=>{var t={t:function(t){if(tP&&(tU.DEBUG||tB.POSTHOG_DEBUG)&&!t6(tP.console)&&tP.console){for(var i=("__rrweb_original__"in tP.console[t])?tP.console[t].__rrweb_original__:tP.console[t],s=arguments.length,r=Array(s>1?s-1:0),n=1;n<s;n++)r[n-1]=arguments[n];i(e,...r)}},info:function(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];t.t("log",...i)},warn:function(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];t.t("warn",...i)},error:function(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];t.t("error",...i)},critical:function(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];console.error(e,...i)},uninitializedWarning:e=>{t.error("You must initialize PostHog before calling "+e)},createLogger:t=>ia(e+" "+t)};return t},io=ia("[PostHog.js]"),il=io.createLogger,ic=il("[ExternalScriptsLoader]"),iu=(e,t,i)=>{if(e.config.disable_external_dependency_loading)return ic.warn(t+" was requested but loading of external scripts is disabled."),i("Loading of external scripts is disabled");var s=null==tM?void 0:tM.querySelectorAll("script");if(s){for(var r=0;r<s.length;r++)if(s[r].src===t)return i()}var n=()=>{if(!tM)return i("document not found");var s=tM.createElement("script");if(s.type="text/javascript",s.crossOrigin="anonymous",s.src=t,s.onload=e=>i(void 0,e),s.onerror=e=>i(e),e.config.prepare_external_dependency_script&&(s=e.config.prepare_external_dependency_script(s)),!s)return i("prepare_external_dependency_script returned null");var r,n=tM.querySelectorAll("body > script");n.length>0?null==(r=n[0].parentNode)||r.insertBefore(s,n[0]):tM.body.appendChild(s)};null!=tM&&tM.body?n():null==tM||tM.addEventListener("DOMContentLoaded",n)};function id(){return(id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(null,arguments)}function ih(e,t){if(null==e)return{};var i={};for(var s in e)if(({}).hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;i[s]=e[s]}return i}tB.__PosthogExtensions__=tB.__PosthogExtensions__||{},tB.__PosthogExtensions__.loadExternalDependency=(e,t,i)=>{var s="/static/"+t+".js?v="+e.version;"remote-config"===t&&(s="/array/"+e.config.token+"/config.js"),"toolbar"===t&&(s=s+"&t="+3e5*Math.floor(Date.now()/3e5));var r=e.requestRouter.endpointFor("assets",s);iu(e,r,i)},tB.__PosthogExtensions__.loadSiteApp=(e,t,i)=>{var s=e.requestRouter.endpointFor("api",t);iu(e,s,i)};var ip={};function ig(e,t,i){if(t2(e)){if(tA&&e.forEach===tA)e.forEach(t,i);else if("length"in e&&e.length===+e.length){for(var s=0,r=e.length;s<r;s++)if(s in e&&t.call(i,e[s],s)===ip)return}}}function iv(e,t,i){if(!ie(e)){if(t2(e))return ig(e,t,i);if(is(e)){for(var s of e.entries())if(t.call(i,s[1],s[0])===ip)return}else for(var r in e)if(t0.call(e,r)&&t.call(i,e[r],r)===ip)return}}var i_=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return ig(i,function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])}),e},im=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return ig(i,function(t){ig(t,function(t){e.push(t)})}),e};function iy(e){for(var t=Object.keys(e),i=t.length,s=Array(i);i--;)s[i]=[t[i],e[t[i]]];return s}var ib=function(e){try{return e()}catch(e){return}},ix=function(e){return function(){try{for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];return e.apply(this,i)}catch(e){io.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),io.critical(e)}}},iw=function(e){var t={};return iv(e,function(e,i){(t9(e)&&e.length>0||it(e))&&(t[i]=e)}),t},ik=["herokuapp.com","vercel.app","netlify.app"];function iE(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return e[i]}function iS(e,t,i,s){var{capture:r=!1,passive:n=!0}=null!=s?s:{};null==e||e.addEventListener(t,i,{capture:r,passive:n})}var iC="$people_distinct_id",ij="__alias",iI="__timers",iN="$autocapture_disabled_server_side",iT="$heatmaps_enabled_server_side",iP="$exception_capture_enabled_server_side",iO="$error_tracking_suppression_rules",i$="$web_vitals_enabled_server_side",iA="$dead_clicks_enabled_server_side",iF="$web_vitals_allowed_metrics",iR="$session_recording_enabled_server_side",iM="$console_log_recording_enabled_server_side",iL="$session_recording_network_payload_capture",iD="$session_recording_masking",iZ="$session_recording_canvas_recording",iq="$replay_sample_rate",iz="$replay_minimum_duration",iB="$replay_script_config",iU="$sesid",iH="$session_is_sampled",iV="$session_recording_url_trigger_activated_session",iG="$session_recording_event_trigger_activated_session",iW="$enabled_feature_flags",iK="$early_access_features",iY="$feature_flag_details",iJ="$stored_person_properties",iX="$stored_group_properties",iQ="$surveys",i0="$surveys_activated",i1="$flag_call_reported",i2="$user_state",i3="$client_session_props",i4="$capture_rate_limit",i5="$initial_campaign_params",i6="$initial_referrer_info",i9="$initial_person_info",i8="$epp",i7="__POSTHOG_TOOLBAR__",se="$posthog_cookieless",st=[iC,ij,"__cmpns",iI,iR,iT,iU,iW,iO,i2,iK,iY,iX,iJ,iQ,i1,i3,i4,i5,i6,i8,i9];function si(e){return e instanceof Element&&(e.id===i7||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function ss(e){return!!e&&1===e.nodeType}function sr(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function sn(e){return!!e&&3===e.nodeType}function sa(e){return!!e&&11===e.nodeType}function so(e){return e?tY(e).split(/\s+/):[]}function sl(e){var t=null==tP?void 0:tP.location.href;return!!(t&&e&&e.some(e=>t.match(e)))}function sc(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return so(t)}function su(e){return ie(e)?null:tY(e).split(/(\s+)/).filter(e=>sk(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function sd(e){var t="";return sf(e)&&!sv(e)&&e.childNodes&&e.childNodes.length&&iv(e.childNodes,function(e){var i;sn(e)&&e.textContent&&(t+=null!=(i=su(e.textContent))?i:"")}),tY(t)}function sh(e){var t;return t6(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null}var sp=["a","button","form","input","select","textarea","label"];function sg(e){var t=e.parentNode;return!(!t||!ss(t))&&t}function sf(e){for(var t=e;t.parentNode&&!sr(t,"body");t=t.parentNode){var i=sc(t);if(tK(i,"ph-sensitive")||tK(i,"ph-no-capture"))return!1}if(tK(sc(e),"ph-include"))return!0;var s=e.type||"";if(t9(s))switch(s.toLowerCase()){case"hidden":case"password":return!1}var r=e.name||e.id||"";return!(t9(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function sv(e){return!!(sr(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||sr(e,"select")||sr(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var s_="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",sm=RegExp("^(?:"+s_+")$"),sy=new RegExp(s_),sb="\\d{3}-?\\d{2}-?\\d{4}",sx=RegExp("^("+sb+")$"),sw=RegExp("("+sb+")");function sk(e,t){return void 0===t&&(t=!0),!(ie(e)||t9(e)&&(e=tY(e),(t?sm:sy).test((e||"").replace(/[- ]/g,""))||(t?sx:sw).test(e)))&&!0}function sE(e){var t=sd(e);return sk(t=(t+" "+function e(t){var i="";return t&&t.childNodes&&t.childNodes.length&&iv(t.childNodes,function(t){var s;if(t&&"span"===(null==(s=t.tagName)?void 0:s.toLowerCase()))try{var r=sd(t);i=(i+" "+r).trim(),t.childNodes&&t.childNodes.length&&(i=(i+" "+e(t)).trim())}catch(e){io.error("[AutoCapture]",e)}}),i}(e)).trim())?t:""}function sS(e){return e.replace(/"|\\"/g,'\\"')}class sC{constructor(){this.clicks=[]}isRageClick(e,t,i){var s=this.clicks[this.clicks.length-1];if(s&&Math.abs(e-s.x)+Math.abs(t-s.y)<30&&i-s.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:i}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:i}];return!1}}var sj=["localhost","127.0.0.1"],sI=e=>{var t=null==tM?void 0:tM.createElement("a");return t6(t)?null:(t.href=e,t)},sN=function(e,t){void 0===t&&(t="&");var i,s,r=[];return iv(e,function(e,t){t6(e)||t6(t)||"undefined"===t||(i=encodeURIComponent(e instanceof File?e.name:e.toString()),s=encodeURIComponent(t),r[r.length]=s+"="+i)}),r.join(t)},sT=function(e,t){for(var i,s=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<s.length;r++){var n=s[r].split("=");if(n[0]===t){i=n;break}}if(!t2(i)||i.length<2)return"";var a=i[1];try{a=decodeURIComponent(a)}catch(e){io.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")},sP=function(e,t,i){if(!e||!t||!t.length)return e;for(var s=e.split("#"),r=s[0]||"",n=s[1],a=r.split("?"),o=a[1],l=a[0],c=(o||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");t2(h)&&(t.includes(h[0])?u.push(h[0]+"="+i):u.push(c[d]))}var p=l;return null!=o&&(p+="?"+u.join("&")),null!=n&&(p+="#"+n),p},sO=function(e,t){var i=e.match(RegExp(t+"=([^&]*)"));return i?i[1]:null},s$=il("[AutoCapture]");function sA(e,t){return t.length>e?t.slice(0,e)+"...":t}class sF{constructor(e){this.i=!1,this.o=null,this.rageclicks=new sC,this.h=!1,this.instance=e,this.m=null}get S(){var e,t,i=t4(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=null==(e=i.url_allowlist)?void 0:e.map(e=>new RegExp(e)),i.url_ignorelist=null==(t=i.url_ignorelist)?void 0:t.map(e=>new RegExp(e)),i}$(){if(this.isBrowserSupported()){if(tP&&tM){var e=e=>{e=e||(null==tP?void 0:tP.event);try{this.k(e)}catch(e){s$.error("Failed to capture event",e)}};if(iS(tM,"submit",e,{capture:!0}),iS(tM,"change",e,{capture:!0}),iS(tM,"click",e,{capture:!0}),this.S.capture_copied_text){var t=e=>{e=e||(null==tP?void 0:tP.event),this.k(e,tH)};iS(tM,"copy",t,{capture:!0}),iS(tM,"cut",t,{capture:!0})}}}else s$.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[iN]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var t,i=[];return null==(t=this.m)||t.forEach(t=>{var s=null==tM?void 0:tM.querySelectorAll(t);null==s||s.forEach(s=>{e===s&&i.push(t)})}),i}get isEnabled(){var e,t,i=null==(e=this.instance.persistence)?void 0:e.props[iN];if(t7(this.o)&&!ii(i)&&!this.instance.I())return!1;var s=null!=(t=this.o)?t:!!i;return!!this.instance.config.autocapture&&!s}k(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var i,s=sh(e);sn(s)&&(s=s.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!=(i=this.rageclicks)&&i.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.k(e,"$rageclick");var r=t===tH;if(s&&function(e,t,i,s,r){if(void 0===i&&(i=void 0),!tP||!e||sr(e,"html")||!ss(e)||null!=(n=i)&&n.url_allowlist&&!sl(i.url_allowlist)||null!=(a=i)&&a.url_ignorelist&&sl(i.url_ignorelist))return!1;if(null!=(o=i)&&o.dom_event_allowlist){var n,a,o,l=i.dom_event_allowlist;if(l&&!l.some(e=>t.type===e))return!1}for(var c=!1,u=[e],d=!0,h=e;h.parentNode&&!sr(h,"body");)if(sa(h.parentNode))u.push(h.parentNode.host),h=h.parentNode.host;else{if(!(d=sg(h)))break;if(s||sp.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=tP.getComputedStyle(d);p&&"pointer"===p.getPropertyValue("cursor")&&(c=!0)}u.push(d),h=d}if(!function(e,t){var i=null==t?void 0:t.element_allowlist;if(t6(i))return!0;var s,r=function(e){if(i.some(t=>e.tagName.toLowerCase()===t))return{v:!0}};for(var n of e)if(s=r(n))return s.v;return!1}(u,i)||!function(e,t){var i=null==t?void 0:t.css_selector_allowlist;if(t6(i))return!0;var s,r=function(e){if(i.some(t=>e.matches(t)))return{v:!0}};for(var n of e)if(s=r(n))return s.v;return!1}(u,i))return!1;var g=tP.getComputedStyle(e);if(g&&"pointer"===g.getPropertyValue("cursor")&&"click"===t.type)return!0;var f=e.tagName.toLowerCase();switch(f){case"html":return!1;case"form":return(r||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(t.type)>=0;default:return c?(r||["click"]).indexOf(t.type)>=0:(r||["click"]).indexOf(t.type)>=0&&(sp.indexOf(f)>-1||"true"===e.getAttribute("contenteditable"))}}(s,e,this.S,r,r?["copy","cut"]:void 0)){var{props:n,explicitNoCapture:a}=function(e,t){for(var i,s,{e:r,maskAllElementAttributes:n,maskAllText:a,elementAttributeIgnoreList:o,elementsChainAsString:l}=t,c=[e],u=e;u.parentNode&&!sr(u,"body");)sa(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,h=[],p={},g=!1,f=!1;if(iv(c,e=>{var t=sf(e);"a"===e.tagName.toLowerCase()&&(g=e.getAttribute("href"),g=t&&g&&sk(g)&&g),tK(sc(e),"ph-no-capture")&&(f=!0),h.push(function(e,t,i,s){var r=e.tagName.toLowerCase(),n={tag_name:r};sp.indexOf(r)>-1&&!i&&("a"===r.toLowerCase()||"button"===r.toLowerCase()?n.$el_text=sA(1024,sE(e)):n.$el_text=sA(1024,sd(e)));var a=sc(e);a.length>0&&(n.classes=a.filter(function(e){return""!==e})),iv(e.attributes,function(i){var r;if((!sv(e)||-1!==["name","id","class","aria-label"].indexOf(i.name))&&(null==s||!s.includes(i.name))&&!t&&sk(i.value)&&(!t9(r=i.name)||"_ngcontent"!==r.substring(0,10)&&"_nghost"!==r.substring(0,7))){var a=i.value;"class"===i.name&&(a=so(a).join(" ")),n["attr__"+i.name]=sA(1024,a)}});for(var o=1,l=1,c=e;c=function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!ss(t));return t}(c);)o++,c.tagName===e.tagName&&l++;return n.nth_child=o,n.nth_of_type=l,n}(e,n,a,o)),i_(p,function(e){if(!sf(e))return{};var t={};return iv(e.attributes,function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var i=e.name.replace("data-ph-capture-attribute-",""),s=e.value;i&&s&&sk(s)&&(t[i]=s)}}),t}(e))}),f)return{props:{},explicitNoCapture:f};if(a||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?h[0].$el_text=sE(e):h[0].$el_text=sd(e)),g){h[0].attr__href=g;var v,_,m=null==(v=sI(g))?void 0:v.host,y=null==tP||null==(_=tP.location)?void 0:_.host;m&&y&&m!==y&&(d=g)}return{props:i_({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:h.map(e=>{var t,i,s,r={text:null==(i=e.$el_text)?void 0:i.slice(0,400),tag_name:e.tag_name,href:null==(s=e.attr__href)?void 0:s.slice(0,2048),attr_class:(t=e.attr__class)?t2(t)?t:so(t):void 0,attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return iy(e).filter(e=>{var[t]=e;return 0===t.indexOf("attr__")}).forEach(e=>{var[t,i]=e;return r.attributes[t]=i}),r}).map(e=>{var t,i,s="";if(e.tag_name&&(s+=e.tag_name),e.attr_class)for(var r of(e.attr_class.sort(),e.attr_class))s+="."+r.replace(/"/g,"");var n=id({},e.text?{text:e.text}:{},{"nth-child":null!=(t=e.nth_child)?t:0,"nth-of-type":null!=(i=e.nth_of_type)?i:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),a={};return iy(n).sort((e,t)=>{var[i]=e,[s]=t;return i.localeCompare(s)}).forEach(e=>{var[t,i]=e;return a[sS(t.toString())]=sS(i.toString())}),s+=":",s+=iy(a).map(e=>{var[t,i]=e;return t+'="'+i+'"'}).join("")}).join(";")},null!=(i=h[0])&&i.$el_text?{$el_text:null==(s=h[0])?void 0:s.$el_text}:{},d&&"click"===r.type?{$external_click_url:d}:{},p)}}(s,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var o=this.getElementSelectors(s);if(o&&o.length>0&&(n.$element_selectors=o),t===tH){var l,c=su(null==tP||null==(l=tP.getSelection())?void 0:l.toString()),u=e.type||"clipboard";if(!c)return!1;n.$selected_content=c,n.$copy_type=u}return this.instance.capture(t,n),!0}}}isBrowserSupported(){return t3(null==tM?void 0:tM.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return it(e)&&isFinite(e)&&Math.floor(e)===e});var sR="0123456789abcdef";class sM{constructor(e){if(this.bytes=e,16!==e.length)throw TypeError("not 128-bit length")}static fromFieldsV7(e,t,i,s){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(i)||!Number.isInteger(s)||e<0||t<0||i<0||s<0||e>0xffffffffffff||t>4095||i>0x3fffffff||s>0xffffffff)throw RangeError("invalid field value");var r=new Uint8Array(16);return r[0]=e/0x10000000000,r[1]=e/0x100000000,r[2]=e/0x1000000,r[3]=e/65536,r[4]=e/256,r[5]=e,r[6]=112|t>>>8,r[7]=t,r[8]=128|i>>>24,r[9]=i>>>16,r[10]=i>>>8,r[11]=i,r[12]=s>>>24,r[13]=s>>>16,r[14]=s>>>8,r[15]=s,new sM(r)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+sR.charAt(this.bytes[t]>>>4)+sR.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw Error("Invalid UUIDv7 was generated");return e}clone(){return new sM(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var i=this.bytes[t]-e.bytes[t];if(0!==i)return Math.sign(i)}return 0}}class sL{constructor(){this.P=0,this.R=0,this.T=new sH}generate(){var e=this.generateOrAbort();if(t6(e)){this.P=0;var t=this.generateOrAbort();if(t6(t))throw Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>0x3ffffffffff&&(this.P++,this.M())}return sM.fromFieldsV7(this.P,Math.trunc(this.R/0x40000000),0x3fffffff&this.R,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}}var sD,sZ,sq,sz,sB,sU=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};tP&&!t6(tP.crypto)&&crypto.getRandomValues&&(sU=e=>crypto.getRandomValues(e));class sH{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(sU(this.C),this.F=0),this.C[this.F++]}}var sV=()=>sG().toString(),sG=()=>(sB||(sB=new sL)).generate(),sW="",sK=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,sY={O:()=>!!tM,A:function(e){io.error("cookieStore error: "+e)},D:function(e){if(tM){try{for(var t=e+"=",i=tM.cookie.split(";").filter(e=>e.length),s=0;s<i.length;s++){for(var r=i[s];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}}catch(e){}return null}},L:function(e){var t;try{t=JSON.parse(sY.D(e))||{}}catch(e){}return t},j:function(e,t,i,s,r){if(tM)try{var n="",a="",o=function(e,t){if(t){var i=function(e,t){if(void 0===t&&(t=tM),sW)return sW;if(!t||["localhost","127.0.0.1"].includes(e))return"";for(var i=e.split("."),s=Math.min(i.length,8),r="dmn_chk_"+sV();!sW&&s--;){var n=i.slice(s).join("."),a=r+"=1;domain=."+n+";path=/";t.cookie=a+";max-age=3",t.cookie.includes(r)&&(t.cookie=a+";max-age=0",sW=n)}return sW}(e);if(!i){var s,r=(s=e.match(sK))?s[0]:"";r!==i&&io.info("Warning: cookie subdomain discovery mismatch",r,i),i=r}return i?"; domain=."+i:""}return""}(tM.location.hostname,s);if(i){var l=new Date;l.setTime(l.getTime()+24*i*36e5),n="; expires="+l.toUTCString()}r&&(a="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+n+"; SameSite=Lax; path=/"+o+a;return c.length>3686.4&&io.warn("cookieStore warning: large cookie, len="+c.length),tM.cookie=c,c}catch(e){return}},N:function(e,t){try{sY.j(e,"",-1,t)}catch(e){return}}},sJ=null,sX={O:function(){if(!t7(sJ))return sJ;var e=!0;if(t6(tP))e=!1;else try{var t="__mplssupport__";sX.j(t,"xyz"),'"xyz"'!==sX.D(t)&&(e=!1),sX.N(t)}catch(t){e=!1}return e||io.error("localStorage unsupported; falling back to cookie store"),sJ=e,e},A:function(e){io.error("localStorage error: "+e)},D:function(e){try{return null==tP?void 0:tP.localStorage.getItem(e)}catch(e){sX.A(e)}return null},L:function(e){try{return JSON.parse(sX.D(e))||{}}catch(e){}return null},j:function(e,t){try{null==tP||tP.localStorage.setItem(e,JSON.stringify(t))}catch(e){sX.A(e)}},N:function(e){try{null==tP||tP.localStorage.removeItem(e)}catch(e){sX.A(e)}}},sQ=["distinct_id",iU,iH,i8,i9],s0=id({},sX,{L:function(e){try{var t={};try{t=sY.L(e)||{}}catch(e){}var i=i_(t,JSON.parse(sX.D(e)||"{}"));return sX.j(e,i),i}catch(e){}return null},j:function(e,t,i,s,r,n){try{sX.j(e,t,void 0,void 0,n);var a={};sQ.forEach(e=>{t[e]&&(a[e]=t[e])}),Object.keys(a).length&&sY.j(e,a,i,s,r,n)}catch(e){sX.A(e)}},N:function(e,t){try{null==tP||tP.localStorage.removeItem(e),sY.N(e,t)}catch(e){sX.A(e)}}}),s1={},s2={O:function(){return!0},A:function(e){io.error("memoryStorage error: "+e)},D:function(e){return s1[e]||null},L:function(e){return s1[e]||null},j:function(e,t){s1[e]=t},N:function(e){delete s1[e]}},s3=null,s4={O:function(){if(!t7(s3))return s3;if(s3=!0,t6(tP))s3=!1;else try{var e="__support__";s4.j(e,"xyz"),'"xyz"'!==s4.D(e)&&(s3=!1),s4.N(e)}catch(e){s3=!1}return s3},A:function(e){io.error("sessionStorage error: ",e)},D:function(e){try{return null==tP?void 0:tP.sessionStorage.getItem(e)}catch(e){s4.A(e)}return null},L:function(e){try{return JSON.parse(s4.D(e))||null}catch(e){}return null},j:function(e,t){try{null==tP||tP.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){s4.A(e)}},N:function(e){try{null==tP||tP.sessionStorage.removeItem(e)}catch(e){s4.A(e)}}},s5=function(e){return e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED",e}({});class s6{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?s5.DENIED:this.q}isOptedOut(){return this.consent===s5.DENIED||this.consent===s5.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,+!!e,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:t}=this._instance.config;return(t||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return"1"===e?s5.GRANTED:"0"===e?s5.DENIED:s5.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W="localStorage"===e?sX:sY;var t="localStorage"===e?sY:sX;t.D(this.H)&&(this.W.D(this.H)||this.optInOut("1"===t.D(this.H)),t.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!iE([null==tR?void 0:tR.doNotTrack,null==tR?void 0:tR.msDoNotTrack,tB.doNotTrack],e=>tK([!0,1,"1","yes"],e))}}var s9=il("[Dead Clicks]"),s8=()=>!0,s7=e=>{var t,i=!(null==(t=e.instance.persistence)||!t.get_property(iA)),s=e.instance.config.capture_dead_clicks;return ii(s)?s:i};class re{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,t,i){this.instance=e,this.isEnabled=t,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[iA]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var t,i;null!=(t=tB.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(i=tB.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",t=>{t?s9.error("failed to load script",t):e()})}V(){var e;if(tM){if(!this.G&&null!=(e=tB.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=t4(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.G=tB.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.G.start(tM),s9.info("starting...")}}else s9.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,s9.info("stopping..."))}}function rt(e,t,i,s,r){return t>i&&(io.warn("min cannot be greater than max."),t=i),it(e)?e>i?(s&&io.warn(s+" cannot be  greater than max: "+i+". Using max value instead."),i):e<t?(s&&io.warn(s+" cannot be less than min: "+t+". Using min value instead."),t):e:(s&&io.warn(s+" must be a number. using max or fallback. max: "+i+", fallback: "+r),rt(r||i,t,i,s))}class ri{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(e=>{var t=this.X(e)+this.Z;t>=this.tt?delete this.K[e]:this.it(e,t)})},this.X=e=>this.K[String(e)],this.it=(e,t)=>{this.K[String(e)]=t},this.consumeRateLimit=e=>{var t,i=null!=(t=this.X(e))?t:this.tt;if(0===(i=Math.max(i-1,0)))return!0;this.it(e,i);var s,r=0===i;return r&&(null==(s=this.et)||s.call(this,e)),r},this.rt=e,this.et=this.rt.et,this.tt=rt(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=rt(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=rt(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}}var rs=il("[ExceptionAutocapture]");class rr{constructor(e){var t,i,s;this.nt=()=>{var e;if(tP&&this.isEnabled&&null!=(e=tB.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=tB.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,i=tB.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,s=tB.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=t(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=i(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=s(this.captureException.bind(this)))}catch(e){rs.error("failed to start",e),this.ht()}}},this._instance=e,this.dt=!(null==(t=this._instance.persistence)||!t.props[iP]),this.S=this.vt(),this.ct=new ri({refillRate:null!=(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)?i:1,bucketSize:null!=(s=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)?s:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return t4(e)?t=id({},t,e):(t6(e)?this.dt:e)&&(t=id({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(rs.info("enabled"),this.J(this.nt))}J(e){var t,i;null!=(t=tB.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(i=tB.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"exception-autocapture",t=>{if(t)return rs.error("failed to load script",t);e()})}ht(){var e,t,i;null==(e=this.ot)||e.call(this),this.ot=void 0,null==(t=this.lt)||t.call(this),this.lt=void 0,null==(i=this.ut)||i.call(this),this.ut=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.dt=!!t,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[iP]:this.dt}),this.startIfEnabled()}captureException(e){e.$exception_personURL=this._instance.requestRouter.endpointFor("ui")+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var t,i=null!=(t=e.$exception_list[0].type)?t:"Exception";this.ct.consumeRateLimit(i)?rs.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}}function rn(e){return!t6(Event)&&ra(e,Event)}function ra(e,t){try{return e instanceof t}catch(e){return!1}}function ro(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return ra(e,Error)}}function rl(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function rc(e){return rl(e,"DOMError")}var ru=/\(error: (.*)\)/;function rd(e,t,i,s){var r={platform:"web:javascript",filename:e,function:"<anonymous>"===t?"?":t,in_app:!0};return t6(i)||(r.lineno=i),t6(s)||(r.colno=s),r}var rh,rp,rg,rf=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,rv=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,r_=/\((\S*)(?::(\d+))(?::(\d+))\)/,rm=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ry=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rb=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=t.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return function(e,t){void 0===t&&(t=0);for(var i=[],r=e.split("\n"),n=t;n<r.length;n++){var a=r[n];if(!(a.length>1024)){var o=ru.test(a)?a.replace(ru,"$1"):a;if(!o.match(/\S*Error: /)){for(var l of s){var c=l(o);if(c){i.push(c);break}}if(i.length>=50)break}}}if(!i.length)return[];var u=Array.from(i);return u.reverse(),u.slice(0,50).map(e=>{var t;return id({},e,{filename:e.filename||((t=u)[t.length-1]||{}).filename,function:e.function||"?"})})}}([30,e=>{var t=rf.exec(e);if(t){var[,i,s,r]=t;return rd(i,"?",+s,+r)}var n=rv.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){var a=r_.exec(n[2]);a&&(n[2]=a[1],n[3]=a[2],n[4]=a[3])}var[o,l]=rx(n[1]||"?",n[2]);return rd(l,o,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,e=>{var t=rm.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var i=ry.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}var s=t[3],r=t[1]||"?";return[r,s]=rx(r,s),rd(s,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),rx=(e,t)=>{var i=-1!==e.indexOf("safari-extension"),s=-1!==e.indexOf("safari-web-extension");return i||s?[-1!==e.indexOf("@")?e.split("@")[0]:"?",i?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},rw=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function rk(e,t){void 0===t&&(t=0);var i=e.stacktrace||e.stack||"",s=e&&rE.test(e.message)?1:0;try{var r,n,a=(r=rb(i,s),n=function(e){var t=globalThis._posthogChunkIds;if(!t)return{};var i=Object.keys(t);return rg&&i.length===rp||(rp=i.length,rg=i.reduce((i,s)=>{rh||(rh={});var r=rh[s];if(r)i[r[0]]=r[1];else for(var n=e(s),a=n.length-1;a>=0;a--){var o=n[a],l=null==o?void 0:o.filename,c=t[s];if(l&&c){i[l]=c,rh[s]=[l,c];break}}return i},{})),rg}(rb),r.forEach(e=>{e.filename&&(e.chunk_id=n[e.filename])}),r);return a.slice(0,a.length-t)}catch(e){}return[]}var rE=/Minified React error #\d+;/i;function rS(e,t){return{$exception_list:function e(t,i){var s,r,n,a,o,l,c,u,d=(s=t,r=i,l=rk(s),c=null==(a=null==r?void 0:r.handled)||a,u=null!=(o=null==r?void 0:r.synthetic)&&o,{type:null!=r&&r.overrideExceptionType?r.overrideExceptionType:s.name,value:(n=s.message).error&&"string"==typeof n.error.message?String(n.error.message):String(n),stacktrace:{frames:l,type:"raw"},mechanism:{handled:c,synthetic:u}});return t.cause&&ro(t.cause)&&t.cause!==t?[d,...e(t.cause,{handled:null==i?void 0:i.handled,synthetic:null==i?void 0:i.synthetic})]:[d]}(e,t),$exception_level:"error"}}function rC(e,t){var i,s,r,n=null==(i=null==t?void 0:t.handled)||i,a=null==(s=null==t?void 0:t.synthetic)||s,o={type:null!=t&&t.overrideExceptionType?t.overrideExceptionType:null!=(r=null==t?void 0:t.defaultExceptionType)?r:"Error",value:e||(null==t?void 0:t.defaultExceptionMessage),mechanism:{handled:n,synthetic:a}};if(null!=t&&t.syntheticException){var l=rk(t.syntheticException,1);l.length&&(o.stacktrace={frames:l,type:"raw"})}return{$exception_list:[o],$exception_level:"error"}}function rj(e,t,i){try{if(!(t in e))return()=>{};var s=e[t],r=i(s);return t3(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=r,()=>{e[t]=s}}catch(e){return()=>{}}}class rI{constructor(e){var t;this._instance=e,this.ft=(null==tP||null==(t=tP.location)?void 0:t.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(io.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,io.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(tP&&tP.history){var i=this;null!=(e=tP.history.pushState)&&e.__posthog_wrapped__||rj(tP.history,"pushState",e=>function(t,s,r){e.call(this,t,s,r),i._t("pushState")}),null!=(t=tP.history.replaceState)&&t.__posthog_wrapped__||rj(tP.history,"replaceState",e=>function(t,s,r){e.call(this,t,s,r),i._t("replaceState")}),this.bt()}}_t(e){try{var t,i=null==tP||null==(t=tP.location)?void 0:t.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(t){io.error("Error capturing "+e+" pageview",t)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};iS(tP,"popstate",e),this.gt=()=>{tP&&tP.removeEventListener("popstate",e)}}}}function rN(e){var t,i;return(null==(t=JSON.stringify(e,(i=[],function(e,t){if(t4(t)){for(;i.length>0&&i[i.length-1]!==this;)i.pop();return i.includes(t)?"[Circular]":(i.push(t),t)}return t})))?void 0:t.length)||0}var rT=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(rT||{}),rP=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(rP||{}),rO="[SessionRecording]",r$="redacted",rA={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},rF=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],rR=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],rM=["/s/","/e/","/i/"];function rL(e,t,i,s){if(ie(e))return e;var r=(null==t?void 0:t["content-length"])||new Blob([e]).size;return t9(r)&&(r=parseInt(r)),r>i?rO+" "+s+" body too large to record ("+r+" bytes)":e}function rD(e,t){if(ie(e))return e;var i=e;return sk(i,!1)||(i=rO+" "+t+" body "+r$),iv(rR,e=>{var s,r;null!=(s=i)&&s.length&&-1!==(null==(r=i)?void 0:r.indexOf(e))&&(i=rO+" "+t+" body "+r$+" as might contain: "+e)}),i}var rZ=(e,t)=>{var i,s,r={payloadSizeLimitBytes:rA.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...rA.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...rA.payloadHostDenyList]},n=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,o=!1!==e.capture_performance&&t.recordPerformance,l=(s=Math.min(1e6,null!=(i=r.payloadSizeLimitBytes)?i:1e6),e=>(null!=e&&e.requestBody&&(e.requestBody=rL(e.requestBody,e.requestHeaders,s,"Request")),null!=e&&e.responseBody&&(e.responseBody=rL(e.responseBody,e.responseHeaders,s,"Response")),e)),c=t=>{var i;return l(((e,t)=>{var i,s=sI(e.name),r=0===t.indexOf("http")?null==(i=sI(t))?void 0:i.pathname:t;"/"===r&&(r="");var n=null==s?void 0:s.pathname.replace(r||"","");if(!(s&&n&&rM.some(e=>0===n.indexOf(e))))return e})((ie(i=t.requestHeaders)||iv(Object.keys(null!=i?i:{}),e=>{rF.includes(e.toLowerCase())&&(i[e]=r$)}),t),e.api_host))},u=t3(e.session_recording.maskNetworkRequestFn);return u&&t3(e.session_recording.maskCapturedNetworkRequestFn)&&io.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),u&&(e.session_recording.maskCapturedNetworkRequestFn=t=>{var i=e.session_recording.maskNetworkRequestFn({url:t.name});return id({},t,{name:null==i?void 0:i.url})}),r.maskRequestFn=t3(e.session_recording.maskCapturedNetworkRequestFn)?t=>{var i,s=c(t);return s&&null!=(i=null==e.session_recording.maskCapturedNetworkRequestFn?void 0:e.session_recording.maskCapturedNetworkRequestFn(s))?i:void 0}:e=>(function(e){if(!t6(e))return e.requestBody=rD(e.requestBody,"Request"),e.responseBody=rD(e.responseBody,"Response"),e})(c(e)),id({},rA,r,{recordHeaders:n,recordBody:a,recordPerformance:o,recordInitialRequests:o})};class rq{constructor(e,t){var i,s;void 0===t&&(t={}),this.yt={},this.wt=e=>{if(!this.yt[e]){this.yt[e]=!0;var t,i,s=this.St(e);null==(t=(i=this.rt).onBlockedNode)||t.call(i,e,s)}},this.$t=e=>{var t=this.St(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var i=t.closest("svg");if(i)return[this._rrweb.mirror.getId(i),i]}return[e,t]},this.St=e=>this._rrweb.mirror.getNode(e),this.kt=e=>{var t,i,s,r,n,a,o,l;return(null!=(t=null==(i=e.removes)?void 0:i.length)?t:0)+(null!=(s=null==(r=e.attributes)?void 0:r.length)?s:0)+(null!=(n=null==(a=e.texts)?void 0:a.length)?n:0)+(null!=(o=null==(l=e.adds)?void 0:l.length)?o:0)},this.throttleMutations=e=>{if(3!==e.type||0!==e.data.source)return e;var t=e.data,i=this.kt(t);t.attributes&&(t.attributes=t.attributes.filter(e=>{var[t]=this.$t(e.id);return!this.ct.consumeRateLimit(t)&&e}));var s=this.kt(t);return 0!==s||i===s?e:void 0},this._rrweb=e,this.rt=t,this.ct=new ri({bucketSize:null!=(i=this.rt.bucketSize)?i:100,refillRate:null!=(s=this.rt.refillRate)?s:10,refillInterval:1e3,et:this.wt})}}var rz=Uint8Array,rB=Uint16Array,rU=Uint32Array,rH=new rz([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rV=new rz([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rG=new rz([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rW=function(e,t){for(var i=new rB(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];var r=new rU(i[30]);for(s=1;s<30;++s)for(var n=i[s];n<i[s+1];++n)r[n]=n-i[s]<<5|s;return[i,r]},rK=rW(rH,2),rY=rK[0],rJ=rK[1];rY[28]=258,rJ[258]=28;for(var rX=rW(rV,0)[1],rQ=new rB(32768),r0=0;r0<32768;++r0){var r1=(43690&r0)>>>1|(21845&r0)<<1;r1=(61680&(r1=(52428&r1)>>>2|(13107&r1)<<2))>>>4|(3855&r1)<<4,rQ[r0]=((65280&r1)>>>8|(255&r1)<<8)>>>1}var r2=function(e,t,i){for(var s=e.length,r=0,n=new rB(t);r<s;++r)++n[e[r]-1];var a,o=new rB(t);for(r=0;r<t;++r)o[r]=o[r-1]+n[r-1]<<1;if(i){a=new rB(1<<t);var l=15-t;for(r=0;r<s;++r)if(e[r])for(var c=r<<4|e[r],u=t-e[r],d=o[e[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[rQ[d]>>>l]=c}else for(a=new rB(s),r=0;r<s;++r)a[r]=rQ[o[e[r]-1]++]>>>15-e[r];return a},r3=new rz(288);for(r0=0;r0<144;++r0)r3[r0]=8;for(r0=144;r0<256;++r0)r3[r0]=9;for(r0=256;r0<280;++r0)r3[r0]=7;for(r0=280;r0<288;++r0)r3[r0]=8;var r4=new rz(32);for(r0=0;r0<32;++r0)r4[r0]=5;var r5=r2(r3,9,0),r6=r2(r4,5,0),r9=function(e){return(e/8|0)+(7&e&&1)},r8=function(e,t,i){(null==i||i>e.length)&&(i=e.length);var s=new(e instanceof rB?rB:e instanceof rU?rU:rz)(i-t);return s.set(e.subarray(t,i)),s},r7=function(e,t,i){i<<=7&t;var s=t/8|0;e[s]|=i,e[s+1]|=i>>>8},ne=function(e,t,i){i<<=7&t;var s=t/8|0;e[s]|=i,e[s+1]|=i>>>8,e[s+2]|=i>>>16},nt=function(e,t){for(var i=[],s=0;s<e.length;++s)e[s]&&i.push({s:s,f:e[s]});var r=i.length,n=i.slice();if(!r)return[new rz(0),0];if(1==r){var a=new rz(i[0].s+1);return a[i[0].s]=1,[a,1]}i.sort(function(e,t){return e.f-t.f}),i.push({s:-1,f:25001});var o=i[0],l=i[1],c=0,u=1,d=2;for(i[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=r-1;)o=i[i[c].f<i[d].f?c++:d++],l=i[c!=u&&i[c].f<i[d].f?c++:d++],i[u++]={s:-1,f:o.f+l.f,l:o,r:l};var h=n[0].s;for(s=1;s<r;++s)n[s].s>h&&(h=n[s].s);var p=new rB(h+1),g=ni(i[u-1],p,0);if(g>t){s=0;var f=0,v=g-t,_=1<<v;for(n.sort(function(e,t){return p[t.s]-p[e.s]||e.f-t.f});s<r;++s){var m=n[s].s;if(!(p[m]>t))break;f+=_-(1<<g-p[m]),p[m]=t}for(f>>>=v;f>0;){var y=n[s].s;p[y]<t?f-=1<<t-p[y]++-1:++s}for(;s>=0&&f;--s){var b=n[s].s;p[b]==t&&(--p[b],++f)}g=t}return[new rz(p),g]},ni=function(e,t,i){return -1==e.s?Math.max(ni(e.l,t,i+1),ni(e.r,t,i+1)):t[e.s]=i},ns=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new rB(++t),s=0,r=e[0],n=1,a=function(e){i[s++]=e},o=1;o<=t;++o)if(e[o]==r&&o!=t)++n;else{if(!r&&n>2){for(;n>138;n-=138)a(32754);n>2&&(a(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(a(r),--n;n>6;n-=6)a(8304);n>2&&(a(n-3<<5|8208),n=0)}for(;n--;)a(r);n=1,r=e[o]}return[i.subarray(0,s),t]},nr=function(e,t){for(var i=0,s=0;s<t.length;++s)i+=e[s]*t[s];return i},nn=function(e,t,i){var s=i.length,r=r9(t+2);e[r]=255&s,e[r+1]=s>>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var n=0;n<s;++n)e[r+n+4]=i[n];return 8*(r+4+s)},na=function(e,t,i,s,r,n,a,o,l,c,u){r7(t,u++,i),++r[256];for(var d=nt(r,15),h=d[0],p=d[1],g=nt(n,15),f=g[0],v=g[1],_=ns(h),m=_[0],y=_[1],b=ns(f),x=b[0],w=b[1],k=new rB(19),E=0;E<m.length;++E)k[31&m[E]]++;for(E=0;E<x.length;++E)k[31&x[E]]++;for(var S=nt(k,7),C=S[0],j=S[1],I=19;I>4&&!C[rG[I-1]];--I);var N,T,P,O,$=c+5<<3,A=nr(r,r3)+nr(n,r4)+a,F=nr(r,h)+nr(n,f)+a+14+3*I+nr(k,C)+(2*k[16]+3*k[17]+7*k[18]);if($<=A&&$<=F)return nn(t,u,e.subarray(l,l+c));if(r7(t,u,1+(F<A)),u+=2,F<A){N=r2(h,p,0),T=h,P=r2(f,v,0),O=f;var R=r2(C,j,0);for(r7(t,u,y-257),r7(t,u+5,w-1),r7(t,u+10,I-4),u+=14,E=0;E<I;++E)r7(t,u+3*E,C[rG[E]]);u+=3*I;for(var M=[m,x],L=0;L<2;++L){var D=M[L];for(E=0;E<D.length;++E){var Z=31&D[E];r7(t,u,R[Z]),u+=C[Z],Z>15&&(r7(t,u,D[E]>>>5&127),u+=D[E]>>>12)}}}else N=r5,T=r3,P=r6,O=r4;for(E=0;E<o;++E)if(s[E]>255){ne(t,u,N[(Z=s[E]>>>18&31)+257]),u+=T[Z+257],Z>7&&(r7(t,u,s[E]>>>23&31),u+=rH[Z]);var q=31&s[E];ne(t,u,P[q]),u+=O[q],q>3&&(ne(t,u,s[E]>>>5&8191),u+=rV[q])}else ne(t,u,N[s[E]]),u+=T[s[E]];return ne(t,u,N[256]),u+T[256]},no=new rU([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),nl=function(){for(var e=new rU(256),t=0;t<256;++t){for(var i=t,s=9;--s;)i=(1&i&&0xedb88320)^i>>>1;e[t]=i}return e}(),nc=function(){var e=0xffffffff;return{p:function(t){for(var i=e,s=0;s<t.length;++s)i=nl[255&i^t[s]]^i>>>8;e=i},d:function(){return 0xffffffff^e}}},nu=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},nd=function(e,t){var i=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:2*(9==t.level),e[9]=3,0!=t.mtime&&nu(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),i){e[3]=8;for(var s=0;s<=i.length;++s)e[s+10]=i.charCodeAt(s)}};function nh(e,t){void 0===t&&(t={});var i,s,r,n=nc(),a=e.length;n.p(e);var o=(s=t,r=10+((i=t).filename&&i.filename.length+1||0),function(e,t,i,s,r,n){var a=e.length,o=new rz(s+a+5*(1+Math.floor(a/7e3))+8),l=o.subarray(s,o.length-r),c=0;if(!t||a<8)for(var u=0;u<=a;u+=65535){var d=u+65535;d<a?c=nn(l,c,e.subarray(u,d)):(l[u]=n,c=nn(l,c,e.subarray(u,a)))}else{for(var h=no[t-1],p=h>>>13,g=8191&h,f=(1<<i)-1,v=new rB(32768),_=new rB(f+1),m=Math.ceil(i/3),y=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<y)&f},x=new rU(25e3),w=new rB(288),k=new rB(32),E=0,S=0,C=(u=0,0),j=0,I=0;u<a;++u){var N=b(u),T=32767&u,P=_[N];if(v[T]=P,_[N]=T,j<=u){var O=a-u;if((E>7e3||C>24576)&&O>423){c=na(e,l,0,x,w,k,S,C,I,u-I,c),C=E=S=0,I=u;for(var $=0;$<286;++$)w[$]=0;for($=0;$<30;++$)k[$]=0}var A=2,F=0,R=g,M=T-P&32767;if(O>2&&N==b(u-M))for(var L=Math.min(p,O)-1,D=Math.min(32767,u),Z=Math.min(258,O);M<=D&&--R&&T!=P;){if(e[u+A]==e[u+A-M]){for(var q=0;q<Z&&e[u+q]==e[u+q-M];++q);if(q>A){if(A=q,F=M,q>L)break;var z=Math.min(M,q-2),B=0;for($=0;$<z;++$){var U=u-M+$+32768&32767,H=U-v[U]+32768&32767;H>B&&(B=H,P=U)}}}M+=(T=P)-(P=v[T])+32768&32767}if(F){x[C++]=0x10000000|rJ[A]<<18|rX[F];var V=31&rJ[A],G=31&rX[F];S+=rH[V]+rV[G],++w[257+V],++k[G],j=u+A,++E}else x[C++]=e[u],++w[e[u]]}}c=na(e,l,n,x,w,k,S,C,I,u-I,c)}return r8(o,0,s+r9(c)+r)}(e,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+s.mem,r,8,!0)),l=o.length;return nd(o,t),nu(o,l-8,n.d()),nu(o,l-4,a),o}function np(e,t){var i=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var s=new rz(e.length+(e.length>>>1)),r=0,n=function(e){s[r++]=e},a=0;a<i;++a){if(r+5>s.length){var o=new rz(r+8+(i-a<<1));o.set(s),s=o}var l=e.charCodeAt(a);l<128||t?n(l):(l<2048?n(192|l>>>6):(l>55295&&l<57344?(n(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++a))>>>18),n(128|l>>>12&63)):n(224|l>>>12),n(128|l>>>6&63)),n(128|63&l))}return r8(s,0,r)}var ng="disabled",nf="sampled",nv="active",n_="buffering",nm="paused",ny="trigger",nb=ny+"_activated",nx=ny+"_pending",nw=ny+"_"+ng;function nk(e,t){return t.some(t=>"regex"===t.matching&&new RegExp(t.url).test(e))}class nE{constructor(e){this.xt=e}triggerStatus(e){var t=this.xt.map(t=>t.triggerStatus(e));return t.includes(nb)?nb:t.includes(nx)?nx:nw}stop(){this.xt.forEach(e=>e.stop())}}class nS{constructor(e){this.xt=e}triggerStatus(e){var t=new Set;for(var i of this.xt)t.add(i.triggerStatus(e));switch(t.delete(nw),t.size){case 0:return nw;case 1:return Array.from(t)[0];default:return nx}}stop(){this.xt.forEach(e=>e.stop())}}class nC{triggerStatus(){return nx}stop(){}}class nj{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var t,i;this.Et=(null==(t=e.sessionRecording)?void 0:t.urlTriggers)||[],this.It=(null==(i=e.sessionRecording)?void 0:i.urlBlocklist)||[]}Pt(e){var t;return 0===this.Et.length?nw:(null==(t=this._instance)?void 0:t.get_property(iV))===e?nb:nx}triggerStatus(e){var t=this.Pt(e),i=t===nb?nb:t===nx?nx:nw;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,t,i){if(void 0!==tP&&tP.location.href){var s=tP.location.href,r=this.urlBlocked,n=nk(s,this.It);r&&n||(n&&!r?e():!n&&r&&t(),nk(s,this.Et)&&i("url"))}}stop(){}}class nI{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=nx;return ie(this.linkedFlag)&&(e=nw),this.linkedFlagSeen&&(e=nb),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,t){var i;if(this.linkedFlag=(null==(i=e.sessionRecording)?void 0:i.linkedFlag)||null,!ie(this.linkedFlag)&&!this.linkedFlagSeen){var s=t9(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,r=t9(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((e,i)=>{var n=!1;if(t4(i)&&s in i){var a=i[s];n=ii(a)?!0===a:r?a===r:!!a}this.linkedFlagSeen=n,n&&t(s,r)})}}stop(){this.Rt()}}class nN{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var t;this.Tt=(null==(t=e.sessionRecording)?void 0:t.eventTriggers)||[]}Mt(e){var t;return 0===this.Tt.length?nw:(null==(t=this._instance)?void 0:t.get_property(iG))===e?nb:nx}triggerStatus(e){var t=this.Mt(e),i=t===nb?nb:t===nx?nx:nw;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}}function nT(e){return e.isRecordingEnabled?n_:ng}function nP(e){if(!e.receivedFlags)return n_;if(!e.isRecordingEnabled)return ng;if(e.urlTriggerMatching.urlBlocked)return nm;var t=!0===e.isSampled,i=new nE([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?nf:i===nb?nv:i===nx?n_:!1===e.isSampled?ng:nv}function nO(e){if(!e.receivedFlags)return n_;if(!e.isRecordingEnabled)return ng;if(e.urlTriggerMatching.urlBlocked)return nm;var t=new nS([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),i=t!==nw,s=ii(e.isSampled);return i&&t===nx?n_:i&&t===nw||s&&!e.isSampled?ng:!0===e.isSampled?nf:nv}var n$="[SessionRecording]",nA=il(n$);function nF(){var e;return null==tB||null==(e=tB.__PosthogExtensions__)||null==(e=e.rrweb)?void 0:e.record}var nR=[rP.MouseMove,rP.MouseInteraction,rP.Scroll,rP.ViewportResize,rP.Input,rP.TouchMove,rP.MediaInteraction,rP.Drag],nM=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function nL(e){return function(e,t){for(var i="",s=0;s<e.length;){var r=e[s++];r<128||t?i+=String.fromCharCode(r):r<224?i+=String.fromCharCode((31&r)<<6|63&e[s++]):r<240?i+=String.fromCharCode((15&r)<<12|(63&e[s++])<<6|63&e[s++]):i+=String.fromCharCode(55296|(r=((15&r)<<18|(63&e[s++])<<12|(63&e[s++])<<6|63&e[s++])-65536)>>10,56320|1023&r)}return i}(nh(np(JSON.stringify(e))),!0)}function nD(e){return e.type===rT.Custom&&"sessionIdle"===e.data.tag}class nZ{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw Error(n$+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,t;return this.Lt.triggerStatus(this.sessionId)===nx?6e4:null!=(e=null==(t=this._instance.config.session_recording)?void 0:t.full_snapshot_interval_millis)?e:3e5}get jt(){var e=this._instance.get_property(iH);return ii(e)?e:null}get Nt(){var e,t,i=null==(e=this.C)?void 0:e.data[(null==(t=this.C)?void 0:t.data.length)-1],{sessionStartTimestamp:s}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-s:null}get zt(){var e=!!this._instance.get_property(iR),t=!this._instance.config.disable_session_recording;return tP&&e&&t}get Ut(){var e=!!this._instance.get_property(iM),t=this._instance.config.enable_recording_console_log;return null!=t?t:e}get qt(){var e,t,i,s,r,n,a=this._instance.config.session_recording.captureCanvas,o=this._instance.get_property(iZ),l=null!=(e=null!=(t=null==a?void 0:a.recordCanvas)?t:null==o?void 0:o.enabled)&&e,c=null!=(i=null!=(s=null==a?void 0:a.canvasFps)?s:null==o?void 0:o.fps)?i:4,u=null!=(r=null!=(n=null==a?void 0:a.canvasQuality)?n:null==o?void 0:o.quality)?r:.4;if("string"==typeof u){var d=parseFloat(u);u=isNaN(d)?.4:d}return{enabled:l,fps:rt(c,0,12,"canvas recording fps",4),quality:rt(u,0,1,"canvas recording quality",.4)}}get Bt(){var e,t,i=this._instance.get_property(iL),s={recordHeaders:null==(e=this._instance.config.session_recording)?void 0:e.recordHeaders,recordBody:null==(t=this._instance.config.session_recording)?void 0:t.recordBody},r=(null==s?void 0:s.recordHeaders)||(null==i?void 0:i.recordHeaders),n=(null==s?void 0:s.recordBody)||(null==i?void 0:i.recordBody),a=t4(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,o=!!(ii(a)?a:null==i?void 0:i.capturePerformance);return r||n||o?{recordHeaders:r,recordBody:n,recordPerformance:o}:void 0}get Ht(){var e,t,i,s,r,n,a=this._instance.get_property(iD),o={maskAllInputs:null==(e=this._instance.config.session_recording)?void 0:e.maskAllInputs,maskTextSelector:null==(t=this._instance.config.session_recording)?void 0:t.maskTextSelector,blockSelector:null==(i=this._instance.config.session_recording)?void 0:i.blockSelector},l=null!=(s=null==o?void 0:o.maskAllInputs)?s:null==a?void 0:a.maskAllInputs,c=null!=(r=null==o?void 0:o.maskTextSelector)?r:null==a?void 0:a.maskTextSelector,u=null!=(n=null==o?void 0:o.blockSelector)?n:null==a?void 0:a.blockSelector;return t6(l)&&t6(c)&&t6(u)?void 0:{maskAllInputs:null==l||l,maskTextSelector:c,blockSelector:u}}get Wt(){var e=this._instance.get_property(iq);return it(e)?e:null}get Gt(){var e=this._instance.get_property(iz);return it(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):n_}constructor(e){if(this.Vt=nT,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new nC,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(null!=tM&&tM.visibilityState){var e="window "+tM.visibilityState;this.ui(e,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw nA.error("started without valid sessionManager"),Error(n$+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw Error(n$+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new nI(this._instance),this.Kt=new nj(this._instance),this.Yt=new nN(this._instance);var{sessionId:t,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=t,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&nA.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),iS(tP,"beforeunload",this.oi),iS(tP,"offline",this.li),iS(tP,"online",this.hi),iS(tP,"visibilitychange",this.di),this.mi(),this.bi(),ie(this.ii)&&(this.ii=this._instance.on("eventCaptured",e=>{try{if("$pageview"===e.event){var t=null!=e&&e.properties.$current_url?this.yi(null==e?void 0:e.properties.$current_url):"";if(!t)return;this.ui("$pageview",{href:t})}}catch(e){nA.error("Could not add $pageview to rrweb session",e)}})),this.ei||(this.ei=this.At.onSessionId((e,t,i)=>{var s,r;i&&(this.ui("$session_id_change",{sessionId:e,windowId:t,changeReason:i}),null==(s=this._instance)||null==(s=s.persistence)||s.unregister(iG),null==(r=this._instance)||null==(r=r.persistence)||r.unregister(iV))}))):this.stopRecording()}stopRecording(){var e,t,i,s;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,null==tP||tP.removeEventListener("beforeunload",this.oi),null==tP||tP.removeEventListener("offline",this.li),null==tP||tP.removeEventListener("online",this.hi),null==tP||tP.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),null==(e=this.ii)||e.call(this),this.ii=void 0,null==(t=this.ni)||t.call(this),this.ni=void 0,null==(i=this.ei)||i.call(this),this.ei=void 0,null==(s=this.si)||s.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),nA.info("stopped"))}Si(){var e;null==(e=this._instance.persistence)||e.unregister(iH)}$i(e){var t,i=this.Ct!==e,s=this.Wt;if(it(s)){var r=this.jt,n=i||!ii(r),a=n?function(e){for(var t=0,i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i)|0;return Math.abs(t)}(e)%100<rt(100*s,0,100):r;n&&(a?this.ki(nf):nA.warn("Sample rate ("+s+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:s,isSampled:a})),null==(t=this._instance.persistence)||t.register({[iH]:a})}else this.Si()}onRemoteConfig(e){var t,i,s,r;this.ui("$remote_config_received",e),this.xi(e),null!=(t=e.sessionRecording)&&t.endpoint&&(this.vi=null==(r=e.sessionRecording)?void 0:r.endpoint),this.mi(),"any"===(null==(i=e.sessionRecording)?void 0:i.triggerMatchType)?(this.Vt=nP,this.Lt=new nE([this.Yt,this.Kt])):(this.Vt=nO,this.Lt=new nS([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:null==(s=e.sessionRecording)?void 0:s.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(e,t)=>{this.ki("linked_flag_matched",{flag:e,variant:t})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){it(this.Wt)&&ie(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var t,i=this._instance.persistence,s=()=>{var t,s,r,n,a,o,l,c,u,d=null==(t=e.sessionRecording)?void 0:t.sampleRate,h=ie(d)?null:parseFloat(d);ie(h)&&this.Si();var p=null==(s=e.sessionRecording)?void 0:s.minimumDurationMilliseconds;i.register({[iR]:!!e.sessionRecording,[iM]:null==(r=e.sessionRecording)?void 0:r.consoleLogRecordingEnabled,[iL]:id({capturePerformance:e.capturePerformance},null==(n=e.sessionRecording)?void 0:n.networkPayloadCapture),[iD]:null==(a=e.sessionRecording)?void 0:a.masking,[iZ]:{enabled:null==(o=e.sessionRecording)?void 0:o.recordCanvas,fps:null==(l=e.sessionRecording)?void 0:l.canvasFps,quality:null==(c=e.sessionRecording)?void 0:c.canvasQuality},[iq]:h,[iz]:t6(p)?null:p,[iB]:null==(u=e.sessionRecording)?void 0:u.scriptConfig})};s(),null==(t=this.ri)||t.call(this),this.ri=this.At.onSessionId(s)}}log(e,t){var i;void 0===t&&(t="log"),null==(i=this._instance.sessionRecording)||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:t,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!t6(Object.assign)&&!t6(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var t;(this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),nF())?this.Ei():null==(t=tB.__PosthogExtensions__)||null==t.loadExternalDependency||t.loadExternalDependency(this._instance,this.Ii,e=>{if(e)return nA.error("could not load recorder",e);this.Ei()}),nA.info("starting"),this.status===nv&&this.ki(e||"recording_initialized")}}get Ii(){var e;return(null==(e=this._instance)||null==(e=e.persistence)||null==(e=e.get_property(iB))?void 0:e.script)||"recorder"}Pi(e){var t;return 3===e.type&&-1!==nR.indexOf(null==(t=e.data)?void 0:t.source)}Ri(e){var t=this.Pi(e);t||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(t&&(this.ti=e.timestamp,this.Zt)){var s="unknown"===this.Zt;this.Zt=!1,s||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:r,sessionId:n}=this.At.checkAndGetSessionAndWindowId(!t,e.timestamp),a=this.Ct!==n,o=this.fi!==r;this.fi=r,this.Ct=n,a||o?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(t){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):nA.warn("could not emit queued rrweb event.",t,e),!1}}ui(e,t){return this.Mi(nM(()=>nF().addCustomEvent(e,t)))}Ci(){return this.Mi(nM(()=>nF().takeFullSnapshot()))}Ei(){var e,t,i,s,r={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};for(var[n,a]of Object.entries(this._instance.config.session_recording||{}))n in r&&("maskInputOptions"===n?r.maskInputOptions=id({password:!0},a):r[n]=a);this.qt&&this.qt.enabled&&(r.recordCanvas=!0,r.sampling={canvas:this.qt.fps},r.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(r.maskAllInputs=null==(t=this.Ht.maskAllInputs)||t,r.maskTextSelector=null!=(i=this.Ht.maskTextSelector)?i:void 0,r.blockSelector=null!=(s=this.Ht.blockSelector)?s:void 0);var o=nF();if(o){this.Fi=null!=(e=this.Fi)?e:new rq(o,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(e,t)=>{var i="Too many mutations on node '"+e+"'. Rate limiting. This could be due to SVG animations or something similar";nA.info(i,{node:t}),this.log(n$+" "+i,"warn")}});var l=this.Oi();this.ci=o(id({emit:e=>{this.onRRwebEmit(e)},plugins:l},r)),this.ti=Date.now(),this.Zt=ii(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:r,activePlugins:l.map(e=>null==e?void 0:e.name)}),this.ui("$posthog_config",{config:this._instance.config})}else nA.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),!0!==this.Zt){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,t,i=[],s=null==(e=tB.__PosthogExtensions__)||null==(e=e.rrwebPlugins)?void 0:e.getRecordConsolePlugin;s&&this.Ut&&i.push(s());var r=null==(t=tB.__PosthogExtensions__)||null==(t=t.rrwebPlugins)?void 0:t.getRecordNetworkPlugin;return this.Bt&&t3(r)&&(!sj.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(r(rZ(this._instance.config,this.Bt))):nA.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var t;if(this.Ai(),e&&t4(e)){if(e.type===rT.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),e=>this.zi(e)),!this.Kt.urlBlocked||e.type===rT.Custom&&"recording paused"===e.data.tag){e.type===rT.FullSnapshot&&this.Ti(),e.type===rT.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===nx&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var r=function(e){if(e&&t4(e)&&6===e.type&&t4(e.data)&&"rrweb/console@1"===e.data.plugin){e.data.payload.payload.length>10&&(e.data.payload.payload=e.data.payload.payload.slice(0,10),e.data.payload.payload.push("...[truncated]"));for(var t=[],i=0;i<e.data.payload.payload.length;i++)e.data.payload.payload[i]&&e.data.payload.payload[i].length>2e3?t.push(e.data.payload.payload[i].slice(0,2e3)+"...[truncated]"):t.push(e.data.payload.payload[i]);return e.data.payload.payload=t,e}return e}(s);if(this.Ri(r),!0!==this.Zt||nD(r)){if(nD(r)){var n=r.data.payload;n&&(r.timestamp=n.lastActivityTimestamp+n.threshold)}var a=null==(t=this._instance.config.session_recording.compress_events)||t?function(e){if(1024>rN(e))return e;try{if(e.type===rT.FullSnapshot)return id({},e,{data:nL(e.data),cv:"2024-10"});if(e.type===rT.IncrementalSnapshot&&e.data.source===rP.Mutation)return id({},e,{cv:"2024-10",data:id({},e.data,{texts:nL(e.data.texts),attributes:nL(e.data.attributes),removes:nL(e.data.removes),adds:nL(e.data.adds)})});if(e.type===rT.IncrementalSnapshot&&e.data.source===rP.StyleSheetRule)return id({},e,{cv:"2024-10",data:id({},e.data,{adds:e.data.adds?nL(e.data.adds):void 0,removes:e.data.removes?nL(e.data.removes):void 0})})}catch(e){nA.error("could not compress event - will use uncompressed event",e)}return e}(r):r,o={$snapshot_bytes:rN(a),$snapshot_data:a,$session_id:this.Ct,$window_id:this.fi};this.status!==ng?this.Ui(o):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&tP){var e=this.yi(tP.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(e=>{Date.now()-e.enqueuedAt<=2e3&&this.Mi(e)})}}yi(e){var t=this._instance.config.session_recording;if(t.maskNetworkRequestFn){var i,s={url:e};return null==(i=s=t.maskNetworkRequestFn(s))?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,t=this.Nt,i=it(t)&&t>=0,s=it(e)&&i&&t<e;return this.status===n_||this.status===nm||this.status===ng||s?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&(function e(t,i){if(void 0===i&&(i=6606028.8),t.size>=i&&t.data.length>1){var s=Math.floor(t.data.length/2),r=t.data.slice(0,s),n=t.data.slice(s);return[e({size:rN(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),e({size:rN(n),data:n,sessionId:t.sessionId,windowId:t.windowId})].flatMap(e=>e)}return[t]})(this.C).forEach(e=>{this.Bi({$snapshot_bytes:e.size,$snapshot_data:e.data,$session_id:e.sessionId,$window_id:e.windowId,$lib:"web",$lib_version:tU.LIB_VERSION})}),this.pi())}Ui(e){var t,i=2+((null==(t=this.C)?void 0:t.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var t;this.Lt.triggerStatus(this.sessionId)===nx&&(null==(t=this._instance)||null==(t=t.persistence)||t.register({["url"===e?iV:iG]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),nA.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),nA.info("recording resumed"))}bi(){0!==this.Yt.Tt.length&&ie(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(e){nA.error("Could not activate event trigger",e)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;null==(e=this._instance.persistence)||e.register({[iH]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,t){this._instance.register_for_session({$session_recording_start_reason:e}),nA.info(e.replace("_"," "),t),tK(["recording_initialized","session_id_changed"],e)||this.ui(e,t)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var nq=il("[SegmentIntegration]"),nz="posthog-js";function nB(e,t){var{organization:i,projectId:s,prefix:r,severityAllowList:n=["error"]}=void 0===t?{}:t;return t=>{if(!("*"===n||n.includes(t.level))||!e.__loaded)return t;t.tags||(t.tags={});var a,o,l,c,u,d=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=d,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var h=(null==(a=t.exception)?void 0:a.values)||[],p=h.map(e=>id({},e,{stacktrace:e.stacktrace?id({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map(e=>id({},e,{platform:"web:javascript"}))}):void 0})),g={$exception_message:(null==(o=h[0])?void 0:o.value)||t.message,$exception_type:null==(l=h[0])?void 0:l.type,$exception_personURL:d,$exception_level:t.level,$exception_list:p,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(c=h[0])?void 0:c.value)||t.message,$sentry_exception_type:null==(u=h[0])?void 0:u.type,$sentry_tags:t.tags};return i&&s&&(g.$sentry_url=(r||"https://sentry.io/organizations/")+i+"/issues/?project="+s+"&query="+t.event_id),e.exceptions.sendExceptionEvent(g),t}}class nU{constructor(e,t,i,s,r){this.name=nz,this.setupOnce=function(n){n(nB(e,{organization:t,projectId:i,prefix:s,severityAllowList:r}))}}}var nH=null!=tP&&tP.location?sO(tP.location.hash,"__posthog")||sO(location.hash,"state"):null,nV="_postHogToolbarParams",nG=il("[Toolbar]"),nW=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(nW||{});class nK{constructor(e){this.instance=e}Hi(e){tB.ph_toolbar_state=e}Wi(){var e;return null!=(e=tB.ph_toolbar_state)?e:nW.UNINITIALIZED}maybeLoadToolbar(e,t,i){if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===i&&(i=void 0),!tP||!tM)return!1;e=null!=e?e:tP.location,i=null!=i?i:tP.history;try{if(!t){try{tP.localStorage.setItem("test","test"),tP.localStorage.removeItem("test")}catch(e){return!1}t=null==tP?void 0:tP.localStorage}var s,r=nH||sO(e.hash,"__posthog")||sO(e.hash,"state"),n=r?ib(()=>JSON.parse(atob(decodeURIComponent(r))))||ib(()=>JSON.parse(decodeURIComponent(r))):null;return n&&"ph_authorize"===n.action?((s=n).source="url",s&&Object.keys(s).length>0&&(n.desiredHash?e.hash=n.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((s=JSON.parse(t.getItem(nV)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch(e){return!1}}Gi(e){var t=tB.ph_load_toolbar||tB.ph_load_editor;!ie(t)&&t3(t)?t(e,this.instance):nG.warn("No toolbar load function found")}loadToolbar(e){var t,i=!(null==tM||!tM.getElementById(i7));if(!tP||i)return!1;var s="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,r=id({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},s?{instrument:!1}:{});return(tP.localStorage.setItem(nV,JSON.stringify(id({},r,{source:void 0}))),this.Wi()===nW.LOADED)?this.Gi(r):this.Wi()===nW.UNINITIALIZED&&(this.Hi(nW.LOADING),null==(t=tB.__PosthogExtensions__)||null==t.loadExternalDependency||t.loadExternalDependency(this.instance,"toolbar",e=>{if(e)return nG.error("[Toolbar] Failed to load",e),void this.Hi(nW.UNINITIALIZED);this.Hi(nW.LOADED),this.Gi(r)}),iS(tP,"turbolinks:load",()=>{this.Hi(nW.UNINITIALIZED),this.loadToolbar(r)})),!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,i){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===i&&(i=void 0),this.maybeLoadToolbar(e,t,i)}}var nY=il("[TracingHeaders]");class nJ{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var e,t;t6(this.Vi)&&(null==(e=tB.__PosthogExtensions__)||null==(e=e.tracingHeadersPatchFns)||e._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),t6(this.Ki)&&(null==(t=tB.__PosthogExtensions__)||null==(t=t.tracingHeadersPatchFns)||t._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var t,i;null!=(t=tB.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(i=tB.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"tracing-headers",t=>{if(t)return nY.error("failed to load script",t);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.J(this.nt):(null==(e=this.Vi)||e.call(this),null==(t=this.Ki)||t.call(this),this.Vi=void 0,this.Ki=void 0)}}var nX=il("[Web Vitals]");class nQ{constructor(e){var t;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),0!==this.C.metrics.length&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((e,t)=>id({},e,{["$web_vitals_"+t.name+"_event"]:id({},t),["$web_vitals_"+t.name+"_value"]:t.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=e=>{var t,i=null==(t=this._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(t6(i))nX.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var s=this.te();t6(s)||(ie(null==e?void 0:e.name)||ie(null==e?void 0:e.value)?nX.error("Invalid metric received",e):this.ie&&e.value>=this.ie?nX.error("Ignoring metric with value >= "+this.ie,e):(this.C.url!==s&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),t6(this.C.url)&&(this.C.url=s),this.C.firstMetricTimestamp=t6(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.C.metrics.push(id({},e,{$current_url:s,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var e,t,i,s,r=tB.__PosthogExtensions__;t6(r)||t6(r.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:i,onINP:s}=r.postHogWebVitalsCallbacks),e&&t&&i&&s?(this.allowedMetrics.indexOf("LCP")>-1&&e(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&s(this.Zi.bind(this)),this.i=!0):nX.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!(null==(t=this._instance.persistence)||!t.props[i$]),this.startIfEnabled()}get allowedMetrics(){var e,t,i=t4(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return t6(i)?(null==(t=this._instance.persistence)?void 0:t.props[iF])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(t4(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=t4(this._instance.config.capture_performance)&&it(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<e&&e<=6e4?9e5:e}get isEnabled(){var e=null==tL?void 0:tL.protocol;if("http:"!==e&&"https:"!==e)return nX.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=t4(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:ii(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return ii(t)?t:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(nX.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var t=t4(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=t4(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[i$]:t}),this._instance.persistence.register({[iF]:i})),this.Yi=t,this.startIfEnabled()}J(e){var t,i;null!=(t=tB.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks&&e(),null==(i=tB.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"web-vitals",t=>{t?nX.error("failed to load script",t):e()})}te(){var e=tP?tP.location.href:void 0;return e||nX.error("Could not determine current URL"),e}}var n0=il("[Heatmaps]");function n1(e){return t4(e)&&"clientX"in e&&"clientY"in e&&it(e.clientX)&&it(e.clientY)}class n2{constructor(e){var t;this.rageclicks=new sC,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!(null==(t=this.instance.persistence)||!t.props[iT])}get flushIntervalMilliseconds(){var e=5e3;return t4(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return t6(this.instance.config.capture_heatmaps)?t6(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this.i||(n0.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds));else{var e,t;clearInterval(null!=(e=this.ee)?e:void 0),null==(t=this.ne)||t.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[iT]:t}),this.Yi=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){tP&&tM&&(iS(tP,"beforeunload",this.se.bind(this)),iS(tM,"click",e=>this.ae(e||(null==tP?void 0:tP.event)),{capture:!0}),iS(tM,"mousemove",e=>this.le(e||(null==tP?void 0:tP.event)),{capture:!0}),this.ne=new re(this.instance,s8,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,t){var i=this.instance.scrollManager.scrollY(),s=this.instance.scrollManager.scrollX(),r=this.instance.scrollManager.scrollElement(),n=function(e,t,i){for(var s=e;s&&ss(s)&&!sr(s,"body")&&s!==i;){if(tK(t,null==tP?void 0:tP.getComputedStyle(s).position))return!0;s=sg(s)}return!1}(sh(e),["fixed","sticky"],r);return{x:e.clientX+(n?0:s),y:e.clientY+(n?0:i),target_fixed:n,type:t}}ae(e,t){var i;if(void 0===t&&(t="click"),!si(e.target)&&n1(e)){var s=this.ue(e,t);null!=(i=this.rageclicks)&&i.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.he(id({},s,{type:"rageclick"})),this.he(s)}}le(e){!si(e.target)&&n1(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(tP){var t=tP.location.href;this.C=this.C||{},this.C[t]||(this.C[t]=[]),this.C[t].push(e)}}se(){this.C&&!t5(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class n3{constructor(e){this._instance=e}doPageView(e,t){var i,s=this.ve(e,t);return this.ce={pathname:null!=(i=null==tP?void 0:tP.location.pathname)?i:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),s}doPageLeave(e){var t;return this.ve(e,null==(t=this.ce)?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null==(e=this.ce)?void 0:e.pageViewId}}ve(e,t){var i=this.ce;if(!i)return{$pageview_id:t};var s={$pageview_id:t,$prev_pageview_id:i.pageViewId},r=this._instance.scrollManager.getContext();if(r&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:n,lastScrollY:a,maxScrollY:o,maxContentHeight:l,lastContentY:c,maxContentY:u}=r;if(!(t6(n)||t6(a)||t6(o)||t6(l)||t6(c)||t6(u))){n=Math.ceil(n),a=Math.ceil(a),o=Math.ceil(o),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u);var d=n<=1?1:rt(a/n,0,1),h=n<=1?1:rt(o/n,0,1),p=l<=1?1:rt(c/l,0,1),g=l<=1?1:rt(u/l,0,1);s=i_(s,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:o,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:p,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:g})}}return i.pathname&&(s.$prev_pageview_pathname=i.pathname),i.timestamp&&(s.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),s}}var n4=function(e){var t,i,s,r,n="";for(t=i=0,s=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,r=0;r<s;r++){var a=e.charCodeAt(r),o=null;a<128?i++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),t7(o)||(i>t&&(n+=e.substring(t,i)),n+=o,t=i=r+1)}return i>t&&(n+=e.substring(t,e.length)),n},n5=!!tZ||!!tD,n6="text/plain",n9=(e,t)=>{var[i,s]=e.split("?"),r=id({},t);null==s||s.split("&").forEach(e=>{var[t]=e.split("=");delete r[t]});var n=sN(r);return i+"?"+(n=n?(s?s+"&":"")+n:s)},n8=(e,t)=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,t),n7=e=>{var{data:t,compression:i}=e;if(t){if(i===tG.GZipJS){var s=new Blob([nh(np(n8(t)),{mtime:0})],{type:n6});return{contentType:n6,body:s,estimatedSize:s.size}}if(i===tG.Base64){var r=(e=>"data="+encodeURIComponent("string"==typeof e?e:n8(e)))(function(e){var t,i,s,r,n,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,l=0,c="",u=[];if(!e)return e;e=n4(e);do t=(n=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++))>>18&63,i=n>>12&63,s=n>>6&63,r=63&n,u[l++]=a.charAt(t)+a.charAt(i)+a.charAt(s)+a.charAt(r);while(o<e.length);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(n8(t)));return{contentType:"application/x-www-form-urlencoded",body:r,estimatedSize:new Blob([r]).size}}var n=n8(t);return{contentType:"application/json",body:n,estimatedSize:new Blob([n]).size}}},ae=[];tD&&ae.push({transport:"fetch",method:e=>{var t,i,{contentType:s,body:r,estimatedSize:n}=null!=(t=n7(e))?t:{},a=new Headers;iv(e.headers,function(e,t){a.append(t,e)}),s&&a.append("Content-Type",s);var o=e.url,l=null;if(tq){var c=new tq;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),e.timeout)}}tD(o,id({method:(null==e?void 0:e.method)||"GET",headers:a,keepalive:"POST"===e.method&&52428.8>(n||0),body:r,signal:null==(i=l)?void 0:i.signal},e.fetchOptions)).then(t=>t.text().then(i=>{var s={statusCode:t.status,text:i};if(200===t.status)try{s.json=JSON.parse(i)}catch(e){io.error(e)}null==e.callback||e.callback(s)})).catch(t=>{io.error(t),null==e.callback||e.callback({statusCode:0,text:t})}).finally(()=>l?clearTimeout(l.timeout):null)}}),tZ&&ae.push({transport:"XHR",method:e=>{var t,i=new tZ;i.open(e.method||"GET",e.url,!0);var{contentType:s,body:r}=null!=(t=n7(e))?t:{};iv(e.headers,function(e,t){i.setRequestHeader(t,e)}),s&&i.setRequestHeader("Content-Type",s),e.timeout&&(i.timeout=e.timeout),i.withCredentials=!0,i.onreadystatechange=()=>{if(4===i.readyState){var t={statusCode:i.status,text:i.responseText};if(200===i.status)try{t.json=JSON.parse(i.responseText)}catch(e){}null==e.callback||e.callback(t)}},i.send(r)}}),null!=tR&&tR.sendBeacon&&ae.push({transport:"sendBeacon",method:e=>{var t=n9(e.url,{beacon:"1"});try{var i,{contentType:s,body:r}=null!=(i=n7(e))?i:{},n="string"==typeof r?new Blob([r],{type:s}):r;tR.sendBeacon(t,n)}catch(e){}}});var at=function(e,t){if(!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(e){return!1}};function ai(e,t,i){return n8({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:i})}var as={exact:(e,t)=>t.some(t=>e.some(e=>t===e)),is_not:(e,t)=>t.every(t=>e.every(e=>t!==e)),regex:(e,t)=>t.some(t=>e.some(e=>at(t,e))),not_regex:(e,t)=>t.every(t=>e.every(e=>!at(t,e))),icontains:(e,t)=>t.map(ar).some(t=>e.map(ar).some(e=>t.includes(e))),not_icontains:(e,t)=>t.map(ar).every(t=>e.map(ar).every(e=>!t.includes(e)))},ar=e=>e.toLowerCase(),an=il("[Error tracking]");class aa{constructor(e){var t,i;this.fe=[],this._instance=e,this.fe=null!=(t=null==(i=this._instance.persistence)?void 0:i.get_property(iO))?t:[]}onRemoteConfig(e){var t,i,s=null!=(t=null==(i=e.errorTracking)?void 0:i.suppressionRules)?t:[];this.fe=s,this._instance.persistence&&this._instance.persistence.register({[iO]:this.fe})}sendExceptionEvent(e){if(!this.pe(e))return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"});an.info("Skipping exception capture because a suppression rule matched")}pe(e){var t=e.$exception_list;if(!t||!t2(t)||0===t.length)return!1;var i=t.reduce((e,t)=>{var{type:i,value:s}=t;return t9(i)&&i.length>0&&e.$exception_types.push(i),t9(s)&&s.length>0&&e.$exception_values.push(s),e},{$exception_types:[],$exception_values:[]});return this.fe.some(e=>{var t=e.values.map(e=>{var t,s=as[e.operator],r=t2(e.value)?e.value:[e.value],n=null!=(t=i[e.key])?t:[];return r.length>0&&s(r,n)});return"OR"===e.type?t.some(Boolean):t.every(Boolean)})}}var ao="Mobile",al="Android",ac="Tablet",au=al+" "+ac,ad="iPad",ah="Apple",ap=ah+" Watch",ag="Safari",af="BlackBerry",av="Samsung",a_=av+"Browser",am=av+" Internet",ay="Chrome",ab=ay+" OS",ax=ay+" iOS",aw="Internet Explorer",ak=aw+" "+ao,aE="Opera",aS=aE+" Mini",aC="Edge",aj="Microsoft "+aC,aI="Firefox",aN=aI+" iOS",aT="Nintendo",aP="PlayStation",aO="Xbox",a$=al+" "+ao,aA=ao+" "+ag,aF="Windows",aR=aF+" Phone",aM="Nokia",aL="Ouya",aD="Generic",aZ=aD+" "+ao.toLowerCase(),aq=aD+" "+ac.toLowerCase(),az="Konqueror",aB="(\\d+(\\.\\d+)?)",aU=RegExp("Version/"+aB),aH=RegExp(aO,"i"),aV=RegExp(aP+" \\w+","i"),aG=RegExp(aT+" \\w+","i"),aW=RegExp(af+"|PlayBook|BB10","i"),aK={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},aY=(e,t)=>t&&tK(t,ah)||function(e){return tK(e,ag)&&!tK(e,ay)&&!tK(e,al)}(e),aJ=function(e,t){return t=t||"",tK(e," OPR/")&&tK(e,"Mini")?aS:tK(e," OPR/")?aE:aW.test(e)?af:tK(e,"IE"+ao)||tK(e,"WPDesktop")?ak:tK(e,a_)?am:tK(e,aC)||tK(e,"Edg/")?aj:tK(e,"FBIOS")?"Facebook "+ao:tK(e,"UCWEB")||tK(e,"UCBrowser")?"UC Browser":tK(e,"CriOS")?ax:tK(e,"CrMo")||tK(e,ay)?ay:tK(e,al)&&tK(e,ag)?a$:tK(e,"FxiOS")?aN:tK(e.toLowerCase(),az.toLowerCase())?az:aY(e,t)?tK(e,ao)?aA:ag:tK(e,aI)?aI:tK(e,"MSIE")||tK(e,"Trident/")?aw:tK(e,"Gecko")?aI:""},aX={[ak]:[RegExp("rv:"+aB)],[aj]:[RegExp(aC+"?\\/"+aB)],[ay]:[RegExp("("+ay+"|CrMo)\\/"+aB)],[ax]:[RegExp("CriOS\\/"+aB)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+aB)],[ag]:[aU],[aA]:[aU],[aE]:[RegExp("(Opera|OPR)\\/"+aB)],[aI]:[RegExp(aI+"\\/"+aB)],[aN]:[RegExp("FxiOS\\/"+aB)],[az]:[RegExp("Konqueror[:/]?"+aB,"i")],[af]:[RegExp(af+" "+aB),aU],[a$]:[RegExp("android\\s"+aB,"i")],[am]:[RegExp(a_+"\\/"+aB)],[aw]:[RegExp("(rv:|MSIE )"+aB)],Mozilla:[RegExp("rv:"+aB)]},aQ=function(e,t){var i=aX[aJ(e,t)];if(t6(i))return null;for(var s=0;s<i.length;s++){var r=i[s],n=e.match(r);if(n)return parseFloat(n[n.length-2])}return null},a0=[[RegExp(aO+"; "+aO+" (.*?)[);]","i"),e=>[aO,e&&e[1]||""]],[RegExp(aT,"i"),[aT,""]],[RegExp(aP,"i"),[aP,""]],[aW,[af,""]],[RegExp(aF,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[aR,""];if(new RegExp(ao).test(t)&&!/IEMobile\b/.test(t))return[aF+" "+ao,""];var i=/Windows NT ([0-9.]+)/i.exec(t);if(i&&i[1]){var s=aK[i[1]]||"";return/arm/i.test(t)&&(s="RT"),[aF,s]}return[aF,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>e&&e[3]?["iOS",[e[3],e[4],e[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=t6(e[2])?e[3]:e[2]),["watchOS",t]}],[RegExp("("+al+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+al+")","i"),e=>e&&e[2]?[al,[e[2],e[3],e[4]||"0"].join(".")]:[al,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var i=[e[1],e[2],e[3]||"0"];t[1]=i.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[ab,""]],[/Linux|debian/i,["Linux",""]]],a1=function(e){return aG.test(e)?aT:aV.test(e)?aP:aH.test(e)?aO:RegExp(aL,"i").test(e)?aL:RegExp("("+aR+"|WPDesktop)","i").test(e)?aR:/iPad/.test(e)?ad:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?ap:aW.test(e)?af:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":RegExp(aM,"i").test(e)?aM:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(ao).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?al:au:al:RegExp("(pda|"+ao+")","i").test(e)?aZ:RegExp(ac,"i").test(e)&&!RegExp(ac+" pc","i").test(e)?aq:""},a2="https?://(.*)",a3=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],a4=im(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],a3),a5="<masked>",a6=["li_fat_id"];function a9(e,t,i){if(!tM)return{};var s,r=t?im([],a3,i||[]):[],n=a8(sP(tM.URL,r,a5),e);return i_((s={},iv(a6,function(e){var t=sY.D(e);s[e]=t||null}),s),n)}function a8(e,t){var i=a4.concat(t||[]),s={};return iv(i,function(t){var i=sT(e,t);s[t]=i||null}),s}function a7(e){var t=e?0===e.search(a2+"google.([^/?]*)")?"google":0===e.search(a2+"bing.com")?"bing":0===e.search(a2+"yahoo.com")?"yahoo":0===e.search(a2+"duckduckgo.com")?"duckduckgo":null:null,i={};if(!t7(t)){i.$search_engine=t;var s=tM?sT(tM.referrer,"yahoo"!=t?"q":"p"):"";s.length&&(i.ph_keyword=s)}return i}function oe(){return navigator.language||navigator.userLanguage}function ot(){return(null==tM?void 0:tM.referrer)||"$direct"}function oi(e,t){var i=e?im([],a3,t||[]):[],s=null==tL?void 0:tL.href.substring(0,1e3);return{r:ot().substring(0,1e3),u:s?sP(s,i,a5):void 0}}function os(e){var t,{r:i,u:s}=e,r={$referrer:i,$referring_domain:null==i?void 0:"$direct"==i?"$direct":null==(t=sI(i))?void 0:t.host};if(s){r.$current_url=s;var n=sI(s);r.$host=null==n?void 0:n.host,r.$pathname=null==n?void 0:n.pathname,i_(r,a8(s))}return i&&i_(r,a7(i)),r}function or(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}var on=il("[FeatureFlags]"),oa="$active_feature_flags",oo="$override_feature_flags",ol="$feature_flag_payloads",oc="$override_feature_flag_payloads",ou="$feature_flag_request_id",od=e=>{var t={};for(var[i,s]of iy(e||{}))s&&(t[i]=s);return t},oh=e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(e=>{var i;return[e,null!=(i=t[e].variant)?i:t[e].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(e=>t[e].enabled).filter(e=>{var i;return null==(i=t[e].metadata)?void 0:i.payload}).map(e=>{var i;return[e,null==(i=t[e].metadata)?void 0:i.payload]}))):on.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e},op=function(e){return e.FeatureFlags="feature_flags",e.Recordings="recordings",e}({});class og{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(iY),t=this._instance.get_property(oo),i=this._instance.get_property(oc);if(!i&&!t)return e||{};var s=i_({},e||{});for(var r of[...new Set([...Object.keys(i||{}),...Object.keys(t||{})])]){var n,a,o=s[r],l=null==t?void 0:t[r],c=t6(l)?null!=(n=null==o?void 0:o.enabled)&&n:!!l,u=t6(l)?o.variant:"string"==typeof l?l:void 0,d=null==i?void 0:i[r],h=id({},o,{enabled:c,variant:c?null!=u?u:null==o?void 0:o.variant:void 0});c!==(null==o?void 0:o.enabled)&&(h.original_enabled=null==o?void 0:o.enabled),u!==(null==o?void 0:o.variant)&&(h.original_variant=null==o?void 0:o.variant),d&&(h.metadata=id({},null==o?void 0:o.metadata,{payload:d,original_payload:null==o||null==(a=o.metadata)?void 0:a.payload})),s[r]=h}return this.ge||(on.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:s}),this.ge=!0),s}getFlagVariants(){var e=this._instance.get_property(iW),t=this._instance.get_property(oo);if(!t)return e||{};for(var i=i_({},e),s=Object.keys(t),r=0;r<s.length;r++)i[s[r]]=t[s[r]];return this.ge||(on.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(ol),t=this._instance.get_property(oc);if(!t)return e||{};for(var i=i_({},e||{}),s=Object.keys(t),r=0;r<s.length;r++)i[s[r]]=t[s[r]];return this.ge||(on.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var t;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:id({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(iJ)||{}),group_properties:this._instance.get_property(iX)};(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var s=this._instance.config.__preview_remote_config,r=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",n=this._instance.requestRouter.endpointFor("api",(s?"/flags/?v=2":"/flags/?v=2&config=true")+r);s&&(i.timezone=or()),this.me=!0,this._instance.Ee({method:"POST",url:n,data:i,compression:this._instance.config.disable_compression?void 0:tG.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:e=>{var t,s,r,n=!0;200===e.statusCode&&(this.ye||(this.$anon_distinct_id=void 0),n=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie(null!=(r=e.json)?r:{})),(!i.disable_flags||this.ye)&&((this.Se=!n,e.json&&null!=(s=e.json.quotaLimited)&&s.includes(op.FeatureFlags))?on.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(i.disable_flags||this.receivedFeatureFlags(null!=(t=e.json)?t:{},n),this.ye&&(this.ye=!1,this.ke())))}})}}getFeatureFlag(e,t){if(void 0===t&&(t={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],s=""+i,r=this._instance.get_property(ou)||void 0,n=this._instance.get_property(i1)||{};if((t.send_event||!("send_event"in t))&&(!(e in n)||!n[e].includes(s))){t2(n[e])?n[e].push(s):n[e]=[s],null==(l=this._instance.persistence)||l.register({[i1]:n});var a=this.getFeatureFlagDetails(e),o={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:r,$feature_flag_bootstrapped_response:(null==(c=this._instance.config.bootstrap)||null==(c=c.featureFlags)?void 0:c[e])||null,$feature_flag_bootstrapped_payload:(null==(u=this._instance.config.bootstrap)||null==(u=u.featureFlagPayloads)?void 0:u[e])||null,$used_bootstrap_value:!this.Se};t6(null==a||null==(d=a.metadata)?void 0:d.version)||(o.$feature_flag_version=a.metadata.version);var l,c,u,d,h,p,g,f,v,_,m=null!=(h=null==a||null==(p=a.reason)?void 0:p.description)?h:null==a||null==(g=a.reason)?void 0:g.code;m&&(o.$feature_flag_reason=m),null!=a&&null!=(f=a.metadata)&&f.id&&(o.$feature_flag_id=a.metadata.id),t6(null==a?void 0:a.original_variant)&&t6(null==a?void 0:a.original_enabled)||(o.$feature_flag_original_response=t6(a.original_variant)?a.original_enabled:a.original_variant),null!=a&&null!=(v=a.metadata)&&v.original_payload&&(o.$feature_flag_original_payload=null==a||null==(_=a.metadata)?void 0:_.original_payload),this._instance.capture("$feature_flag_called",o)}return i}on.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:tG.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var s,r=null==(s=i.json)?void 0:s.featureFlagPayloads;t((null==r?void 0:r[e])||void 0)}})}isFeatureEnabled(e,t){if(void 0===t&&(t={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);on.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),s=this.getFlagPayloads(),r=this.getFlagsWithDetails();!function(e,t,i,s,r){void 0===i&&(i={}),void 0===s&&(s={}),void 0===r&&(r={});var n=oh(e),a=n.flags,o=n.featureFlags,l=n.featureFlagPayloads;if(o){var c=e.requestId;if(t2(o)){on.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var u={};if(o)for(var d=0;d<o.length;d++)u[o[d]]=!0;t&&t.register({[oa]:o,[iW]:u})}else{var h=o,p=l,g=a;e.errorsWhileComputingFlags&&(h=id({},i,h),p=id({},s,p),g=id({},r,g)),t&&t.register(id({[oa]:Object.keys(od(h)),[iW]:h||{},[ol]:p||{},[iY]:g||{}},c?{[ou]:c}:{}))}}}(e,this._instance.persistence,i,s,r),this.Pe(t)}}override(e,t){void 0===t&&(t=!1),on.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return on.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(oo),this._instance.persistence.unregister(oc),void this.Pe();if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t;if(this.ge=!!(null!=(t=e.suppressWarning)&&t),"flags"in e){if(!1===e.flags)this._instance.persistence.unregister(oo);else if(e.flags)if(t2(e.flags)){for(var i={},s=0;s<e.flags.length;s++)i[e.flags[s]]=!0;this._instance.persistence.register({[oo]:i})}else this._instance.persistence.register({[oo]:e.flags})}return"payloads"in e&&(!1===e.payloads?this._instance.persistence.unregister(oc):e.payloads&&this._instance.persistence.register({[oc]:e.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:t,flagVariants:i}=this.Re();e(t,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t){var i,s=(this._instance.get_property(iK)||[]).find(t=>t.flagKey===e),r={["$feature_enrollment/"+e]:t},n={$feature_flag:e,$feature_enrollment:t,$set:r};s&&(n.$early_access_feature_name=s.name),this._instance.capture("$feature_enrollment_update",n),this.setPersonPropertiesForFlags(r,!1);var a=id({},this.getFlagVariants(),{[e]:t});null==(i=this._instance.persistence)||i.register({[oa]:Object.keys(od(a)),[iW]:a}),this.Pe()}getEarlyAccessFeatures(e,t,i){void 0===t&&(t=!1);var s=this._instance.get_property(iK),r=i?"&"+i.map(e=>"stage="+e).join("&"):"";if(s&&!t)return e(s);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+r),method:"GET",callback:t=>{var i;if(t.json){var s=t.json.earlyAccessFeatures;return null==(i=this._instance.persistence)||i.register({[iK]:s}),e(s)}}})}Re(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(e=>t[e]),flagVariants:Object.keys(t).filter(e=>t[e]).reduce((e,i)=>(e[i]=t[i],e),{})}}Pe(e){var{flags:t,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(s=>s(t,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0);var i=this._instance.get_property(iJ)||{};this._instance.register({[iJ]:id({},i,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(iJ)}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0);var i=this._instance.get_property(iX)||{};0!==Object.keys(i).length&&Object.keys(i).forEach(t=>{i[t]=id({},i[t],e[t]),delete e[t]}),this._instance.register({[iX]:id({},i,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(iX)||{};this._instance.register({[iX]:id({},t,{[e]:{}})})}else this._instance.unregister(iX)}reset(){this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this.$anon_distinct_id=void 0,this.xe(),this.ge=!1}}var of=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class ov{constructor(e,t){this.S=e,this.props={},this.Te=!1,this.Me=(e=>{var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&io.info("Persistence loaded",e.persistence,id({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.Fe}Ce(e){-1===of.indexOf(e.persistence.toLowerCase())&&(io.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&sX.O()?sX:"localstorage+cookie"===t&&s0.O()?s0:"sessionstorage"===t&&s4.O()?s4:"memory"===t?s2:"cookie"===t?sY:s0.O()?s0:sY}properties(){var e={};return iv(this.props,function(t,i){if(i===iW&&t4(t))for(var s,r=Object.keys(t),n=0;n<r.length;n++)e["$feature/"+r[n]]=t[r[n]];else s=!1,(t7(st)?s:tF&&st.indexOf===tF?-1!=st.indexOf(i):(iv(st,function(e){if(s||(s=e===i))return ip}),s))||(e[i]=t)}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=i_({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,t,i){if(t4(e)){t6(t)&&(t="None"),this.Oe=t6(i)?this.Le:i;var s=!1;if(iv(e,(e,i)=>{this.props.hasOwnProperty(i)&&this.props[i]!==t||(this.props[i]=e,s=!0)}),s)return this.save(),!0}return!1}register(e,t){if(t4(e)){this.Oe=t6(t)?this.Le:t;var i=!1;if(iv(e,(t,s)=>{e.hasOwnProperty(s)&&this.props[s]!==t&&(this.props[s]=t,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=a9(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);t5(iw(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=null==tM?void 0:tM.referrer)?a7(e):{})}update_referrer_info(){var e;this.register_once({$referrer:ot(),$referring_domain:null!=tM&&tM.referrer&&(null==(e=sI(tM.referrer))?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[i5]||this.props[i6]||this.register_once({[i9]:oi(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};iv([i6,i5],t=>{var i=this.props[t];i&&iv(i,function(t,i){e["$initial_"+tJ(i)]=t})});var t,i,s=this.props[i9];return s&&i_(e,(t=os(s),i={},iv(t,function(e,t){i["$initial_"+tJ(t)]=e}),i)),e}safe_merge(e){return iv(this.props,function(t,i){i in e||(e[i]=t)}),e}update_config(e,t,i){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!i),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var s=this.Ce(e),r=this.props;this.clear(),this.B=s,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,t){var i=this.props[iI]||{};i[e]=t,this.props[iI]=i,this.save()}remove_event_timer(e){var t=(this.props[iI]||{})[e];return t6(t)||(delete this.props[iI][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}class o_{constructor(){this.je={},this.je={}}on(e,t){return this.je[e]||(this.je[e]=[]),this.je[e].push(t),()=>{this.je[e]=this.je[e].filter(e=>e!==t)}}emit(e,t){for(var i of this.je[e]||[])i(t);for(var s of this.je["*"]||[])s(e,t)}}class om{constructor(e){this.Ne=new o_,this.ze=(e,t)=>this.Ue(e,t)&&this.qe(e,t)&&this.Be(e,t),this.Ue=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e,t;t6(null==(e=this._instance)?void 0:e.Ge)||null==(t=this._instance)||t.Ge((e,t)=>{this.on(e,t)})}register(e){var t,i;if(!t6(null==(t=this._instance)?void 0:t.Ge)&&(e.forEach(e=>{var t,i;null==(t=this.We)||t.add(e),null==(i=e.steps)||i.forEach(e=>{var t;null==(t=this.He)||t.add((null==e?void 0:e.event)||"")})}),null!=(i=this._instance)&&i.autocapture)){var s,r=new Set;e.forEach(e=>{var t;null==(t=e.steps)||t.forEach(e=>{null!=e&&e.selector&&r.add(null==e?void 0:e.selector)})}),null==(s=this._instance)||s.autocapture.setElementSelectors(r)}}on(e,t){var i;null!=t&&0!=e.length&&(this.He.has(e)||this.He.has(null==t?void 0:t.event))&&this.We&&(null==(i=this.We)?void 0:i.size)>0&&this.We.forEach(e=>{this.Je(t,e)&&this.Ne.emit("actionCaptured",e.name)})}Ve(e){this.onAction("actionCaptured",t=>e(t))}Je(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var i of t.steps)if(this.ze(e,i))return!0;return!1}onAction(e,t){return this.Ne.on(e,t)}qe(e,t){if(null!=t&&t.url){var i,s=null==e||null==(i=e.properties)?void 0:i.$current_url;if(!s||"string"!=typeof s||!om.Ke(s,null==t?void 0:t.url,(null==t?void 0:t.url_matching)||"contains"))return!1}return!0}static Ke(e,t,i){switch(i){case"regex":return!!tP&&at(e,t);case"exact":return t===e;case"contains":return at(e,om.Ye(t).replace(/_/g,".").replace(/%/g,".*"));default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,t){if((null!=t&&t.href||null!=t&&t.tag_name||null!=t&&t.text)&&!this.Xe(e).some(e=>!(null!=t&&t.href&&!om.Ke(e.href||"",null==t?void 0:t.href,(null==t?void 0:t.href_matching)||"exact"))&&(null==t||!t.tag_name||e.tag_name===(null==t?void 0:t.tag_name))&&!(null!=t&&t.text&&!om.Ke(e.text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")&&!om.Ke(e.$el_text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact"))))return!1;if(null!=t&&t.selector){var i,s=null==e||null==(i=e.properties)?void 0:i.$element_selectors;if(!s||!s.includes(null==t?void 0:t.selector))return!1}return!0}Xe(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}var oy=il("[Surveys]"),ob="seenSurvey_",ox=(e,t)=>{var i="$survey_"+t+"/"+e.id;return e.current_iteration&&e.current_iteration>0&&(i="$survey_"+t+"/"+e.id+"/"+e.current_iteration),i};class ow{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var t;t6(null==(t=this._instance)?void 0:t.Ge)||(this.tr(e),this.ir(e))}ir(e){var t=e.filter(e=>{var t,i;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(i=e.conditions)||null==(i=i.actions)||null==(i=i.values)?void 0:i.length)>0});0!==t.length&&(null==this.er&&(this.er=new om(this._instance),this.er.init(),this.er.Ve(e=>{this.onAction(e)})),t.forEach(e=>{var t,i,s,r,n;e.conditions&&null!=(t=e.conditions)&&t.actions&&null!=(i=e.conditions)&&null!=(i=i.actions)&&i.values&&(null==(s=e.conditions)||null==(s=s.actions)||null==(s=s.values)?void 0:s.length)>0&&(null==(r=this.er)||r.register(e.conditions.actions.values),null==(n=e.conditions)||null==(n=n.actions)||null==(n=n.values)||n.forEach(t=>{if(t&&t.name){var i=this.Ze.get(t.name);i&&i.push(e.id),this.Ze.set(t.name,i||[e.id])}}))}))}tr(e){var t;0!==e.filter(e=>{var t,i;return(null==(t=e.conditions)?void 0:t.events)&&(null==(i=e.conditions)||null==(i=i.events)||null==(i=i.values)?void 0:i.length)>0}).length&&(null==(t=this._instance)||t.Ge((e,t)=>{this.onEvent(e,t)}),e.forEach(e=>{var t;null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||t.forEach(t=>{if(t&&t.name){var i=this.Qe.get(t.name);i&&i.push(e.id),this.Qe.set(t.name,i||[e.id])}})}))}onEvent(e,t){var i,s=(null==(i=this._instance)||null==(i=i.persistence)?void 0:i.props[i0])||[];if("survey shown"===e&&t&&s.length>0){oy.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:s});var r,n=null==t||null==(r=t.properties)?void 0:r.$survey_id;if(n){var a=s.indexOf(n);a>=0&&(s.splice(a,1),this.rr(s))}}else this.Qe.has(e)&&(oy.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(s.concat(this.Qe.get(e)||[])))}onAction(e){var t,i=(null==(t=this._instance)||null==(t=t.persistence)?void 0:t.props[i0])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var t;null==(t=this._instance)||null==(t=t.persistence)||t.register({[i0]:[...new Set(e)]})}getSurveys(){var e;return(null==(e=this._instance)||null==(e=e.persistence)?void 0:e.props[i0])||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class ok{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var t=e.surveys;if(ie(t))return oy.warn("Flags not loaded yet. Not loading surveys.");var i=t2(t);this.nr=i?t.length>0:t,oy.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var i=localStorage.key(t);(null!=i&&i.startsWith(ob)||null!=i&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(e=>localStorage.removeItem(e))}loadIfEnabled(){if(!this.ar)if(this.ur)oy.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)oy.info("Disabled. Not loading surveys.");else{var e=null==tB?void 0:tB.__PosthogExtensions__;if(e){var t=this.nr;if(!t6(t)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,t);var s=e.loadExternalDependency;if(!s)return void this.vr("PostHog loadExternalDependency extension not found.");s(this._instance,"surveys",i=>{i||!e.generateSurveys?this.vr("Could not load surveys script",i):this.dr(e.generateSurveys,t)})}catch(e){throw this.vr("Error initializing surveys",e),e}finally{this.ur=!1}}}else oy.error("PostHog Extensions not found.")}}dr(e,t){this.ar=e(this._instance,t),this._surveyEventReceiver=new ow(this._instance),oy.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,t){oy.error(e,t),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(t=>t!==e)}}getSurveys(e,t){if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return oy.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(iQ);if(i&&!t)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:t=>{this.lr=!1;var i=t.statusCode;if(200!==i||!t.json){var s="Surveys API could not be loaded, status: "+i;return oy.error(s),e([],{isLoaded:!1,error:s})}var r,n,a=t.json.surveys||[],o=a.filter(e=>{var t,i;return!(!e.start_date||e.end_date)&&(!(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||!t.length)||!(null==(i=e.conditions)||null==(i=i.actions)||null==(i=i.values)||!i.length))});return o.length>0&&(null==(n=this._surveyEventReceiver)||n.register(o)),null==(r=this._instance.persistence)||r.register({[iQ]:a}),e(a,{isLoaded:!0})}})}catch(e){throw this.lr=!1,e}}cr(e){for(var t of this.hr)try{e.isLoaded?this.getSurveys(t):t([],e)}catch(e){oy.error("Error in survey callback",e)}}getActiveMatchingSurveys(e,t){if(void 0===t&&(t=!1),!ie(this.ar))return this.ar.getActiveMatchingSurveys(e,t);oy.warn("init was not called")}pr(e){var t=null;return this.getSurveys(i=>{var s;t=null!=(s=i.find(t=>t.id===e))?s:null}),t}gr(e){if(ie(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this.pr(e):e;return t?this.ar.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(ie(this.ar))return oy.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.gr(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return ie(this.ar)?(oy.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(t=>{var s,r=null!=(s=t.find(t=>t.id===e))?s:null;if(r){var n=this.gr(r);i({visible:n.eligible,disabledReason:n.reason})}else i({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t){if(ie(this.ar))oy.warn("init was not called");else{var i=this.pr(e),s=null==tM?void 0:tM.querySelector(t);i?s?this.ar.renderSurvey(i,s):oy.warn("Survey element not found"):oy.warn("Survey not found")}}}(function(e){e.Button="button",e.Tab="tab",e.Selector="selector"})({}),function(e){e.TopLeft="top_left",e.TopRight="top_right",e.TopCenter="top_center",e.MiddleLeft="middle_left",e.MiddleRight="middle_right",e.MiddleCenter="middle_center",e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}({}),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}({}),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}({}),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}({}),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}({});var oE=function(e){return e.SHOWN="survey shown",e.DISMISSED="survey dismissed",e.SENT="survey sent",e}({}),oS=function(e){return e.SURVEY_ID="$survey_id",e.SURVEY_NAME="$survey_name",e.SURVEY_RESPONSE="$survey_response",e.SURVEY_ITERATION="$survey_iteration",e.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",e.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",e.SURVEY_SUBMISSION_ID="$survey_submission_id",e.SURVEY_QUESTIONS="$survey_questions",e.SURVEY_COMPLETED="$survey_completed",e}({}),oC=il("[RateLimiter]");class oj{constructor(e){var t,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(e=>{oC.info((e||"events")+" is quota limited."),this.serverLimits[e]=(new Date).getTime()+6e4})}catch(e){return void oC.warn('could not rate limit - continuing. Error: "'+(null==e?void 0:e.message)+'"',{text:t})}},this.instance=e,this.captureEventsPerSecond=(null==(t=e.config.rate_limiting)?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(i=e.config.rate_limiting)?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){void 0===e&&(e=!1);var t,i,s,r=(new Date).getTime(),n=null!=(t=null==(i=this.instance.persistence)?void 0:i.get_property(i4))?t:{tokens:this.captureEventsBurstLimit,last:r};n.tokens+=(r-n.last)/1e3*this.captureEventsPerSecond,n.last=r,n.tokens>this.captureEventsBurstLimit&&(n.tokens=this.captureEventsBurstLimit);var a=n.tokens<1;return a||e||(n.tokens=Math.max(0,n.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,null==(s=this.instance.persistence)||s.set_property(i4,n),{isRateLimited:a,remainingTokens:n.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var oI=il("[RemoteConfig]");class oN{constructor(e){this._instance=e}get remoteConfig(){var e;return null==(e=tB._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.config}_r(e){var t,i;null!=(t=tB.__PosthogExtensions__)&&t.loadExternalDependency?null==(i=tB.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(oI.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return oI.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void oI.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return oI.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(e=>{this.Ie(e)});this.Ie(e)})}catch(e){oI.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):oI.info("__preview_remote_config is disabled. Logging config instead",e):oI.error("Failed to fetch remote config from PostHog.")}}class oT{constructor(e,t){this.br=!0,this.yr=[],this.wr=rt((null==t?void 0:t.flush_interval_ms)||3e3,250,5e3,"flush interval",3e3),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=Object.values(this.yr.length>0?this.Ir():{});[...e.filter(e=>0===e.url.indexOf("/e")),...e.filter(e=>0!==e.url.indexOf("/e"))].map(e=>{this.Sr(id({},e,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var t=this.Ir();for(var i in t)!function(){var s=t[i],r=(new Date).getTime();s.data&&t2(s.data)&&iv(s.data,e=>{e.offset=Math.abs(e.timestamp-r),delete e.timestamp}),e.Sr(s)}()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return iv(this.yr,t=>{var i,s=(t?t.batchKey:null)||t.url;t6(e[s])&&(e[s]=id({},t,{data:[]})),null==(i=e[s].data)||i.push(t.data)}),this.yr=[],e}}var oP=["retriesPerformedSoFar"];class oO{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!t6(tP)&&"onLine"in tP.navigator&&(this.Tr=tP.navigator.onLine,iS(tP,"online",()=>{this.Tr=!0,this.se()}),iS(tP,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,i=ih(e,oP);it(t)&&t>0&&(i.url=n9(i.url,{retry_count:t})),this._instance.Ee(id({},i,{callback:e=>{200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.Mr(id({retriesPerformedSoFar:t},i)):null==i.callback||i.callback(e)}}))}Mr(e){var t,i,s,r=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=r+1;var n=(s=(Math.random()-.5)*((i=Math.min(18e5,t=3e3*Math.pow(2,r)))-t/2),Math.ceil(i+s)),a=Date.now()+n;this.yr.push({retryAt:a,requestOptions:e});var o="Enqueued failed request for retry in "+n;navigator.onLine||(o+=" (Browser is offline)"),io.warn(o),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),t=[],i=this.yr.filter(i=>i.retryAt<e||(t.push(i),!1));if(this.yr=t,i.length>0)for(var{requestOptions:s}of i)this.retriableRequest(s)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(id({},e,{transport:"sendBeacon"}))}catch(e){io.error(e)}this.yr=[]}}class o${constructor(e){this.Or=()=>{this.Ar||(this.Ar={});var e,t,i,s,r=this.scrollElement(),n=this.scrollY(),a=r?Math.max(0,r.scrollHeight-r.clientHeight):0,o=n+((null==r?void 0:r.clientHeight)||0),l=(null==r?void 0:r.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(n),this.Ar.maxScrollY=Math.max(n,null!=(e=this.Ar.maxScrollY)?e:0),this.Ar.maxScrollHeight=Math.max(a,null!=(t=this.Ar.maxScrollHeight)?t:0),this.Ar.lastContentY=o,this.Ar.maxContentY=Math.max(o,null!=(i=this.Ar.maxContentY)?i:0),this.Ar.maxContentHeight=Math.max(l,null!=(s=this.Ar.maxContentHeight)?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){iS(tP,"scroll",this.Or,{capture:!0}),iS(tP,"scrollend",this.Or,{capture:!0}),iS(tP,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==tP?void 0:tP.document.documentElement;for(var e of t2(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]){var t=null==tP?void 0:tP.document.querySelector(e);if(t)return t}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return tP&&(tP.scrollY||tP.pageYOffset||tP.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return tP&&(tP.scrollX||tP.pageXOffset||tP.document.documentElement.scrollLeft)||0}}var oA=e=>oi(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties);class oF{constructor(e,t,i,s){this.Dr=e=>{var t=this.Lr();if(!t||t.sessionId!==e){var i={sessionId:e,props:this.jr(this._instance)};this.Nr.register({[i3]:i})}},this._instance=e,this.zr=t,this.Nr=i,this.jr=s||oA,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[i3]}getSetOnceProps(){var e,t=null==(e=this.Lr())?void 0:e.props;return t?"r"in t?os(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return iv(iw(this.getSetOnceProps()),(t,i)=>{"$current_url"===i&&(i="url"),e["$session_entry_"+tJ(i)]=t}),e}}var oR=il("[SessionId]");class oM{constructor(e,t,i){if(this.Ur=[],!e.persistence)throw Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=t||sV,this.Br=i||sV;var s,r=this.S.persistence_name||this.S.token,n=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*rt(n,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+r+"_window_id",this.Gr="ph_"+r+"_primary_window_exists",this.Jr()){var a=s4.L(this.Wr),o=s4.L(this.Gr);a&&!o?this.fi=a:s4.N(this.Wr),s4.j(this.Gr,!0)}if(null!=(s=this.S.bootstrap)&&s.sessionID)try{var l=(e=>{var t=e.replace(/-/g,"");if(32!==t.length)throw Error("Not a valid UUID");if("7"!==t[12])throw Error("Not a UUIDv7");return parseInt(t.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){oR.error("Invalid sessionID in bootstrap",e)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return t6(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(t=>t!==e)}}Jr(){return"memory"!==this.S.persistence&&!this.Nr.Fe&&s4.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&s4.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?s4.L(this.Wr):null}Vr(e,t,i){e===this.Ct&&t===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=t,this.Ct=e,this.Nr.register({[iU]:[t,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[iU];return t2(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){iS(tP,"beforeunload",()=>{this.Jr()&&s4.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),this.S.__preview_experimental_cookieless_mode)throw Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=t||(new Date).getTime(),[s,r,n]=this.Qr(),a=this.Xr(),o=it(n)&&n>0&&Math.abs(i-n)>864e5,l=!1,c=!r,u=!e&&Math.abs(i-s)>this.sessionTimeoutMs;c||u||o?(r=this.qr(),a=this.Br(),oR.info("new session ID generated",{sessionId:r,windowId:a,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}}),n=i,l=!0):a||(a=this.Br(),l=!0);var d=0===s||!e||o?i:s,h=0===n?(new Date).getTime():n;return this.Yr(a),this.Vr(r,d,h),e||this.Hr(),l&&this.Ur.forEach(e=>e(r,a,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0)),{sessionId:r,windowId:a,sessionStartTimestamp:h,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0,lastActivityTimestamp:s}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var oL=["$set_once","$set"],oD=il("[SiteApps]");class oZ{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,t){if(t){var i=this.globalsForEvent(t);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return null==(e=tB._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){if(!e)throw Error("Event payload is required");var t,i,s,r,n,a,o,l={},c=this._instance.get_property("$groups")||[];for(var[u,d]of Object.entries(this._instance.get_property("$stored_group_properties")||{}))l[u]={id:c[u],type:u,properties:d};var{$set_once:h,$set:p}=e;return{event:id({},ih(e,oL),{properties:id({},e.properties,p?{$set:id({},null!=(t=null==(i=e.properties)?void 0:i.$set)?t:{},p)}:{},h?{$set_once:id({},null!=(s=null==(r=e.properties)?void 0:r.$set_once)?s:{},h)}:{}),elements_chain:null!=(n=null==(a=e.properties)?void 0:a.$elements_chain)?n:"",distinct_id:null==(o=e.properties)?void 0:o.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t=this.apps[e.id],i=()=>{var i;!t.errored&&this.ts.length&&(oD.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(e=>null==t.processEvent?void 0:t.processEvent(e)),t.processedBuffer=!0),Object.values(this.apps).every(e=>e.processedBuffer||e.errored)&&(null==(i=this.rs)||i.call(this))},s=!1,r=r=>{t.errored=!r,t.loaded=!0,oD.info("Site app with id "+e.id+" "+(r?"loaded":"errored")),s&&i()};try{var{processEvent:n}=e.init({posthog:this._instance,callback:e=>{r(e)}});n&&(t.processEvent=n),s=!0}catch(t){oD.error("Error while initializing PostHog app with config id "+e.id,t),r(!1)}if(s&&t.loaded)try{i()}catch(i){oD.error("Error while processing buffered events PostHog app with config id "+e.id,i),t.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{null==i.processEvent||i.processEvent(t)}catch(t){oD.error("Error while processing event "+e.event+" for site app "+i.id,t)}}}onRemoteConfig(e){var t,i,s,r=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",e=>this.ns(e))):void oD.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(i=this.rs)||i.call(this),null!=(s=e.siteApps)&&s.length)if(this.isEnabled){var n=function(e){var t;tB["__$$ph_site_app_"+e]=r._instance,null==(t=tB.__PosthogExtensions__)||null==t.loadSiteApp||t.loadSiteApp(r._instance,o,t=>{if(t)return oD.error("Error while initializing PostHog app with config id "+e,t)})};for(var{id:a,url:o}of e.siteApps)n(a)}else oD.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var oq=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],oz=function(e,t){if(!e)return!1;var i=e.toLowerCase();return oq.concat(t||[]).some(e=>{var t=e.toLowerCase();return -1!==i.indexOf(t)})},oB=function(e,t){if(!e)return!1;var i=e.userAgent;if(i&&oz(i,t))return!0;try{var s=null==e?void 0:e.userAgentData;if(null!=s&&s.brands&&s.brands.some(e=>oz(null==e?void 0:e.brand,t)))return!0}catch(e){}return!!e.webdriver},oU=function(e){return e.US="us",e.EU="eu",e.CUSTOM="custom",e}({}),oH="i.posthog.com";class oV{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get uiHost(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+oH,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=oU.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=oU.EU:this.os[this.apiHost]=oU.CUSTOM),this.os[this.apiHost]}endpointFor(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if(this.region===oU.CUSTOM)return this.apiHost+t;var i=oH+t;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var oG={icontains:(e,t)=>!!tP&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!tP&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!tP&&at(t.href,e),not_regex:(e,t)=>!!tP&&!at(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class oW{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getWebExperiments(e=>{oW.ls("retrieved web experiments from the server"),t.us=new Map,e.forEach(e=>{if(e.feature_flag_key){t.us&&(oW.ls("setting flag key ",e.feature_flag_key," to web experiment ",e),null==(i=t.us)||i.set(e.feature_flag_key,e));var i,s=t._instance.getFeatureFlag(e.feature_flag_key);t9(s)&&e.variants[s]&&t.hs(e.name,s,e.variants[s].transforms)}else if(e.variants)for(var r in e.variants){var n=e.variants[r];oW.ds(n)&&t.hs(e.name,r,n.transforms)}})},e)},this._instance=e,this._instance.onFeatureFlags(e=>{this.onFeatureFlags(e)})}onFeatureFlags(e){if(this._is_bot())oW.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(ie(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();oW.ls("applying feature flags",e),e.forEach(e=>{var t;if(this.us&&null!=(t=this.us)&&t.has(e)){var i,s=this._instance.getFeatureFlag(e),r=null==(i=this.us)?void 0:i.get(e);s&&null!=r&&r.variants[s]&&this.hs(r.name,s,r.variants[s].transforms)}})}}previewWebExperiment(){var e=oW.getWindowLocation();if(null!=e&&e.search){var t=sT(null==e?void 0:e.search,"__experiment_id"),i=sT(null==e?void 0:e.search,"__experiment_variant");t&&i&&(oW.ls("previewing web experiments "+t+" && "+i),this.getWebExperiments(e=>{this.vs(parseInt(t),i,e)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var s=this._instance.get_property("$web_experiments");if(s&&!t)return e(s);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:t=>200===t.statusCode&&t.json?e(t.json.experiments||[]):e([])})}vs(e,t,i){var s=i.filter(t=>t.id===e);s&&s.length>0&&(oW.ls("Previewing web experiment ["+s[0].name+"] with variant ["+t+"]"),this.hs(s[0].name,t,s[0].variants[t].transforms))}static ds(e){return!ie(e.conditions)&&oW.cs(e)&&oW.fs(e)}static cs(e){if(ie(e.conditions)||ie(null==(t=e.conditions)?void 0:t.url))return!0;var t,i,s,r,n=oW.getWindowLocation();return!!n&&(null==(i=e.conditions)||!i.url||oG[null!=(s=null==(r=e.conditions)?void 0:r.urlMatchType)?s:"icontains"](e.conditions.url,n))}static getWindowLocation(){return null==tP?void 0:tP.location}static fs(e){if(ie(e.conditions)||ie(null==(i=e.conditions)?void 0:i.utm))return!0;var t=a9();if(t.utm_source){var i,s,r,n,a,o,l,c,u,d=null==(s=e.conditions)||null==(s=s.utm)||!s.utm_campaign||(null==(r=e.conditions)||null==(r=r.utm)?void 0:r.utm_campaign)==t.utm_campaign,h=null==(n=e.conditions)||null==(n=n.utm)||!n.utm_source||(null==(a=e.conditions)||null==(a=a.utm)?void 0:a.utm_source)==t.utm_source,p=null==(o=e.conditions)||null==(o=o.utm)||!o.utm_medium||(null==(l=e.conditions)||null==(l=l.utm)?void 0:l.utm_medium)==t.utm_medium,g=null==(c=e.conditions)||null==(c=c.utm)||!c.utm_term||(null==(u=e.conditions)||null==(u=u.utm)?void 0:u.utm_term)==t.utm_term;return d&&p&&g&&h}return!1}static ls(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];io.info("[WebExperiments] "+e,i)}hs(e,t,i){this._is_bot()?oW.ls("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?i.forEach(i=>{if(i.selector){oW.ls("applying transform of variant "+t+" for experiment "+e+" ",i);var s,r=null==(s=document)?void 0:s.querySelectorAll(i.selector);null==r||r.forEach(e=>{i.html&&(e.innerHTML=i.html),i.css&&e.setAttribute("style",i.css)})}}):oW.ls("Control variants leave the page unmodified.")}_is_bot(){return tR&&this._instance?oB(tR,this._instance.config.custom_blocked_useragents):void 0}}var oK=il("[PostHog ExternalIntegrations]"),oY={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class oJ{constructor(e){this._instance=e}J(e,t){var i;null==(i=tB.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,e,e=>{if(e)return oK.error("failed to load script",e);t()})}startIfEnabledOrStop(){var e,t=this,i=function(e){var i,s,n;!r||null!=(i=tB.__PosthogExtensions__)&&null!=(i=i.integrations)&&i[e]||t.J(oY[e],()=>{var i;null==(i=tB.__PosthogExtensions__)||null==(i=i.integrations)||null==(i=i[e])||i.start(t._instance)}),!r&&null!=(s=tB.__PosthogExtensions__)&&null!=(s=s.integrations)&&s[e]&&(null==(n=tB.__PosthogExtensions__)||null==(n=n.integrations)||null==(n=n[e])||n.stop())};for(var[s,r]of Object.entries(null!=(e=this._instance.config.integrations)?e:{}))i(s)}}var oX={},oQ=()=>{},o0="posthog",o1=!n5&&-1===(null==tz?void 0:tz.indexOf("MSIE"))&&-1===(null==tz?void 0:tz.indexOf("Mozilla")),o2=e=>{var t;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:function(e){var t=null==e?void 0:e.hostname;if(!t9(t))return!1;var i=t.split(".").slice(-2).join(".");for(var s of ik)if(i===s)return!1;return!0}(null==tM?void 0:tM.location),persistence:"localStorage+cookie",persistence_name:"",loaded:oQ,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:"2025-05-24"!==e||"history_change",capture_pageleave:"if_capture_pageview",defaults:null!=e?e:"unset",debug:tL&&t9(null==tL?void 0:tL.search)&&-1!==tL.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==tP||null==(t=tP.location)?void 0:t.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;io.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:3e3},error_tracking:{},_onCapture:oQ}},o3=e=>{var t={};t6(e.process_person)||(t.person_profiles=e.process_person),t6(e.xhr_headers)||(t.request_headers=e.xhr_headers),t6(e.cookie_name)||(t.persistence_name=e.cookie_name),t6(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),t6(e.store_google)||(t.save_campaign_params=e.store_google),t6(e.verbose)||(t.debug=e.verbose);var i=i_({},t,e);return t2(e.property_blacklist)&&(t6(e.property_denylist)?i.property_denylist=e.property_blacklist:t2(e.property_denylist)?i.property_denylist=[...e.property_blacklist,...e.property_denylist]:io.error("Invalid value for property_denylist config: "+e.property_denylist)),i};class o4{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){io.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class o5{get decideEndpointWasHit(){var e,t;return null!=(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&e}get flagsEndpointWasHit(){var e,t;return null!=(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&e}constructor(){this.webPerformance=new o4,this.gs=!1,this.version=tU.LIB_VERSION,this._s=new o_,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=o2(),this.SentryIntegration=nU,this.sentryIntegration=e=>(function(e,t){var i=nB(e,t);return{name:nz,processEvent:e=>i(e)}})(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new og(this),this.toolbar=new nK(this),this.scrollManager=new o$(this),this.pageViewManager=new n3(this),this.surveys=new ok(this),this.experiments=new oW(this),this.exceptions=new aa(this),this.rateLimiter=new oj(this),this.requestRouter=new oV(this),this.consent=new s6(this),this.externalIntegrations=new oJ(this),this.people={set:(e,t,i)=>{var s=t9(e)?{[e]:t}:e;this.setPersonProperties(s),null==i||i({})},set_once:(e,t,i)=>{var s=t9(e)?{[e]:t}:e;this.setPersonProperties(void 0,s),null==i||i({})}},this.on("eventCaptured",e=>io.info('send "'+(null==e?void 0:e.event)+'"',e))}init(e,t,i){if(i&&i!==o0){var s,r=null!=(s=oX[i])?s:new o5;return r._init(e,t,i),oX[i]=r,oX[o0][i]=r,r}return this._init(e,t,i)}_init(e,t,i){if(void 0===t&&(t={}),t6(e)||t8(e))return io.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return io.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=t,this.ks=[],t.person_profiles&&(this.ws=t.person_profiles),this.set_config(i_({},o2(t.defaults),o3(t),{name:i,token:e})),this.config.on_xhr_error&&io.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:tG.GZipJS;var s=this.xs();this.persistence=new ov(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new ov(id({},this.config,{persistence:"sessionStorage"}),s);var r=id({},this.persistence.props),n=id({},this.sessionPersistence.props);if(this.register({$initialization_time:(new Date).toISOString()}),this.Es=new oT(e=>this.Is(e),this.config.request_queue_config),this.Ps=new oO(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new oM(this),this.sessionPropsManager=new oF(this,this.sessionManager,this.persistence)),new nJ(this).startIfEnabledOrStop(),this.siteApps=new oZ(this),null==(a=this.siteApps)||a.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new nZ(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new sF(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new n2(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new nQ(this),this.exceptionObserver=new rr(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new re(this,s7),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new rI(this),this.historyAutocapture.startIfEnabled(),tU.DEBUG=tU.DEBUG||this.config.debug,tU.DEBUG&&io.info("Starting in debug mode",{this:this,config:t,thisC:id({},this.config),p:r,s:n}),void 0!==(null==(o=t.bootstrap)?void 0:o.distinctID)){var a,o,l,c,u=this.config.get_device_id(sV()),d=null!=(l=t.bootstrap)&&l.isIdentifiedID?u:t.bootstrap.distinctID;this.persistence.set_property(i2,null!=(c=t.bootstrap)&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var h,p,g=Object.keys((null==(h=t.bootstrap)?void 0:h.featureFlags)||{}).filter(e=>{var i;return!(null==(i=t.bootstrap)||null==(i=i.featureFlags)||!i[e])}).reduce((e,i)=>{var s;return e[i]=(null==(s=t.bootstrap)||null==(s=s.featureFlags)?void 0:s[i])||!1,e},{}),f=Object.keys((null==(p=t.bootstrap)?void 0:p.featureFlagPayloads)||{}).filter(e=>g[e]).reduce((e,i)=>{var s,r;return null!=(s=t.bootstrap)&&null!=(s=s.featureFlagPayloads)&&s[i]&&(e[i]=null==(r=t.bootstrap)||null==(r=r.featureFlagPayloads)?void 0:r[i]),e},{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:f})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:se,$device_id:null},"");else if(!this.get_distinct_id()){var v=this.config.get_device_id(sV());this.register_once({distinct_id:v,$device_id:v},""),this.persistence.set_property(i2,"anonymous")}return iS(tP,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?function(e,t){var i=e.config.segment;if(!i)return t();!function(e,t){var i=e.config.segment;if(!i)return t();var s=i=>{var s=()=>i.anonymousId()||sV();e.config.get_device_id=s,i.id()&&(e.register({distinct_id:i.id(),$device_id:s()}),e.persistence.set_property(i2,"identified")),t()},r=i.user();"then"in r&&t3(r.then)?r.then(e=>s(e)):s(r)}(e,()=>{var s;i.register((Promise&&Promise.resolve||nq.warn("This browser does not have Promise support, and can not use the segment integration"),s=(t,i)=>{if(!i)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(nq.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(nq.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var s=e.calculateEventProperties(i,t.event.properties);return t.event.properties=Object.assign({},s,t.event.properties),t},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>s(e,e.event.event),page:e=>s(e,"$pageview"),identify:e=>s(e,"$identify"),screen:e=>s(e,"$screen")})).then(()=>{t()})})}(this,()=>this.Ts()):this.Ts(),t3(this.config._onCapture)&&this.config._onCapture!==oQ&&(io.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",e=>this.config._onCapture(e.event,e))),this.config.ip&&io.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var t,i,s,r,n,a,o,l;if(!tM||!tM.body)return io.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=tK(e.supportedCompression,tG.GZipJS)?tG.GZipJS:tK(e.supportedCompression,tG.Base64)?tG.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),null==(i=this.siteApps)||i.onRemoteConfig(e),null==(s=this.sessionRecording)||s.onRemoteConfig(e),null==(r=this.autocapture)||r.onRemoteConfig(e),null==(n=this.heatmaps)||n.onRemoteConfig(e),this.surveys.onRemoteConfig(e),null==(a=this.webVitalsAutocapture)||a.onRemoteConfig(e),null==(o=this.exceptionObserver)||o.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),null==(l=this.deadClicksAutocapture)||l.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){io.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new oN(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null==(e=this.Es)||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||ig(this.__request_queue,e=>this.Is(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,t;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),null==(e=this.Es)||e.unload(),null==(t=this.Ps)||t.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(o1?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=n9(e.url,{ip:+!!this.config.ip}),e.headers=id({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,i,s,r=id({},e);r.timeout=r.timeout||6e4,r.url=n9(r.url,{_:(new Date).getTime().toString(),ver:tU.LIB_VERSION,compression:r.compression});var n=null!=(t=r.transport)?t:"fetch",a=null!=(i=null==(s=iE(ae,e=>e.transport===n))?void 0:s.method)?i:ae[0].method;if(!a)throw Error("No available transport method");a(r)})(id({},e,{callback:t=>{var i,s;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null==(i=(s=this.config).on_request_error)||i.call(s,t)),null==e.callback||e.callback(t)}}))))}Is(e){this.Ps?this.Ps.retriableRequest(e):this.Ee(e)}_execute_array(e){var t,i=[],s=[],r=[];ig(e,e=>{e&&(t2(t=e[0])?r.push(e):t3(e)?e.call(this):t2(e)&&"alias"===t?i.push(e):t2(e)&&-1!==t.indexOf("capture")&&t3(this[t])?r.push(e):s.push(e))});var n=function(e,t){ig(e,function(e){if(t2(e[0])){var i=t;iv(e,function(e){i=i[e[0]].apply(i,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};n(i,this),n(s,this),n(r,this)}Rs(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,i){var s;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Es){if(!this.consent.isOptedOut())if(!t6(e)&&t9(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var r=null!=i&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==r||!r.isRateLimited){null!=t&&t.$current_url&&!t9(null==t?void 0:t.$current_url)&&(io.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var n,a,o,l,c=new Date,u=(null==i?void 0:i.timestamp)||c,d=sV(),h={uuid:d,event:e,properties:this.calculateEventProperties(e,t||{},u,d)};r&&(h.properties.$lib_rate_limit_remaining_tokens=r.remainingTokens),(null==i?void 0:i.$set)&&(h.$set=null==i?void 0:i.$set);var p,g,f=this.Os(null==i?void 0:i.$set_once);if(f&&(h.$set_once=f),(n=h,a=null!=i&&i._noTruncate?null:this.config.properties_string_max_length,o=e=>t9(e)&&!t7(a)?e.slice(0,a):e,l=new Set,h=function e(t,i){var s;return t!==Object(t)?o?o(t,i):t:l.has(t)?void 0:(l.add(t),t2(t)?(s=[],ig(t,t=>{s.push(e(t))})):(s={},iv(t,(t,i)=>{l.has(t)||(s[i]=e(t,i))})),s)}(n)).timestamp=u,t6(null==i?void 0:i.timestamp)||(h.properties.$event_time_override_provided=!0,h.properties.$event_time_override_system_time=c),e===oE.DISMISSED||e===oE.SENT){var v=null==t?void 0:t[oS.SURVEY_ID],_=null==t?void 0:t[oS.SURVEY_ITERATION];localStorage.setItem((g=""+ob+(p={id:v,current_iteration:_}).id,p.current_iteration&&p.current_iteration>0&&(g=""+ob+p.id+"_"+p.current_iteration),g),"true"),h.$set=id({},h.$set,{[ox({id:v,current_iteration:_},e===oE.SENT?"responded":"dismissed")]:!0})}var m=id({},h.properties.$set,h.$set);if(t5(m)||this.setPersonPropertiesForFlags(m),!ie(this.config.before_send)){var y=this.As(h);if(!y)return;h=y}this._s.emit("eventCaptured",h);var b={method:"POST",url:null!=(s=null==i?void 0:i._url)?s:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:h,compression:"best-available",batchKey:null==i?void 0:i._batchKey};return!this.config.request_batching||i&&(null==i||!i._batchKey)||null!=i&&i.send_instantly?this.Is(b):this.Es.enqueue(b),h}io.critical("This capture call is ignored due to client rate limiting.")}}else io.error("No event name provided to posthog.capture")}else io.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,i,s,r){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return t;var n,a=r?void 0:this.persistence.remove_event_timer(e),o=id({},t);if(o.token=this.config.token,o.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(o.$cookieless_mode=!0),"$snapshot"===e){var l=id({},this.persistence.properties(),this.sessionPersistence.properties());return o.distinct_id=l.distinct_id,(!t9(o.distinct_id)&&!it(o.distinct_id)||t8(o.distinct_id))&&io.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),o}var c,u=function(e,t){if(!tz)return{};var i,s,r=e?im([],a3,t||[]):[],[n,a]=function(e){for(var t=0;t<a0.length;t++){var[i,s]=a0[t],r=i.exec(e),n=r&&(t3(s)?s(r,e):s);if(n)return n}return["",""]}(tz);return i_(iw({$os:n,$os_version:a,$browser:aJ(tz,navigator.vendor),$device:a1(tz),$device_type:(s=a1(tz))===ad||s===au||"Kobo"===s||"Kindle Fire"===s||s===aq?ac:s===aT||s===aO||s===aP||s===aL?"Console":s===ap?"Wearable":s?ao:"Desktop",$timezone:or(),$timezone_offset:function(){try{return(new Date).getTimezoneOffset()}catch(e){return}}()}),{$current_url:sP(null==tL?void 0:tL.href,r,a5),$host:null==tL?void 0:tL.host,$pathname:null==tL?void 0:tL.pathname,$raw_user_agent:tz.length>1e3?tz.substring(0,997)+"...":tz,$browser_version:aQ(tz,navigator.vendor),$browser_language:oe(),$browser_language_prefix:"string"==typeof(i=oe())?i.split("-")[0]:void 0,$screen_height:null==tP?void 0:tP.screen.height,$screen_width:null==tP?void 0:tP.screen.width,$viewport_height:null==tP?void 0:tP.innerHeight,$viewport_width:null==tP?void 0:tP.innerWidth,$lib:"web",$lib_version:tU.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:h}=this.sessionManager.checkAndGetSessionAndWindowId(r,i.getTime());o.$session_id=d,o.$window_id=h}this.sessionPropsManager&&i_(o,this.sessionPropsManager.getSessionProps());try{this.sessionRecording&&i_(o,this.sessionRecording.sdkDebugProperties),o.$sdk_debug_retry_queue_size=null==(n=this.Ps)?void 0:n.length}catch(e){o.$sdk_debug_error_capturing_properties=String(e)}if(this.requestRouter.region===oU.CUSTOM&&(o.$lib_custom_api_host=this.config.api_host),c="$pageview"!==e||r?"$pageleave"!==e||r?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,s),o=i_(o,c),"$pageview"===e&&tM&&(o.title=tM.title),!t6(a)){var p=i.getTime()-a;o.$duration=parseFloat((p/1e3).toFixed(3))}tz&&this.config.opt_out_useragent_filter&&(o.$browser_type=this._is_bot()?"bot":"browser"),(o=i_({},u,this.persistence.properties(),this.sessionPersistence.properties(),o)).$is_identified=this._isIdentified(),t2(this.config.property_denylist)?iv(this.config.property_denylist,function(e){delete o[e]}):io.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(io.error("sanitize_properties is deprecated. Use before_send instead"),o=g(o,e));var f=this.Ds();return o.$process_person_profile=f,f&&!r&&this.Ls("_calculate_event_properties"),o}Os(e){if(!this.persistence||!this.Ds()||this.gs)return e;var t,i=i_({},this.persistence.get_initial_props(),(null==(t=this.sessionPropsManager)?void 0:t.getSetOnceProps())||{},e||{}),s=this.config.sanitize_properties;return s&&(io.error("sanitize_properties is deprecated. Use before_send instead"),i=s(i,"$set_once")),this.gs=!0,t5(i)?void 0:i}register(e,t){var i;null==(i=this.persistence)||i.register(e,t)}register_once(e,t,i){var s;null==(s=this.persistence)||s.register_once(e,t,i)}register_for_session(e){var t;null==(t=this.sessionPersistence)||t.register(e)}unregister(e){var t;null==(t=this.persistence)||t.unregister(e)}unregister_for_session(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)}js(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}getEarlyAccessFeatures(e,t,i){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,i)}on(e,t){return this._s.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,i;return null!=(t=null==(i=this.sessionManager)?void 0:i.onSessionId(e))?t:()=>{}}getSurveys(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,i){if(!this.__loaded||!this.persistence)return io.uninitializedWarning("posthog.identify");if(it(e)&&(e=e.toString(),io.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))io.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==se){if(this.Ls("posthog.identify")){var s=this.get_distinct_id();this.register({$user_id:e}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:s},""),e!==s&&e!==this.get_property(ij)&&(this.unregister(ij),this.register({distinct_id:e}));var r="anonymous"===(this.persistence.get_property(i2)||"anonymous");e!==s&&r?(this.persistence.set_property(i2,"identified"),this.setPersonPropertiesForFlags(id({},i||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:s},{$set:t||{},$set_once:i||{}}),this.Ss=ai(e,t,i),this.featureFlags.setAnonymousDistinctId(s)):(t||i)&&this.setPersonProperties(t,i),e!==s&&(this.reloadFeatureFlags(),this.unregister(i1))}}else io.critical('The string "'+se+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else io.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.Ls("posthog.setPersonProperties")){var i=ai(this.get_distinct_id(),e,t);this.Ss!==i?(this.setPersonPropertiesForFlags(id({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Ss=i):io.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,i){if(e&&t){if(this.Ls("posthog.group")){var s=this.getGroups();s[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:id({},s,{[e]:t})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),s[e]===t||i||this.reloadFeatureFlags()}}else io.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){if(io.info("reset"),!this.__loaded)return io.uninitializedWarning("posthog.reset");var t,i,s,r,n=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(i=this.sessionPersistence)||i.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(s=this.persistence)||s.set_property(i2,"anonymous"),null==(r=this.sessionManager)||r.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:se,$device_id:null},"");else{var a=this.config.get_device_id(sV());this.register_once({distinct_id:a,$device_id:e?a:n},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!=(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),s=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(null!=e&&e.withTimestamp&&i){var r,n=null!=(r=e.timestampLookBack)?r:10;if(!i)return s;s+="?t="+Math.max(Math.floor(((new Date).getTime()-i)/1e3)-n,0)}return s}alias(e,t){return e===this.get_property(iC)?(io.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(t6(t)&&(t=this.get_distinct_id()),e!==t?(this.js(ij,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(io.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=id({},this.config);if(t4(e)){i_(this.config,o3(e));var i,s,r,n,a,o=this.xs();null==(i=this.persistence)||i.update_config(this.config,t,o),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new ov(id({},this.config,{persistence:"sessionStorage"}),o),sX.O()&&"true"===sX.D("ph_debug")&&(this.config.debug=!0),this.config.debug&&(tU.DEBUG=!0,io.info("set_config",{config:e,oldConfig:t,newConfig:id({},this.config)})),null==(s=this.sessionRecording)||s.startIfEnabledOrStop(),null==(r=this.autocapture)||r.startIfEnabled(),null==(n=this.heatmaps)||n.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ns(),null==(a=this.externalIntegrations)||a.startIfEnabledOrStop()}}startSessionRecording(e){var t,i,s,r,n,a=!0===e,o={sampling:a||!(null==e||!e.sampling),linked_flag:a||!(null==e||!e.linked_flag),url_trigger:a||!(null==e||!e.url_trigger),event_trigger:a||!(null==e||!e.event_trigger)};Object.values(o).some(Boolean)&&(null==(t=this.sessionManager)||t.checkAndGetSessionAndWindowId(),o.sampling&&(null==(i=this.sessionRecording)||i.overrideSampling()),o.linked_flag&&(null==(s=this.sessionRecording)||s.overrideLinkedFlag()),o.url_trigger&&(null==(r=this.sessionRecording)||r.overrideTrigger("url")),o.event_trigger&&(null==(n=this.sessionRecording)||n.overrideTrigger("event"))),this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null==(e=this.sessionRecording)||!e.started)}captureException(e,t){var i=Error("PostHog syntheticException");return this.exceptions.sendExceptionEvent(id({},function(e,t){var{error:i,event:s}=e,r={$exception_list:[]},n=i||s;if(rc(n)||rl(n,"DOMException")){if("stack"in n)r=rS(n,t);else{var a=n.name||(rc(n)?"DOMError":"DOMException"),o=n.message?a+": "+n.message:a;r=rC(o,id({},t,{overrideExceptionType:rc(n)?"DOMError":"DOMException",defaultExceptionMessage:o}))}return"code"in n&&(r.$exception_DOMException_code=""+n.code),r}if(rl(n,"ErrorEvent")&&n.error)return rS(n.error,t);if(ro(n))return rS(n,t);if(rl(n,"Object")||rn(n))return function(e,t){var i,s,r,n=null==(s=null==t?void 0:t.handled)||s,a=null==(r=null==t?void 0:t.synthetic)||r,o={type:null!=t&&t.overrideExceptionType?t.overrideExceptionType:rn(e)?e.constructor.name:"Error",value:"Non-Error 'exception' captured with keys: "+function(e,t){void 0===t&&(t=40);var i=Object.keys(e);if(i.sort(),!i.length)return"[object has no keys]";for(var s=i.length;s>0;s--){var r=i.slice(0,s).join(", ");if(!(r.length>t))return s===i.length||r.length<=t?r:r.slice(0,t)+"..."}return""}(e),mechanism:{handled:n,synthetic:a}};if(null!=t&&t.syntheticException){var l=rk(null==t?void 0:t.syntheticException,1);l.length&&(o.stacktrace={frames:l,type:"raw"})}return{$exception_list:[o],$exception_level:t9(i=e.level)&&!t8(i)&&tW.indexOf(i)>=0?e.level:"error"}}(n,t);if(t6(i)&&t9(s)){var l="Error",c=s,u=s.match(rw);return u&&(l=u[1],c=u[2]),rC(c,id({},t,{overrideExceptionType:l,defaultExceptionMessage:c}))}return rC(n,t)}(e instanceof Error?{error:e,event:e.message}:{event:e},{syntheticException:i}),t))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null==(t=this.persistence)?void 0:t.props[e]}getSessionProperty(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]}toString(){var e,t=null!=(e=this.config.name)?e:o0;return t!==o0&&(t=o0+"."+t),t}_isIdentified(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(i2))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(i2))}Ds(){var e,t;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&t5(this.getGroups())&&(null==(e=this.persistence)||null==(e=e.props)||!e[ij])&&(null==(t=this.persistence)||null==(t=t.props)||!t[i8]))}Fs(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return"never"===this.config.person_profiles?(io.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(i8,!0),!0)}xs(){var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default;return this.config.disable_persistence||e&&!!t}Ns(){var e,t,i,s,r=this.xs();return(null==(e=this.persistence)?void 0:e.Fe)!==r&&(null==(i=this.persistence)||i.set_disabled(r)),(null==(t=this.sessionPersistence)?void 0:t.Fe)!==r&&(null==(s=this.sessionPersistence)||s.set_disabled(r)),r}opt_in_capturing(e){var t;this.consent.optInOut(!0),this.Ns(),(t6(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!=(t=null==e?void 0:e.captureEventName)?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ns()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ns()}_is_bot(){return tR?oB(tR,this.config.custom_blocked_useragents):void 0}Cs(){tM&&("visible"===tM.visibilityState?this.bs||(this.bs=!0,this.capture("$pageview",{title:tM.title},{send_instantly:!0}),this.ys&&(tM.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),iS(tM,"visibilitychange",this.ys)))}debug(e){!1===e?(null==tP||tP.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==tP||tP.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,t,i,s,r=this.$s||{};return"advanced_disable_flags"in r?!!r.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(io.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(t="advanced_disable_decide",i=(e="advanced_disable_flags")in r&&!t6(r[e]),s=t in r&&!t6(r[t]),i?r[e]:!!s&&(io&&io.warn("Config field '"+t+"' is deprecated. Please use '"+e+"' instead. The old field will be removed in a future major version."),r[t]))}As(e){if(ie(this.config.before_send))return e;var t=t2(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var s of t){if(ie(i=s(i))){var r="Event '"+e.event+"' was rejected in beforeSend function";return ir(e.event)?io.warn(r+". This can cause unexpected behavior."):io.info(r),null}i.properties&&!t5(i.properties)||io.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return null==(e=this.pageViewManager.ce)?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(i)})}}!function(e,t){for(var i=0;i<t.length;i++)e.prototype[t[i]]=ix(e.prototype[t[i]])}(o5,["identify"]),oX[o0]=new o5,function(){function e(){e.done||(e.done=!0,o1=!1,iv(oX,function(e){e._dom_loaded()}))}null!=tM&&tM.addEventListener?"complete"===tM.readyState?e():iS(tM,"DOMContentLoaded",e,{capture:!1}):tP&&io.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}();let o6=(e,t)=>{};var o9=i(16189);function o8({context:e,currentUsage:t=0,limit:i=20,onClose:s}){let r=(0,o9.useRouter)(),[o,l]=(0,a.useState)(!0),c=()=>{l(!1),s?.()};if(!o)return null;let u={limit_reached:{title:"Daily Limit Reached",description:`You've used ${t} of ${i} free marks today. Upgrade to Pro for unlimited marking!`,cta:"Upgrade to Pro"},pro_feature:{title:"Pro Feature",description:"This feature is only available with a Pro subscription. Get access to advanced AI models, OCR upload, and unlimited marking!",cta:"Get Pro Access"}}[e];return(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,n.jsxs)(eJ.Zp,{className:"max-w-md w-full mx-4",children:[(0,n.jsxs)(eJ.aR,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsx)(eJ.ZB,{children:u.title}),(0,n.jsx)(eY.$,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0",children:(0,n.jsx)(tT.A,{className:"h-4 w-4"})})]}),(0,n.jsx)(eJ.BT,{children:u.description})]}),(0,n.jsxs)(eJ.Wu,{children:["limit_reached"===e&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mb-2",children:[(0,n.jsx)("span",{children:"Usage"}),(0,n.jsxs)("span",{children:[t,"/",i]})]}),(0,n.jsx)(tp.k,{value:t/i*100,className:"h-2"})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)(eY.$,{onClick:()=>{o6("anonymous",e),r.push("/pricing")},className:"flex-1",children:u.cta}),(0,n.jsx)(eY.$,{variant:"outline",onClick:c,className:"flex-1",children:"Maybe Later"})]})]})]})})}let o7=eK({question:eG().min(10,"Question must be at least 10 characters"),answer:eG().min(5,"Answer must be at least 5 characters"),markScheme:eG().optional(),marksTotal:eW().min(1).max(100).optional(),subject:eG().optional(),examBoard:eG().optional(),preferredProvider:eG().optional()}),le=["English Literature","English Language","Mathematics","Biology","Chemistry","Physics","History","Geography","French","Spanish","German","Art & Design","Computer Science","Business Studies","Economics","Psychology","Sociology","Religious Studies","Physical Education","Music","Drama","Other"],lt=["AQA","Edexcel","OCR","WJEC","CCEA","Other"];function li(){let[e,t]=(0,a.useState)(null),[i,s]=(0,a.useState)(!1),{data:r,isLoading:l}=(0,tr.I)({queryKey:["marking-info"],queryFn:async()=>{td.v.info("Fetching marking info from /api/mark");let e=await fetch("/api/mark");if(!e.ok){let t=await e.text();throw td.v.error("Failed to fetch marking info:",{status:e.status,error:t}),Error(`Failed to fetch marking info: ${e.status} ${e.statusText}`)}let t=await e.json();return td.v.info("Successfully fetched marking info",{usage:t.usage}),t},refetchInterval:3e4,refetchIntervalInBackground:!0,staleTime:1e4,gcTime:3e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4)}),d=function(){let e=(0,tn.jE)();return function(e,t){let i=(0,tn.jE)(void 0),[s]=a.useState(()=>new tu(i,e));a.useEffect(()=>{s.setOptions(e)},[s,e]);let r=a.useSyncExternalStore(a.useCallback(e=>s.subscribe(to.jG.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),n=a.useCallback((e,t)=>{s.mutate(e,t).catch(tc.lQ)},[s]);if(r.error&&(0,tc.GU)(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:n,mutateAsync:r.mutate}}({mutationKey:["mark-submission"],mutationFn:async e=>{td.v.info("Submitting work for marking",{questionLength:e.question.length,answerLength:e.answer.length,subject:e.subject,examBoard:e.examBoard});let t=await fetch("/api/mark",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw td.v.error("Failed to submit for marking:",{status:t.status,error:e.error||"Unknown error",details:e.details}),Error(e.error||`Failed to submit for marking: ${t.status} ${t.statusText}`)}let i=await t.json();return td.v.info("Successfully submitted for marking",{submissionId:i.submission.id}),i},onSuccess:t=>{td.v.info("Marking submission successful",{submissionId:t.submission.id}),e.invalidateQueries({queryKey:["marking-info"]}),e.invalidateQueries({queryKey:["submissions"]}),e.invalidateQueries({queryKey:["dashboard"]}),e.setQueryData(["submission",t.submission.id],t)},onError:e=>{td.v.error("Error in marking submission:",e)},onSettled:()=>{td.v.info("Marking submission process completed")},retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4)})}(),{toast:h}=(0,tj.dj)(),[p,g]=(0,a.useState)(!1),f=r?.userTier==="PRO",v=(0,o.mN)({resolver:function(e,t,i){if(void 0===i&&(i={}),"_def"in e&&"object"==typeof e._def&&"typeName"in e._def)return function(t,s,r){try{return Promise.resolve(C(function(){return Promise.resolve(e["sync"===i.mode?"parse":"parseAsync"](t,void 0)).then(function(e){return r.shouldUseNativeValidation&&c({},r),{errors:{},values:i.raw?Object.assign({},t):e}})},function(e){if(Array.isArray(null==e?void 0:e.issues))return{values:{},errors:u(function(e,t){for(var i={};e.length;){var s=e[0],r=s.code,n=s.message,a=s.path.join(".");if(!i[a])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];i[a]={message:l.message,type:l.code}}else i[a]={message:n,type:r};if("unionErrors"in s&&s.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var c=i[a].types,u=c&&c[s.code];i[a]=(0,o.Gb)(a,t,i,r,u?[].concat(u,s.message):s.message)}e.shift()}return i}(e.errors,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)};throw e}))}catch(e){return Promise.reject(e)}};if("_zod"in e&&"object"==typeof e._zod)return function(t,s,r){try{return Promise.resolve(C(function(){return Promise.resolve(("sync"===i.mode?E:S)(e,t,void 0)).then(function(e){return r.shouldUseNativeValidation&&c({},r),{errors:{},values:i.raw?Object.assign({},t):e}})},function(e){if(e instanceof w)return{values:{},errors:u(function(e,t){for(var i={};e.length;){var s=e[0],r=s.code,n=s.message,a=s.path.join(".");if(!i[a])if("invalid_union"===s.code){var l=s.errors[0][0];i[a]={message:l.message,type:l.code}}else i[a]={message:n,type:r};if("invalid_union"===s.code&&s.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var c=i[a].types,u=c&&c[s.code];i[a]=(0,o.Gb)(a,t,i,r,u?[].concat(u,s.message):s.message)}e.shift()}return i}(e.issues,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)};throw e}))}catch(e){return Promise.reject(e)}};throw Error("Invalid input: not a Zod schema")}(o7),defaultValues:{question:"",answer:"",markScheme:"",marksTotal:20,subject:"",examBoard:"",preferredProvider:""}}),_=async e=>{try{s(!0),v.reset();let i=await d.mutateAsync({question:e.question,answer:e.answer,markScheme:e.markScheme||void 0,marksTotal:e.marksTotal||void 0,subject:e.subject||void 0,examBoard:e.examBoard||void 0});t(i),s(!1),h({title:"Feedback Generated! \uD83C\uDF89",description:`Your work has been marked. Score: ${i.feedback.score}/20 (${i.feedback.grade})`,variant:"default"})}catch(e){s(!1),h({title:"Marking Failed",description:e instanceof Error?e.message:"An unexpected error occurred",variant:"destructive"})}},m=(r?.usage?.canUse||f)&&!i;return l?(0,n.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,n.jsx)(tI.A,{className:"h-8 w-8 animate-spin text-blue-500"})}):p?(0,n.jsx)(o8,{context:"limit_reached",currentUsage:r?.usage?.used,limit:r?.usage?.limit,onClose:()=>g(!1)}):(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsx)(tC.UsageDisplay,{usage:r?.usage}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(eJ.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,n.jsxs)(eJ.aR,{id:"marking-form",children:[(0,n.jsxs)(eJ.ZB,{className:"text-white flex items-center gap-2",children:[(0,n.jsx)(tN.A,{className:"h-5 w-5"}),"Submit Your Work"]}),(0,n.jsx)(eJ.BT,{className:"text-gray-300",children:"Paste your GCSE question and answer to get instant AI feedback"})]}),(0,n.jsx)(eJ.Wu,{children:(0,n.jsx)(e1,{...v,children:(0,n.jsxs)("form",{onSubmit:v.handleSubmit(_),className:"space-y-4",children:[(0,n.jsx)(e3,{control:v.control,name:"question",render:({field:e})=>(0,n.jsxs)(e6,{children:[(0,n.jsx)(e9,{className:"text-white",children:"Question *"}),(0,n.jsx)(e8,{children:(0,n.jsx)(ts.T,{...e,placeholder:"Paste your GCSE question here...",className:"bg-white/10 border-white/20 text-white placeholder-gray-400 min-h-[100px]","aria-describedby":"question-description"})}),(0,n.jsx)(e7,{id:"question-description",className:"text-gray-400 text-sm",children:"Enter the full question you're answering"}),(0,n.jsx)(te,{})]})}),(0,n.jsx)(e3,{control:v.control,name:"answer",render:({field:e})=>(0,n.jsxs)(e6,{children:[(0,n.jsx)(e9,{className:"text-white",children:"Your Answer *"}),(0,n.jsx)(e8,{children:(0,n.jsx)(ts.T,{...e,placeholder:"Type or paste your answer here...",className:"bg-white/10 border-white/20 text-white placeholder-gray-400 min-h-[120px]","aria-describedby":"answer-description"})}),(0,n.jsx)(e7,{id:"answer-description",className:"text-gray-400 text-sm",children:"Type or paste your complete answer to the question"}),(0,n.jsx)(te,{})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(e3,{control:v.control,name:"subject",render:({field:e})=>(0,n.jsxs)(e6,{children:[(0,n.jsx)(e9,{className:"text-white",children:"Subject"}),(0,n.jsxs)(ti.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,n.jsx)(e8,{children:(0,n.jsx)(ti.bq,{className:"bg-white/10 border-white/20 text-white",children:(0,n.jsx)(ti.yv,{placeholder:"Select subject"})})}),(0,n.jsx)(ti.gC,{children:le.map(e=>(0,n.jsx)(ti.eb,{value:e,children:e},e))})]}),(0,n.jsx)(te,{})]})}),(0,n.jsx)(e3,{control:v.control,name:"examBoard",render:({field:e})=>(0,n.jsxs)(e6,{children:[(0,n.jsx)(e9,{className:"text-white",children:"Exam Board"}),(0,n.jsxs)(ti.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,n.jsx)(e8,{children:(0,n.jsx)(ti.bq,{className:"bg-white/10 border-white/20 text-white",children:(0,n.jsx)(ti.yv,{placeholder:"Select exam board"})})}),(0,n.jsx)(ti.gC,{children:lt.map(e=>(0,n.jsx)(ti.eb,{value:e,children:e},e))})]}),(0,n.jsx)(te,{})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)(e3,{control:v.control,name:"marksTotal",render:({field:e})=>(0,n.jsxs)(e6,{children:[(0,n.jsx)(e9,{className:"text-white",children:"Total Marks"}),(0,n.jsx)(e8,{children:(0,n.jsx)(tt.p,{...e,type:"number",min:"1",max:"100",onChange:t=>e.onChange(parseInt(t.target.value)||void 0),className:"bg-white/10 border-white/20 text-white","aria-describedby":"marks-description"})}),(0,n.jsx)(e7,{id:"marks-description",className:"text-gray-400 text-sm",children:"Maximum marks available for this question"}),(0,n.jsx)(te,{})]})}),r?.userTier==="PRO"&&r?.providers?.length>1&&(0,n.jsx)(e3,{control:v.control,name:"preferredProvider",render:({field:e})=>(0,n.jsxs)(e6,{children:[(0,n.jsx)(e9,{className:"text-white",children:"AI Model"}),(0,n.jsxs)(ti.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,n.jsx)(e8,{children:(0,n.jsx)(ti.bq,{className:"bg-white/10 border-white/20 text-white",children:(0,n.jsx)(ti.yv,{placeholder:"Auto-select"})})}),(0,n.jsxs)(ti.gC,{children:[(0,n.jsx)(ti.eb,{value:"",children:"Auto-select"}),r.providers.map(e=>(0,n.jsx)(ti.eb,{value:e.name,children:e.name},e.name))]})]}),(0,n.jsx)(te,{})]})})]}),(0,n.jsx)(e3,{control:v.control,name:"markScheme",render:({field:e})=>(0,n.jsxs)(e6,{children:[(0,n.jsx)(e9,{className:"text-white",children:"Mark Scheme (Optional)"}),(0,n.jsx)(e8,{children:(0,n.jsx)(ts.T,{...e,placeholder:"Paste the mark scheme if available...",className:"bg-white/10 border-white/20 text-white placeholder-gray-400 min-h-[80px]","aria-describedby":"mark-scheme-description"})}),(0,n.jsx)(e7,{id:"mark-scheme-description",className:"text-gray-400 text-sm",children:"Providing a mark scheme helps improve marking accuracy"}),(0,n.jsx)(te,{})]})}),(0,n.jsx)(eY.$,{type:"submit",disabled:!m,className:"w-full bg-blue-600 text-white",children:i?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tI.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Marking in progress..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tb.A,{className:"mr-2 h-4 w-4"}),"Get AI Feedback"]})}),!m&&r?.usage&&!f&&(0,n.jsxs)("p",{className:"text-sm text-red-400 text-center",children:["Daily limit reached (",r.usage.used,"/",r.usage.limit,")."," ",(0,n.jsx)(eY.$,{variant:"link",className:"p-0 h-auto text-red-400",onClick:()=>g(!0),children:"Upgrade to Pro"})," for unlimited marking."]})]})})})]}),e&&(0,n.jsx)(tS,{feedback:e}),i&&!e&&(0,n.jsxs)(eJ.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,n.jsxs)(eJ.aR,{children:[(0,n.jsxs)(eJ.ZB,{className:"text-white flex items-center gap-2",children:[(0,n.jsx)(tI.A,{className:"h-5 w-5 animate-spin"}),"Marking in Progress"]}),(0,n.jsx)(eJ.BT,{className:"text-gray-300",children:"Your work is being reviewed by our AI. This usually takes a few seconds."})]}),(0,n.jsx)(eJ.Wu,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Analyzing your answer"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Comparing to mark scheme"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}}),(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Generating feedback"})]})]})})]})]})]})}},86034:(e,t,i)=>{Promise.resolve().then(i.bind(i,81538))},86138:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var s=i(37413),r=i(12909),n=i(39916),a=i(81538);async function o(){return await (0,r.HW)()||(0,n.redirect)("/sign-in"),(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"AI Marking Assistant"}),(0,s.jsx)("p",{className:"text-gray-300",children:"Submit your GCSE work and get instant, detailed feedback from our AI examiners."})]}),(0,s.jsx)(a.MarkingForm,{})]})})}},89667:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});var s=i(60687);i(43210);var r=i(4780);function n({className:e,type:t,...i}){return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[4243,2822,111,1658,3928,4513,5814,7065,2092,9239,7747,9978,2775,9852,6400],()=>i(64977));module.exports=s})();