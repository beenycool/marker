"use strict";exports.id=3384,exports.ids=[3384],exports.modules={63384:(e,t,n)=>{var r;let o,i,s,a,u,l,c,d,f,p;n.d(t,{datadogLogs:()=>nd});let g={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},y=console,m={};Object.keys(g).forEach(e=>{m[e]=y[e]});let h="Datadog Browser SDK:",b={debug:m.debug.bind(y,h),log:m.log.bind(y,h),info:m.info.bind(y,h),warn:m.warn.bind(y,h),error:m.error.bind(y,h)},v="https://docs.datadoghq.com",w=`${v}/real_user_monitoring/browser/troubleshooting`,S="More details:";function x(e,t){return(...n)=>{try{return e(...n)}catch(e){b.error(t,e)}}}let C=!1;function k(e){C=e}function E(e){return function(){return _(e,this,arguments)}}function _(e,t,n){try{return e.apply(t,n)}catch(e){O(e)}}function O(e){if(T(e),o)try{o(e)}catch(e){T(e)}}function T(...e){C&&b.error("[MONITOR]",...e)}function R(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function $(e){let t=window.queueMicrotask;"function"==typeof t?t(E(e)):Promise.resolve().then(E(e))}class A{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.addObserver(e),{unsubscribe:()=>this.removeObserver(e)}}notify(e){this.observers.forEach(t=>t(e))}addObserver(e){this.observers.push(e),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0)}removeObserver(e){this.observers=this.observers.filter(t=>e!==t),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}function L(...e){return new A(t=>{let n=e.map(e=>e.subscribe(e=>t.notify(e)));return()=>n.forEach(e=>e.unsubscribe())})}class I extends A{constructor(e){super(),this.maxBufferSize=e,this.buffer=[]}notify(e){this.buffer.push(e),this.buffer.length>this.maxBufferSize&&this.buffer.shift(),super.notify(e)}subscribe(e){let t=!1;return $(()=>{for(let n of this.buffer){if(t)return;e(n)}t||this.addObserver(e)}),{unsubscribe:()=>{t=!0,this.removeObserver(e)}}}unbuffer(){$(()=>{this.maxBufferSize=this.buffer.length=0})}}let P={GRANTED:"granted",NOT_GRANTED:"not-granted"};function U(e,t){let n,r=R();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function D(e,t){return U(R(),"setTimeout")(E(e),t)}function N(e){U(R(),"clearTimeout")(e)}function B(e,t){return U(R(),"setInterval")(E(e),t)}function j(e){U(R(),"clearInterval")(e)}function q(){}function M(e){var t,n;let r=[],o=V(e,"stack"),s=String(e);if(o&&o.startsWith(s)&&(o=o.slice(s.length)),o&&o.split("\n").forEach(e=>{let t=function(e){let t=H.exec(e);if(!t)return;let n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=z.exec(t[2]);return r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}(e)||function(e){let t=W.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:"?",line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){let t=J.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||"?",line:+t[3],url:t[2]}}(e)||function(e){let t=K.exec(e);if(!t)return;let n=t[3]&&t[3].indexOf(" > eval")>-1,r=X.exec(t[3]);return n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||"?",line:t[4]?+t[4]:void 0,url:t[3]}}(e);t&&(!t.func&&t.line&&(t.func="?"),r.push(t))}),r.length>0&&function(){if(void 0!==i)return i;class e extends Error{constructor(){super(),this.name="Error"}}let[t,n]=[e,Error].map(e=>new e);return i=Y(Object.getPrototypeOf(t))&&n.stack!==t.stack}()&&e instanceof Error){let o=[],i=e;for(;(i=Object.getPrototypeOf(i))&&Y(i);){let e=(null==(t=i.constructor)?void 0:t.name)||"?";o.push(e)}for(let e=o.length-1;e>=0&&(null==(n=r[0])?void 0:n.func)===o[e];e--)r.shift()}return{message:V(e,"message"),name:V(e,"name"),stack:r}}let G="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",F="(?::(\\d+))",H=RegExp(`^\\s*at (.*?) ?\\(${G}${F}?${F}?\\)?\\s*$`,"i"),z=RegExp(`\\((\\S*)${F}${F}\\)`),W=RegExp(`^\\s*at ?${G}${F}?${F}??\\s*$`,"i"),J=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,K=/^\s*(.*?)(?:\((.*?)\))?(?:(?:(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle|\[wasm code\])(?::(\d+))?(?::(\d+))?)|@)\s*$/i,X=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function V(e,t){if("object"!=typeof e||!e||!(t in e))return;let n=e[t];return"string"==typeof n?n:void 0}let Z=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function Y(e){return String(e.constructor).startsWith("class ")}function Q(e){let t,n=Error(e);return n.name="HandlingStack",_(()=>{let e=M(n);e.stack=e.stack.slice(2),t=ee(e)}),t}function ee(e){let t=et(e);return e.stack.forEach(e=>{let n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?`(${e.args.join(", ")})`:"",o=e.line?`:${e.line}`:"",i=e.line&&e.column?`:${e.column}`:"";t+=`
  at ${n}${r} @ ${e.url}${o}${i}`}),t}function et(e){return`${e.name||"Error"}: ${e.message}`}function en(e,t,n,{computeHandlingStack:r}={}){let o=e[t];if("function"!=typeof o)if(!(t in e&&t.startsWith("on")))return{stop:q};else o=q;let i=!1,s=function(){let e;if(i)return o.apply(this,arguments);let t=Array.from(arguments);_(n,null,[{target:this,parameters:t,onPostCall:t=>{e=t},handlingStack:r?Q("instrumented method"):void 0}]);let s=o.apply(this,t);return e&&_(e,null,[s]),s};return e[t]=s,{stop:()=>{i=!0,e[t]===s&&(e[t]=o)}}}let er=31536e6;function eo(){return new Date().getTime()}function ei(){return performance.now()}function es(){return{relative:ei(),timeStamp:eo()}}function ea(){return void 0===s&&(s=performance.timing.navigationStart),s}let eu=/[^\u0000-\u007F]/;function el(e){return eu.test(e)?void 0!==window.TextEncoder?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function ec(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);let r=ed(Object.prototype),o=ed(Array.prototype),i=ed(Object.getPrototypeOf(e)),s=ed(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),o(),i(),s()}}function ed(e){let t=e.toJSON;return t?(delete e.toJSON,()=>{e.toJSON=t}):q}function ef(e,t=225280){let n=ed(Object.prototype),r=ed(Array.prototype),o=[],i=new WeakMap,s=ep(e,"$",void 0,o,i),a=JSON.stringify(s),u=a?a.length:0;if(u>t)return void eg(t,"discarded",e);for(;o.length>0&&u<t;){let n=o.shift(),r=0;if(Array.isArray(n.source))for(let s=0;s<n.source.length;s++){let a=ep(n.source[s],n.path,s,o,i);if(void 0!==a?u+=JSON.stringify(a).length:u+=4,u+=r,r=1,u>t){eg(t,"truncated",e);break}n.target[s]=a}else for(let s in n.source)if(Object.prototype.hasOwnProperty.call(n.source,s)){let a=ep(n.source[s],n.path,s,o,i);if(void 0!==a&&(u+=JSON.stringify(a).length+r+s.length+3,r=1),u>t){eg(t,"truncated",e);break}n.target[s]=a}}return n(),r(),s}function ep(e,t,n,r,o){let i=function(e){if(e&&"function"==typeof e.toJSON)try{return e.toJSON()}catch(e){}return e}(e);if(!i||"object"!=typeof i){var s;return"bigint"==typeof(s=i)?`[BigInt] ${s.toString()}`:"function"==typeof s?`[Function] ${s.name||"unknown"}`:"symbol"==typeof s?`[Symbol] ${s.description||s.toString()}`:s}let a=function e(t){try{if(t instanceof Event){var n;return{type:(n=t).type,isTrusted:n.isTrusted,currentTarget:n.currentTarget?e(n.currentTarget):null,target:n.target?e(n.target):null}}if(t instanceof RegExp)return`[RegExp] ${t.toString()}`;let r=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(r&&r[1])return`[${r[1]}]`}catch(e){}return"[Unserializable]"}(i);if("[Object]"!==a&&"[Array]"!==a&&"[Error]"!==a)return a;if(o.has(e))return`[Reference seen at ${o.get(e)}]`;let u=void 0!==n?`${t}.${n}`:t,l=Array.isArray(i)?[]:{};return o.set(e,u),r.push({source:i,target:l,path:u}),l}function eg(e,t,n){b.warn(`The data provided has been ${t} as it is over the limit of ${e} characters:`,n)}let ey="No stack, consider using an instance of Error";function em({stackTrace:e,originalError:t,handlingStack:n,componentStack:r,startClocks:o,nonErrorPrefix:i,useFallbackStack:s=!0,source:a,handling:u}){var l,c,d,f,p;let g=eh(t);return!e&&g&&(e=M(t)),{startClocks:o,source:a,handling:u,handlingStack:n,componentStack:r,originalError:t,type:e?e.name:void 0,message:(l=e,c=g,d=i,f=t,(null==l?void 0:l.message)&&(null==l?void 0:l.name)?l.message:c?"Empty message":`${d} ${ec(ef(f))}`),stack:e?ee(e):s?ey:void 0,causes:g?function(e,t){let n=e,r=[];for(;eh(null==n?void 0:n.cause)&&r.length<10;){let e=M(n.cause);r.push({message:n.cause.message,source:t,type:null==e?void 0:e.name,stack:e&&ee(e)}),n=n.cause}return r.length?r:void 0}(t,a):void 0,fingerprint:eh(p=t)&&"dd_fingerprint"in p?String(p.dd_fingerprint):void 0,context:function(e){if(null!==e&&"object"==typeof e&&"dd_context"in e)return e.dd_context}(t)}}function eh(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}let eb={AGENT:"agent",CONSOLE:"console",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function ev(e,t){return Object.keys(e).some(n=>e[n]===t)}function ew(e){return 0===Object.keys(e).length}!function(e){e.TRACK_INTAKE_REQUESTS="track_intake_requests",e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql"}(r||(r={}));let eS=new Set,ex="datadoghq.com",eC=["ddsource","ddtags"];function ek(e,t){let n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function eE(e){return 0!==e&&100*Math.random()<=e}function e_(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function eO(e,t,n=function(){if("undefined"!=typeof WeakSet){let e=new WeakSet;return{hasAlreadyBeenSeen(t){let n=e.has(t);return n||e.add(t),n}}}let e=[];return{hasAlreadyBeenSeen(t){let n=e.indexOf(t)>=0;return n||e.push(t),n}}}()){if(void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){let e=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,e)}if(n.hasAlreadyBeenSeen(t))return;if(Array.isArray(t)){let r=Array.isArray(e)?e:[];for(let e=0;e<t.length;++e)r[e]=eO(r[e],t[e],n);return r}let r="object"===e_(e)?e:{};for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=eO(r[e],t[e],n));return r}function eT(...e){let t;for(let n of e)null!=n&&(t=eO(t,n));return t}function eR(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function e$(){let e=[];return{add:t=>{e.push(t)>500&&e.splice(0,1)},remove:t=>{eR(e,t)},drain:t=>{e.forEach(e=>e(t)),e.length=0}}}function eA(){let e=R().DatadogEventBridge;if(e)return{getCapabilities(){var t;return JSON.parse((null==(t=e.getCapabilities)?void 0:t.call(e))||"[]")},getPrivacyLevel(){var t;return null==(t=e.getPrivacyLevel)?void 0:t.call(e)},getAllowedWebViewHosts:()=>JSON.parse(e.getAllowedWebViewHosts()),send(t,n,r){e.send(JSON.stringify({eventType:t,event:n,view:r?{id:r}:void 0}))}}}function eL(e){var t;void 0===e&&(e=null==(t=R().location)?void 0:t.hostname);let n=eA();return!!n&&n.getAllowedWebViewHosts().some(t=>e===t||e.endsWith(`.${t}`))}function eI(e){return Object.values(e)}function eP(e,t,n,r,{once:o,capture:i,passive:s}={}){let a=E(t=>{(t.isTrusted||t.__ddIsTrusted||e.allowUntrustedEvents)&&(o&&d(),r(t))}),u=s?{capture:i,passive:s}:i,l=window.EventTarget&&t instanceof EventTarget?window.EventTarget.prototype:t,c=U(l,"addEventListener");function d(){let e=U(l,"removeEventListener");n.forEach(n=>e.call(t,n,a,u))}return n.forEach(e=>c.call(t,e,a,u)),{stop:d}}let eU={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function eD({encoder:e,request:t,flushController:n,messageBytesLimit:r}){let o={},i=n.flushObservable.subscribe(n=>(function(n){var r;let i=eI(o).join("\n");o={};let s=(r=n.reason,eI(eU).includes(r)),a=s?t.sendOnExit:t.send;if(s&&e.isAsync){let t=e.finishSync();t.outputBytesCount&&a(eN(t));let n=[t.pendingData,i].filter(Boolean).join("\n");n&&a({data:n,bytesCount:el(n)})}else i&&e.write(e.isEmpty?i:`
${i}`),e.finish(e=>{a(eN(e))})})(n));function s(t,i){let s=ec(t),a=e.estimateEncodedBytesCount(s);if(a>=r)return void b.warn(`Discarded a message whose size was bigger than the maximum allowed size ${r}KB. ${S} ${w}/#technical-limitations`);void 0!==i&&void 0!==o[i]&&function(t){let r=o[t];delete o[t];let i=e.estimateEncodedBytesCount(r);n.notifyAfterRemoveMessage(i)}(i),n.notifyBeforeAddMessage(a),void 0!==i?(o[i]=s,n.notifyAfterAddMessage()):e.write(e.isEmpty?s:`
${s}`,e=>{n.notifyAfterAddMessage(e-a)})}return{flushController:n,add:s,upsert:s,stop:i.unsubscribe}}function eN(e){let t;return{data:"string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),bytesCount:e.outputBytesCount,encoding:e.encoding}}let eB=3145728;function ej(e,t,n,r,o){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?eq(e,t,n,{onSuccess:()=>eM(0,t,n,r,o),onFailure:()=>{t.queuedPayloads.enqueue(e),function e(t,n,r,o){2===t.transportStatus&&D(()=>{eq(t.queuedPayloads.first(),t,n,{onSuccess:()=>{t.queuedPayloads.dequeue(),t.currentBackoffTime=1e3,eM(1,t,n,r,o)},onFailure:()=>{t.currentBackoffTime=Math.min(6e4,2*t.currentBackoffTime),e(t,n,r,o)}})},t.currentBackoffTime)}(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function eq(e,t,n,{onSuccess:r,onFailure:o}){t.bandwidthMonitor.add(e),n(e,n=>{var i;t.bandwidthMonitor.remove(e),"opaque"!==(i=n).type&&(0===i.status&&!navigator.onLine||408===i.status||429===i.status||i.status>=500)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},o()):(t.transportStatus=0,r())})}function eM(e,t,n,r,o){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:`Reached max ${r} events size queued for upload: ${eB/1048576}MiB`,source:eb.AGENT,startClocks:es()}),t.queueFullReported=!0);let i=t.queuedPayloads;for(t.queuedPayloads=eG();i.size()>0;)ej(i.dequeue(),t,n,r,o)}function eG(){let e=[];return{bytesCount:0,enqueue(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:()=>e[0],dequeue(){let t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:()=>e.length,isFull(){return this.bytesCount>=eB}}}let eF=!1;function eH(e,t,n){fetch(e.build("fetch",t),{method:"POST",body:t.data,mode:"cors"}).then(E(e=>null==n?void 0:n({status:e.status,type:e.type}))).catch(E(()=>null==n?void 0:n({status:0})))}function ez(e,t,n,r,o,i,s=eD){let a=l(e,t),u=n&&l(e,n);function l(e,{endpoint:t,encoder:n}){return s({encoder:n,request:function(e,t,n){let r={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:eG(),queueFullReported:!1},o=(n,r)=>{var o,i,s,a;return o=e,i=t,s=n,a=r,void(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&s.bytesCount<i?fetch(o.build("fetch-keepalive",s),{method:"POST",body:s.data,keepalive:!0,mode:"cors"}).then(E(e=>null==a?void 0:a({status:e.status,type:e.type}))).catch(E(()=>eH(o,s,a))):eH(o,s,a))};return{send:t=>{ej(t,r,o,e.trackType,n)},sendOnExit:n=>{!function(e,t,n){if(navigator.sendBeacon&&n.bytesCount<t)try{let t=e.build("beacon",n);if(navigator.sendBeacon(t,n.data))return}catch(e){var r;r=e,eF||(eF=!0,O(r))}eH(e,n)}(e,t,n)}}}(t,e.batchBytesLimit,r),flushController:function({messagesLimit:e,bytesLimit:t,durationLimit:n,pageMayExitObservable:r,sessionExpireObservable:o}){let i,s=r.subscribe(e=>d(e.reason)),a=o.subscribe(()=>d("session_expire")),u=new A(()=>()=>{s.unsubscribe(),a.unsubscribe()}),l=0,c=0;function d(e){if(0===c)return;let t=c,n=l;c=0,l=0,f(),u.notify({reason:e,messagesCount:t,bytesCount:n})}function f(){N(i),i=void 0}return{flushObservable:u,get messagesCount(){return c},notifyBeforeAddMessage(e){l+e>=t&&d("bytes_limit"),c+=1,l+=e,void 0===i&&(i=D(()=>{d("duration_limit")},n))},notifyAfterAddMessage(n=0){l+=n,c>=e?d("messages_limit"):l>=t&&d("bytes_limit")},notifyAfterRemoveMessage(e){l-=e,0==(c-=1)&&f()}}}({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageMayExitObservable:o,sessionExpireObservable:i}),messageBytesLimit:e.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(e,t=!0){a.add(e),u&&t&&u.add(n.transformMessage?n.transformMessage(e):e)},upsert:(e,t)=>{a.upsert(e,t),u&&u.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop:()=>{a.stop(),u&&u.stop()}}}let eW={LOG:"log",CONFIGURATION:"configuration",USAGE:"usage"},eJ=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],eK=["ddog-gov.com"],eX=e$(),eV=e=>{eX.add(()=>eV(e))};function eZ(e,t){T(g.debug,e,t),eV({type:eW.LOG,message:e,status:"debug",...t})}function eY(e,t){eV({type:eW.LOG,status:"error",...function(e){if(eh(e)){var t;let n=M(e);return{error:{kind:n.name,stack:ee(((t=n).stack=t.stack.filter(e=>!e.url||eJ.some(t=>e.url.startsWith(t))),t))},message:n.message}}return{error:{stack:ey},message:`Uncaught ${ec(e)}`}}(e),...t})}function eQ(e){eV({type:eW.USAGE,usage:e})}function e0(e,t,n,r){return E((...o)=>(r&&eQ({feature:r}),e()[t][n](...o)))}function e1(e,t,n){e.changeObservable.subscribe(()=>{let r=e.getContext();n.add(e=>e[t].setContext(r))})}let e2={userContext:"userContext",globalContext:"globalContext",accountContext:"accountContext"},e3={getContext:"getContext",setContext:"setContext",setContextProperty:"setContextProperty",removeContextProperty:"removeContextProperty",clearContext:"clearContext"};function e4(e,t){t.silentMultipleInit||b.error(`${e} is already initialized.`)}function e5(e,t,n){let r={...e};for(let[e,{required:o,type:i}]of Object.entries(t))"string"!==i||e6(r[e])||(r[e]=String(r[e])),o&&e6(r[e])&&b.warn(`The property ${e} of ${n} is required; context will not be sent to the intake.`);return r}function e6(e){return null==e||""===e}function e8(e="",{propertiesConfig:t={}}={}){let n={},r=new A,o={getContext:()=>eO(void 0,n),setContext:i=>{!function(e){let t="object"===e_(e);return t||b.error("Unsupported context:",e),t}(i)?o.clearContext():n=ef(e5(i,t,e)),r.notify()},setContextProperty:(o,i)=>{n=ef(e5({...n,[o]:i},t,e)),r.notify()},removeContextProperty:o=>{delete n[o],e5(n,t,e),r.notify()},clearContext:()=>{n={},r.notify()},changeObservable:r};return o}function e9(e,t,n){let r=n.getHandler(),o=Array.isArray(r)?r:[r];return te[e]>=te[n.getLevel()]&&o.includes(t)}let e7={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},te={[e7.ok]:0,[e7.debug]:1,[e7.info]:2,[e7.notice]:4,[e7.warn]:5,[e7.error]:6,[e7.critical]:7,[e7.alert]:8,[e7.emerg]:9};function tt(e,{includeMessage:t=!1}={}){return{stack:e.stack,kind:e.type,message:t?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}let tn={console:"console",http:"http"},tr=Object.keys(e7);class to{constructor(e,t,n=tn.http,r=e7.debug,o={}){this.handleLogStrategy=e,this.handlerType=n,this.level=r,this.contextManager=e8("logger"),this.contextManager.setContext(o),t&&this.contextManager.setContextProperty("logger",{name:t})}logImplementation(e,t,n=e7.info,r,o){let i,s=ef(t);if(null!=r){let e=em({originalError:r,nonErrorPrefix:"Provided",source:eb.LOGGER,handling:"handled",startClocks:es()});i=eT({error:tt(e,{includeMessage:!0})},e.context,s)}else i=s;this.handleLogStrategy({message:ef(e),context:i,status:n},this,o)}log(e,t,n=e7.info,r){let o;e9(n,tn.http,this)&&(o=Q("log")),this.logImplementation(e,t,n,r,o)}setContext(e){this.contextManager.setContext(e)}getContext(){return this.contextManager.getContext()}setContextProperty(e,t){this.contextManager.setContextProperty(e,t)}removeContextProperty(e){this.contextManager.removeContextProperty(e)}clearContext(){this.contextManager.clearContext()}setHandler(e){this.handlerType=e}getHandler(){return this.handlerType}setLevel(e){this.level=e}getLevel(){return this.level}}function ti(e){return function(t,n,r){let o;e9(e,tn.http,this)&&(o=Q("log")),this.logImplementation(t,n,e,r,o)}}function ts(){return{view:{referrer:document.referrer,url:window.location.href}}}!function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);i>3&&s&&Object.defineProperty(t,n,s)}([function(e,t,n){let r=n.value;n.value=function(...e){return(o?E(r):r).apply(this,e)}}],to.prototype,"logImplementation",null),to.prototype.ok=ti(e7.ok),to.prototype.debug=ti(e7.debug),to.prototype.info=ti(e7.info),to.prototype.notice=ti(e7.notice),to.prototype.warn=ti(e7.warn),to.prototype.error=ti(e7.error),to.prototype.critical=ti(e7.critical),to.prototype.alert=ti(e7.alert),to.prototype.emerg=ti(e7.emerg);let ta=[];function tu(e,t,n,r){var o,i;let s=(o=n,i=r,`_dd_c_${o}_${i}`);ta.push(eP(e,window,["storage"],({key:e})=>{s===e&&t.setContext(u())},void 0)),t.changeObservable.subscribe(function(){localStorage.setItem(s,JSON.stringify(t.getContext()))});let a=eT(u(),t.getContext());function u(){let e=localStorage.getItem(s);return e?JSON.parse(e):{}}ew(a)||t.setContext(a)}function tl(){return e8("global context")}let tc="DISCARDED",td="SKIPPED";function tf(){return e8("account",{propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}})}function tp(){return e8("user",{propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}})}function tg(e){return function(e,t){let n=function(){if(void 0===a)try{let e=new ty("http://test/path");a="http://test/path"===e.href}catch(e){a=!1}return a?ty:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw Error(`Failed to construct URL: ${String(n)} ${ec({url:e,base:t})}`)}if(void 0===t&&!/:/.test(e))throw Error(`Invalid URL: '${e}'`);let r=document,o=r.createElement("a");if(void 0!==t){let e=(r=document.implementation.createHTMLDocument("")).createElement("base");e.href=t,r.head.appendChild(e),r.body.appendChild(o)}return o.href=e,o}(e,location.href).href}let ty=URL;function tm(){return u||(u=new A(e=>{if(!window.fetch)return;let{stop:t}=en(window,"fetch",t=>(function({parameters:e,onPostCall:t,handlingStack:n},r){let[o,i]=e,s=i&&i.method;void 0===s&&o instanceof Request&&(s=o.method);let a=void 0!==s?String(s).toUpperCase():"GET",u=o instanceof Request?o.url:tg(String(o)),l={state:"start",init:i,input:o,method:a,startClocks:es(),url:u,handlingStack:n};r.notify(l),e[0]=l.input,e[1]=l.init,t(e=>(function(e,t,n){function r(t){n.state="resolve",Object.assign(n,t),e.notify(n)}t.then(E(e=>{r({response:e,responseType:e.type,status:e.status,isAborted:!1})}),E(e=>{var t,o;r({status:0,isAborted:(null==(o=null==(t=n.init)?void 0:t.signal)?void 0:o.aborted)||e instanceof DOMException&&e.code===DOMException.ABORT_ERR,error:e})}))})(r,e,l))})(t,e),{computeHandlingStack:!0});return t})),u}function th(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,th)}let tb=/([\w-]+)\s*=\s*([^;]+)/g;function tv(e,t,n=0,r){let o=new Date;o.setTime(o.getTime()+n);let i=`expires=${o.toUTCString()}`,s=r&&r.crossSite?"none":"strict",a=r&&r.domain?`;domain=${r.domain}`:"",u=r&&r.secure?";secure":"",l=r&&r.partitioned?";partitioned":"";document.cookie=`${e}=${t};${i};path=/;samesite=${s}${a}${u}${l}`}function tw(e){var t=document.cookie;for(tb.lastIndex=0;;){let n=tb.exec(t);if(n){if(n[1]===e)return n[2]}else break}}function tS(e){return c||(c=function(e){let t=new Map;for(tb.lastIndex=0;;){let n=tb.exec(e);if(n)t.set(n[1],n[2]);else break}return t}(document.cookie)),c.get(e)}let tx="_dd_s",tC=144e5,tk=9e5,tE={COOKIE:"cookie",LOCAL_STORAGE:"local-storage"},t_=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function tO(e,t){let n={isExpired:"1"};return t.trackAnonymousUser&&((null==e?void 0:e.anonymousId)?n.anonymousId=null==e?void 0:e.anonymousId:n.anonymousId=th()),n}function tT(e){return!ew(e)}function tR(e){var t;return void 0!==e.isExpired||!((void 0===(t=e).created||eo()-Number(t.created)<tC)&&(void 0===t.expire||eo()<Number(t.expire)))}function t$(e){e.expire=String(eo()+tk)}function tA(e){return Object.entries(e).map(([e,t])=>"anonymousId"===e?`aid=${t}`:`${e}=${t}`).join("&")}function tL(e){let t={};return e&&(-1!==e.indexOf("&")||t_.test(e))&&e.split("&").forEach(e=>{let n=t_.exec(e);if(null!==n){let[,e,r]=n;"aid"===e?t.anonymousId=r:t[e]=r}}),t}function tI(e){let t=function(e){let t={};return t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===d){let e=`dd_site_test_${th()}`,t=window.location.hostname.split("."),n=t.pop();for(;t.length&&!tw(e);)tv(e,"test",1e3,{domain:n=`${t.pop()}.${n}`});tv(e,"",0,{domain:n}),d=n}return d}()),t}(e);return!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{let t=`dd_cookie_test_${th()}`,n="test";tv(t,n,6e4,e);let r=tw(t)===n;return tv(t,"",0,e),r}catch(e){return b.error(e),!1}}(t)?void 0:{type:tE.COOKIE,cookieOptions:t}}function tP(e,t,n,r){tv(tx,tA(n),t.trackAnonymousUser?er:r,e)}function tU(){return tL(tw(tx))}function tD(){try{let e=th(),t=`_dd_test_${e}`;localStorage.setItem(t,e);let n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:tE.LOCAL_STORAGE}:void 0}catch(e){return}}function tN(e){localStorage.setItem(tx,tA(e))}function tB(){return tL(localStorage.getItem(tx))}let tj=[];function tq(e,t,n=0){var r;let o,{isLockEnabled:i,persistSession:s,expireSession:a}=t,u=e=>s({...e,lock:o}),l=()=>{let{lock:e,...n}=t.retrieveSession();return{session:n,lock:e&&!function(e){var t;let[,n]=e.split("--");return!n||(t=Number(n),eo()-t>1e3)}(e)?e:void 0}};if(f||(f=e),e!==f)return void tj.push(e);if(i&&n>=100){eZ("Aborted session operation after max lock retries",{currentStore:l()}),tG(t);return}let c=l();if(i&&(c.lock||(o=th()+"--"+eo(),u(c.session),(c=l()).lock!==o)))return void tM(e,t,n);let d=e.process(c.session);if(i&&(c=l()).lock!==o)return void tM(e,t,n);if(d&&(tR(d)?a(d):(t$(d),i?u(d):s(d))),i&&!(d&&tR(d))){if((c=l()).lock!==o)return void tM(e,t,n);s(c.session),d=c.session}null==(r=e.after)||r.call(e,d||c.session),tG(t)}function tM(e,t,n){D(()=>{tq(e,t,n+1)},10)}function tG(e){f=void 0;let t=tj.shift();t&&tq(t,e)}let tF=["chrome-extension://","moz-extension://"];function tH(e){return tF.some(t=>e.includes(t))}function tz(e,t,n){let r=function(e,t){let n=`/api/v2/${t}`,r=e.proxy;if("string"==typeof r){let e=tg(r);return t=>`${e}?ddforward=${encodeURIComponent(`${n}?${t}`)}`}if("function"==typeof r)return e=>r({path:n,parameters:e});let o=function(e,t){let{site:n=ex,internalAnalyticsSubdomain:r}=t;if("logs"===e&&t.usePciIntake&&n===ex)return"pci.browser-intake-datadoghq.com";if(r&&n===ex)return`${r}.${ex}`;if("dd0g-gov.com"===n)return`http-intake.logs.${n}`;let o=n.split("."),i=o.pop();return`browser-intake-${o.join("-")}.${i}`}(t,e);return e=>`https://${o}${n}?${e}`}(e,t);return{build:(o,i)=>r(function({clientToken:e,internalAnalyticsSubdomain:t},n,r,o,{retry:i,encoding:s}){let a=["sdk_version:6.14.0",`api:${o}`].concat(r);i&&a.push(`retry_count:${i.count}`,`retry_after:${i.lastFailureStatus}`);let u=["ddsource=browser",`ddtags=${encodeURIComponent(a.join(","))}`,`dd-api-key=${e}`,`dd-evp-origin-version=${encodeURIComponent("6.14.0")}`,"dd-evp-origin=browser",`dd-request-id=${th()}`];return s&&u.push(`dd-evp-encoding=${s}`),"rum"===n&&u.push(`batch_time=${eo()}`),t&&u.reverse(),u.join("&")}(e,t,n,o,i)),tags:n,urlPrefix:r(""),trackType:t}}function tW(e,t){var n;let r=200-e.length-1;(t.length>r||(n=t,function(){try{return RegExp("[\\p{Ll}]","u"),!0}catch(e){return!1}}()&&RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(n)))&&b.warn(`${e} value doesn't meet tag requirements and will be sanitized. ${S} ${v}/getting_started/tagging/#defining-tags`);let o=t.replace(/,/g,"_");return`${e}:${o}`}function tJ(e,t){return null==e||"string"==typeof e||(b.error(`${t} must be defined as a string`),!1)}function tK(e,t){return void 0===e||!!("number"==typeof e&&e>=0&&e<=100)||(b.error(`${t} Sample Rate should be a number between 0 and 100`),!1)}let tX={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function tV(e){return{startClocks:es(),source:eb.REPORT,handling:"unhandled",...e}}function tZ(e,t,n,r,o){return n?ee({name:e,message:t,stack:[{func:"?",url:n,line:null!=r?r:void 0,column:null!=o?o:void 0}]}):void 0}function tY(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every(e=>t.includes(e))?"all"===e?t:function(e){let t=new Set;return e.forEach(e=>t.add(e)),Array.from(t)}(e):void b.error(`${n} should be "all" or an array with allowed values "${t.join('", "')}"`)}function tQ(){let e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write(n,r){let o=el(n);t+=o,e+=n,r&&r(o)},finish(e){e(this.finishSync())},finishSync(){let n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount:e=>e.length}}function t0(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||tS("datadog-synthetics-injects-rum"))}function t1(){let e=window._DATADOG_SYNTHETICS_PUBLIC_ID||tS("datadog-synthetics-public-id");return"string"==typeof e?e:void 0}function t2(){let e=window._DATADOG_SYNTHETICS_RESULT_ID||tS("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}let t3=1/0,t4=null,t5=new Set,t6=[];async function t8(){let e=tU(),t=[];t="cookieStore"in window?await window.cookieStore.getAll("_dd_s"):document.cookie.split(/\s*;\s*/).filter(e=>e.startsWith("_dd_s")),eZ("Unexpected session state",{session:e,isSyntheticsTest:!!(t1()&&t2()),createdTimestamp:null==e?void 0:e.created,expireTimestamp:null==e?void 0:e.expire,cookie:{count:t.length,...t}})}function t9(e,t){var n;return"0"===(n=t)||"1"===n?t:eE(e.sessionSampleRate)?"1":"0"}let t7={},ne={[g.log]:e7.info,[g.debug]:e7.debug,[g.info]:e7.info,[g.warn]:e7.warn,[g.error]:e7.error},nt=new WeakMap;function nn({target:e,parameters:[t,n]}){nt.set(e,{state:"open",method:String(t).toUpperCase(),url:tg(String(n))})}function nr({target:e}){let t=nt.get(e);t&&(t.isAborted=!0)}let no={XHR:"xhr",FETCH:"fetch"},ni={FETCH:no.FETCH,XHR:no.XHR};function ns(e,t){return e.length>t.requestErrorResponseLengthLimit?`${e.substring(0,t.requestErrorResponseLengthLimit)}...`:e}class na{constructor(){this.callbacks={}}notify(e,t){let n=this.callbacks[e];n&&n.forEach(e=>e(t))}subscribe(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter(e=>t!==e)}}}}let nu={[e7.ok]:g.debug,[e7.debug]:g.debug,[e7.info]:g.info,[e7.notice]:g.info,[e7.warn]:g.warn,[e7.error]:g.error,[e7.critical]:g.error,[e7.alert]:g.error,[e7.emerg]:g.error},nl=function(){let e={};return{register:(t,n)=>(e[t]||(e[t]=[]),e[t].push(n),{unregister:()=>{e[t]=e[t].filter(e=>e!==n)}}),triggerHook(t,n){let r=e[t]||[],o=[];for(let e of r){let t=e(n);if(t===tc)return tc;t!==td&&o.push(t)}return eT(...o)}}},nc="logs",nd=function(e){let t=function(e){let t=new A;return{tryToInit(t){e||(e=t)},update(n){e=n,t.notify()},isGranted:()=>e===P.GRANTED,observable:t}}(),n=function(e=function(){return new A(e=>{var t,n;let r=(t,n)=>{let r=em({stackTrace:n,originalError:t,startClocks:es(),nonErrorPrefix:"Uncaught",source:eb.SOURCE,handling:"unhandled"});e.notify(r)},{stop:o}=(t=r,en(R(),"onerror",({parameters:[e,n,r,o,i]})=>{let s;eh(i)||(s=function(e,t,n,r){var o;let i,s;if(void 0===t)return;let{name:a,message:u}=(o=e,"[object String]"===({}).toString.call(o)&&([,i,s]=Z.exec(o)),{name:i,message:s});return{name:a,message:u,stack:[{url:t,column:r,line:n}]}}(e,n,r,o)),t(null!=i?i:e,s)})),{stop:i}=(n=r,en(R(),"onunhandledrejection",({parameters:[e]})=>{n(e.reason||"Empty reason")}));return()=>{o(),i()}})}){let t=new I(500),n=e().subscribe(e=>{t.notify({type:0,error:e})});return{observable:t,stop:()=>{n.unsubscribe()}}}().observable,o=function(e,t,n){let o,i,s=e$(),a=tl();e1(a,e2.globalContext,s);let u=tf();e1(u,e2.accountContext,s);let l=tp();e1(l,e2.userContext,s);let c=t.observable.subscribe(d);function d(){if(!i||!o||!t.isGranted())return;c.unsubscribe();let e=n(o,i);s.drain(e)}return{init(e){var n;if(!e)return void b.error("Missing configuration");if(Array.isArray(n=e.enableExperimentalFeatures)&&n.filter(e=>ev(r,e)).forEach(e=>{eS.add(e)}),eL()&&(e={...e,clientToken:"empty"}),o=e,D(()=>{var t;t=function(e){let t={session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:e.telemetryUsageSampleRate,use_before_send:!!e.beforeSend,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_anonymous_user:e.trackAnonymousUser,session_persistence:e.sessionPersistence,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents,tracking_consent:e.trackingConsent,use_allowed_tracking_origins:Array.isArray(e.allowedTrackingOrigins)};return{forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,...t}}(e),eV({type:eW.CONFIGURATION,configuration:t})}),i)return void e4("DD_LOGS",e);let s=function(e){var t,n,r,o,i,s,a,u;!0===e.usePciIntake&&e.site&&"datadoghq.com"!==e.site&&b.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");let l=(t=e)&&t.clientToken?void 0===t.allowedTrackingOrigins||Array.isArray(t.allowedTrackingOrigins)?(!(u=t.site)||"string"!=typeof u||/(datadog|ddog|datad0g|dd0g)/.test(u)||(b.error(`Site should be a valid Datadog site. ${S} ${v}/getting_started/site/.`),0))&&tK(t.sessionSampleRate,"Session")&&tK(t.telemetrySampleRate,"Telemetry")&&tK(t.telemetryConfigurationSampleRate,"Telemetry Configuration")&&tK(t.telemetryUsageSampleRate,"Telemetry Usage")&&tJ(t.version,"Version")&&tJ(t.env,"Env")&&tJ(t.service,"Service")&&function(e,t="undefined"!=typeof location?location.origin:"",n){let r=e.allowedTrackingOrigins;if(!r)return function(e,t=Error().stack){return!tH(e)&&tH(t||"")}(t,void 0)&&b.warn("Running the Browser SDK in a Web extension content script is discouraged and will be forbidden in a future major release unless the `allowedTrackingOrigins` option is provided."),!0;let o=function(e,t,n=!1){return e.some(e=>{try{if("function"==typeof e)return e(t);if(e instanceof RegExp)return e.test(t);if("string"==typeof e)return n?t.startsWith(e):e===t}catch(e){b.error(e)}return!1})}(r,t);return o||b.error("SDK initialized on a non-allowed domain."),o}(t)?void 0===t.trackingConsent||ev(P,t.trackingConsent)?{beforeSend:t.beforeSend&&x(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:function(e){switch(e.sessionPersistence){case tE.COOKIE:return tI(e);case tE.LOCAL_STORAGE:return tD();case void 0:{let t=tI(e);return!t&&e.allowFallbackToLocalStorage&&(t=tD()),t}default:b.error(`Invalid session persistence '${String(e.sessionPersistence)}'`)}}(t),sessionSampleRate:null!=(n=t.sessionSampleRate)?n:100,telemetrySampleRate:null!=(r=t.telemetrySampleRate)?r:20,telemetryConfigurationSampleRate:null!=(o=t.telemetryConfigurationSampleRate)?o:5,telemetryUsageSampleRate:null!=(i=t.telemetryUsageSampleRate)?i:5,service:t.service||void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:null!=(s=t.trackingConsent)?s:P.GRANTED,trackAnonymousUser:null==(a=t.trackAnonymousUser)||a,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144,...function(e){var t,n;let r=e.site||ex,o=function(e){let{env:t,service:n,version:r,datacenter:o}=e,i=[];return t&&i.push(tW("env",t)),n&&i.push(tW("service",n)),r&&i.push(tW("version",r)),o&&i.push(tW("datacenter",o)),i}(e),i={logsEndpointBuilder:tz(t=e,"logs",n=o),rumEndpointBuilder:tz(t,"rum",n),profilingEndpointBuilder:tz(t,"profile",n),sessionReplayEndpointBuilder:tz(t,"replay",n)};return{replica:function(e,t){if(!e.replica)return;let n={...e,site:ex,clientToken:e.replica.clientToken},r={logsEndpointBuilder:tz(n,"logs",t),rumEndpointBuilder:tz(n,"rum",t)};return{applicationId:e.replica.applicationId,...r}}(e,o),site:r,...i}}(t)}:void b.error('Tracking Consent should be either "granted" or "not-granted"'):void 0:void b.error("Allowed Tracking Origins must be an array"):void b.error("Client Token is not configured, we will not send any data."),c=tY(e.forwardConsoleLogs,eI(g),"Forward Console Logs"),d=tY(e.forwardReports,eI(tX),"Forward Reports");if(l&&c&&d)return e.forwardErrorsToLogs&&!c.includes(g.error)&&c.push(g.error),{forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:c,forwardReports:d,requestErrorResponseLengthLimit:32768,...l}}(e);s&&(i=s,tm().subscribe(q),t.tryToInit(s.trackingConsent),d())},get initConfiguration(){return o},globalContext:a,accountContext:u,userContext:l,getInternalContext:q,handleLog(t,n,r,o=e(),i=eo()){s.add(e=>e.handleLog(t,n,r,o,i))}}}(ts,t,(r,i)=>{let s=e(i,ts,t,n);return o={init:e=>{e4("DD_LOGS",e)},initConfiguration:r,...s},s}),i=()=>o,s={},a={version:"6.14.0",onReady(e){e()},...{logger:new to((...e)=>o.handleLog(...e)),init:E(e=>o.init(e)),setTrackingConsent:E(e=>{t.update(e),eQ({feature:"set-tracking-consent",tracking_consent:e})}),getGlobalContext:e0(i,e2.globalContext,e3.getContext),setGlobalContext:e0(i,e2.globalContext,e3.setContext),setGlobalContextProperty:e0(i,e2.globalContext,e3.setContextProperty),removeGlobalContextProperty:e0(i,e2.globalContext,e3.removeContextProperty),clearGlobalContext:e0(i,e2.globalContext,e3.clearContext),createLogger:E((e,t={})=>(s[e]=new to((...e)=>o.handleLog(...e),ef(e),t.handler,t.level,ef(t.context)),s[e])),getLogger:E(e=>s[e]),getInitConfiguration:E(()=>eO(void 0,o.initConfiguration)),getInternalContext:E(e=>o.getInternalContext(e)),setUser:e0(i,e2.userContext,e3.setContext),getUser:e0(i,e2.userContext,e3.getContext),setUserProperty:e0(i,e2.userContext,e3.setContextProperty),removeUserProperty:e0(i,e2.userContext,e3.removeContextProperty),clearUser:e0(i,e2.userContext,e3.clearContext),setAccount:e0(i,e2.accountContext,e3.setContext),getAccount:e0(i,e2.accountContext,e3.getContext),setAccountProperty:e0(i,e2.accountContext,e3.setContextProperty),removeAccountProperty:e0(i,e2.accountContext,e3.removeContextProperty),clearAccount:e0(i,e2.accountContext,e3.clearContext)}};return Object.defineProperty(a,"_setDebug",{get:()=>k,enumerable:!1}),a}(function(e,t,n,r){var i,s,a,u;let c=new na,d=nl(),f=[];c.subscribe(1,e=>ek("logs",e));let h=e=>{c.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,origin:eb.AGENT,status:e7.error}}),eZ("Error reported to customer",{"error.message":e.message})},b=new A(t=>{let{stop:n}=eP(e,window,["visibilitychange","freeze"],e=>{"visibilitychange"===e.type&&"hidden"===document.visibilityState?t.notify({reason:eU.HIDDEN}):"freeze"===e.type&&t.notify({reason:eU.FROZEN})},{capture:!0}),r=eP(e,window,["beforeunload"],()=>{t.notify({reason:eU.UNLOADING})},void 0).stop;return()=>{n(),r()}}),v=function(e,t,n,r,i,s){let a=new A,{stop:u}=function(e,t,n,r,o){let i=[];if(eL()){let e=eA(),t=o.subscribe(t=>e.send("internal_telemetry",t));i.push(()=>t.unsubscribe())}else{let s=ez(e,{endpoint:e.rumEndpointBuilder,encoder:r(4)},e.replica&&{endpoint:e.replica.rumEndpointBuilder,encoder:r(5)},t,n,new A);i.push(()=>s.stop());let a=o.subscribe(t=>s.add(t,"datad0g.com"===e.site));i.push(()=>a.unsubscribe())}return{stop:()=>i.forEach(e=>e())}}(t,r,i,s,a),{enabled:l}=function(e,t,n,r){let i=new Set,s=!eK.includes(t.site)&&eE(t.telemetrySampleRate),a={[eW.LOG]:s,[eW.CONFIGURATION]:s&&eE(t.telemetryConfigurationSampleRate),[eW.USAGE]:s&&eE(t.telemetryUsageSampleRate)},u={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return eV=o=>{let s=ec(o);if(a[o.type]&&i.size<t.maxTelemetryEventsPerPage&&!i.has(s)){let t=function(e,t,n,r){let o=es(),i=e.triggerHook(1,{startTime:o.relative}),s={type:"telemetry",date:o.timeStamp,service:t,version:"6.14.0",source:"browser",_dd:{format_version:2},telemetry:eT(n,{runtime_env:r,connectivity:function(){var e;let t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:null==(e=t.connection)?void 0:e.effectiveType}}(),sdk_setup:"npm"}),experimental_features:Array.from(eS)};return eT(s,i)}(n,e,o,u);r.notify(t),ek("telemetry",t),i.add(s)}},eX.drain(),o=eY,{enabled:s}}(e,t,n,a);return{stop:u,enabled:l}}("browser-logs-sdk",e,d,h,b,tQ);f.push(v.stop);let w=!e.sessionStoreStrategyType||eL()||t0()?function(e){let t="1"===t9(e)?{}:void 0;return{findTrackedSession:()=>t,expireObservable:new A}}(e):function(e,t){let n=function(e,t,n,r){let o=new A,i=new A,s=function(e,t,n,r,o=function(e,t){return e.type===tE.COOKIE?function(e,t){let n={isLockEnabled:0===(null!=l?l:l=function(e=window){var t;let n=e.navigator.userAgent;return e.chrome||/HeadlessChrome/.test(n)?0:(null==(t=e.navigator.vendor)?void 0:t.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?1:2}()),persistSession:n=>tP(t,e,n,tk),retrieveSession:tU,expireSession:n=>tP(t,e,tO(n,e),tC)};if(!tS(tx)){let e=tS("_dd"),t=tS("_dd_r"),r=tS("_dd_l"),o={};e&&(o.id=e),r&&/^[01]$/.test(r)&&(o.logs=r),t&&/^[012]$/.test(t)&&(o.rum=t),ew(o)||(t$(o),n.persistSession(o))}return n}(t,e.cookieOptions):{isLockEnabled:!1,persistSession:tN,retrieveSession:tB,expireSession:e=>(function(e,t){tN(tO(e,t))})(e,t)}}(e,t)){let i,s=new A,a=new A,u=new A,c=B(function(){let e=o.retrieveSession();tR(e)?tq({process:e=>tO(e,t),after:p},o):p(e)},1e3);g();let{throttled:d,cancel:f}=function(e,t,n){let r,o,i=true,s=!1;return{throttled:(...t)=>{if(s){r=t;return}e(...t),s=!0,o=D(()=>{i&&r&&e(...r),s=!1,r=void 0},1e3)},cancel:()=>{N(o),s=!1,r=void 0}}}(()=>{tq({process:e=>{if(ew(e))return;let t=p(e);return function(e){if(ew(e))return;let t=r(e[n]);e[n]=t,delete e.isExpired,"0"===t||e.id||(e.id=th(),e.created=String(eo()))}(t),t},after:e=>{ew(e)||y()||(i=e,s.notify()),i=e}},o)},0);function p(e){var r;return tR(e)&&(e=tO(e,t)),y()&&((r=e,i.id!==r.id||i[n]!==r[n])?(i=tO(i,t),a.notify()):(u.notify({previousState:i,newState:e}),i=e)),e}function g(){tq({process:e=>{if(ew(e))return tO(e,t)},after:e=>{i=e}},o)}function y(){return(null==i?void 0:i[n])!==void 0}return{expandOrRenewSession:d,expandSession:function(){tq({process:e=>y()?p(e):void 0},o)},getSession:()=>i,renewObservable:s,expireObservable:a,sessionStateUpdateObservable:u,restartSession:g,expire:()=>{f(),o.expireSession(i),p(tO(i,t))},stop:()=>{j(c)},updateSessionState:function(e){tq({process:t=>({...t,...e}),after:p},o)}}}(e.sessionStoreStrategyType,e,t,n);t6.push(()=>s.stop());let a=function({expireDelay:e,maxEntries:t}){let n=[];t4||(t4=B(()=>void t5.forEach(e=>e()),6e4));let r=()=>{let t=ei()-e;for(;n.length>0&&n[n.length-1].endTime<t;)n.pop()};return t5.add(r),{add:function(e,r){let o={value:e,startTime:r,endTime:t3,remove:()=>{eR(n,o)},close:e=>{o.endTime=e}};return t&&n.length>=t&&n.pop(),n.unshift(o),o},find:function(e=t3,t={returnInactive:!1}){for(let r of n)if(r.startTime<=e){if(t.returnInactive||e<=r.endTime)return r.value;break}},closeActive:function(e){let t=n[0];t&&t.endTime===t3&&t.close(e)},findAll:function(e=t3,t=0){let r=e+t;return n.filter(t=>t.startTime<=r&&e<=t.endTime).map(e=>e.value)},reset:function(){n=[]},stop:function(){t5.delete(r),0===t5.size&&t4&&(j(t4),t4=null)}}}({expireDelay:tC});function u(){let e=s.getSession();return e?{id:e.id,trackingType:e[t],isReplayForced:!!e.forcedReplay,anonymousId:e.anonymousId}:(t8().catch(()=>void 0),{id:"invalid",trackingType:"0",isReplayForced:!1,anonymousId:void 0})}return t6.push(()=>a.stop()),s.renewObservable.subscribe(()=>{a.add(u(),ei()),o.notify()}),s.expireObservable.subscribe(()=>{i.notify(),a.closeActive(ei())}),s.expandOrRenewSession(),a.add(u(),{relative:0,timeStamp:ea()}.relative),r.observable.subscribe(()=>{r.isGranted()?s.expandOrRenewSession():s.expire()}),function(e,t){let{stop:n}=eP(e,window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0});t6.push(n)}(e,()=>{r.isGranted()&&s.expandOrRenewSession()}),function(e,t){let n=()=>{"visible"===document.visibilityState&&t()},{stop:r}=eP(e,document,["visibilitychange"],n,void 0);t6.push(r);let o=B(n,6e4);t6.push(()=>{j(o)})}(e,()=>s.expandSession()),function(e,t){let{stop:n}=eP(e,window,["resume"],t,{capture:!0});t6.push(n)}(e,()=>s.restartSession()),{findSession:(e,t)=>a.find(e,t),renewObservable:o,expireObservable:i,sessionStateUpdateObservable:s.sessionStateUpdateObservable,expire:s.expire,updateSessionState:s.updateSessionState}}(e,"logs",t=>t9(e,t),t);return{findTrackedSession:(e,t={returnInactive:!1})=>{let r=n.findSession(e,t);return r&&"1"===r.trackingType?{id:r.id,anonymousId:r.anonymousId}:void 0},expireObservable:n.expireObservable}}(e,n);d.register(0,({startTime:t})=>{let n=w.findTrackedSession(t);return w.findTrackedSession(t,{returnInactive:!0})?{service:e.service,session_id:n?n.id:void 0,session:n?{id:n.id}:void 0}:tc}),d.register(1,({startTime:e})=>{let t=w.findTrackedSession(e);return t&&t.id?{session:{id:t.id}}:td});let S=function(e,t,n){let r=tf();return t.storeContextsAcrossPages&&tu(t,r,n,4),e.register(0,()=>{let e=r.getContext();return ew(e)||!e.id?td:{account:e}}),r}(d,e,nc),x=function(e,t,n,r){let o=tp();return t.storeContextsAcrossPages&&tu(t,o,r,1),e.register(0,({eventType:e,startTime:r})=>{let i=o.getContext(),s=n.findTrackedSession(r);return(s&&s.anonymousId&&!i.anonymous_id&&t.trackAnonymousUser&&(i.anonymous_id=s.anonymousId),ew(i))?td:{type:e,usr:i}}),e.register(1,({startTime:e})=>{var t;return{anonymous_id:null==(t=n.findTrackedSession(e))?void 0:t.anonymousId}}),o}(d,e,w,nc),C=function(e,t,n,r){let o=tl();return t.storeContextsAcrossPages&&tu(t,o,n,2),e.register(0,()=>{let e=o.getContext();return r?{context:e}:e}),o}(d,e,nc,!1),{stop:k}=function(e){let t=window,n=!1;function r(e){let r=t0(),o=function(e,t){if(t&&t.getInternalContext)return t.getInternalContext(e)}(e,r?t.DD_RUM_SYNTHETICS:t.DD_RUM);if(o)return o;r&&!n&&(n=!0,eZ("Logs sent before RUM is injected by the synthetics worker",{testId:t1(),resultId:t2()}))}return e.register(0,({startTime:e})=>{let t=r(e);return t||td}),e.register(1,({startTime:e})=>{var t,n;let o=r(e);return o?{application:{id:o.application_id},view:{id:null==(t=o.view)?void 0:t.id},action:{id:null==(n=o.user_action)?void 0:n.id}}:td}),{stop:()=>{n=!1}}}(d);!function(e,t){var n;if(e.forwardErrorsToLogs)(!p&&(n=e,p=new A(e=>{let{stop:t}=en(XMLHttpRequest.prototype,"open",nn),{stop:r}=en(XMLHttpRequest.prototype,"send",t=>{!function({target:e,handlingStack:t},n,r){let o=nt.get(e);if(!o)return;o.state="start",o.startClocks=es(),o.isAborted=!1,o.xhr=e,o.handlingStack=t;let i=!1,{stop:s}=en(e,"onreadystatechange",()=>{e.readyState===XMLHttpRequest.DONE&&a()}),a=()=>{var t;u(),s(),i||(i=!0,o.state="complete",t=o.startClocks.timeStamp,o.duration=eo()-t,o.status=e.status,r.notify({...o}))},{stop:u}=eP(n,e,["loadend"],a,void 0);r.notify(o)}(t,n,e)},{computeHandlingStack:!0}),{stop:o}=en(XMLHttpRequest.prototype,"abort",nr);return()=>{t(),r(),o()}})),p).subscribe(e=>{"complete"===e.state&&r(ni.XHR,e)}),tm().subscribe(e=>{"resolve"===e.state&&r(ni.FETCH,e)});function r(n,r){var o,i,s,a,u,l;function c(e){var o;let i={isAborted:r.isAborted,handlingStack:r.handlingStack};t.notify(0,{rawLogsEvent:{message:`${(o=n,ni.XHR===o?"XHR":"Fetch")} error ${r.method} ${r.url}`,date:r.startClocks.timeStamp,error:{stack:e||"Failed to load",handling:void 0},http:{method:r.method,status_code:r.status,url:r.url},status:e7.error,origin:eb.NETWORK},domainContext:i})}o=r.url,!eC.every(e=>o.includes(e))&&(0===(i=r).status&&"opaque"!==i.responseType||r.status>=500)&&("xhr"in r?(s=r.xhr,a=e,c("string"==typeof s.response?ns(s.response,a):s.response)):r.response?function(e,t,n){var r,o,i;let s=function(e){try{return e.clone()}catch(e){return}}(e);s&&s.body?window.TextDecoder?(r=s.body,o=t.requestErrorResponseLengthLimit,i=(e,t)=>{e?n(`Unable to retrieve response: ${e}`):n(t)},function(e,t,n){let r=e.getReader(),o=[],i=0;function s(){let e,s;if(r.cancel().catch(q),n.collectStreamBody){let t;if(1===o.length)t=o[0];else{t=new Uint8Array(i);let e=0;o.forEach(n=>{t.set(n,e),e+=n.length})}e=t.slice(0,n.bytesLimit),s=t.length>n.bytesLimit}t(void 0,e,s)}!function e(){r.read().then(E(t=>{if(t.done)return void s();n.collectStreamBody&&o.push(t.value),(i+=t.value.length)>n.bytesLimit?s():e()}),E(e=>t(e)))}()}(r,(e,t,n)=>{if(e)i(e);else{let e=new TextDecoder().decode(t);n&&(e+="..."),i(void 0,e)}},{bytesLimit:o,collectStreamBody:!0})):s.text().then(E(e=>n(ns(e,t))),E(e=>n(`Unable to retrieve response: ${e}`))):n()}(r.response,e,c):r.error&&(u=r.error,l=e,c(ns(ee(M(u)),l))))}}(e,c),function(e,t,n){if(e.forwardErrorsToLogs)n.subscribe(e=>{if(0===e.type){let n=e.error;t.notify(0,{rawLogsEvent:{message:n.message,date:n.startClocks.timeStamp,error:tt(n),origin:eb.SOURCE,status:e7.error},messageContext:n.context})}})}(e,c,r),r.unbuffer(),i=e,s=c,L(...i.forwardConsoleLogs.map(e=>{var t;return t7[e]||(t7[e]=(t=e,new A(e=>{let n=y[t];return y[t]=(...r)=>{n.apply(console,r);let o=Q("console error");_(()=>{e.notify(function(e,t,n){let r=e.map(e=>{var t;return"string"==typeof(t=e)?ef(t):eh(t)?et(M(t)):ec(ef(t),void 0,2)}).join(" ");if(t===g.error){let o=em({originalError:e.find(eh),handlingStack:n,startClocks:es(),source:eb.CONSOLE,handling:"handled",nonErrorPrefix:"Provided",useFallbackStack:!1});return o.message=r,{api:t,message:r,handlingStack:n,error:o}}return{api:t,message:r,error:void 0,handlingStack:n}}(r,t,o))})},()=>{y[t]=n}}))),t7[e]})).subscribe(e=>{var t;let n={rawLogsEvent:{date:eo(),message:e.message,origin:eb.CONSOLE,error:e.error&&tt(e.error),status:ne[e.api]},messageContext:null==(t=e.error)?void 0:t.context,domainContext:{handlingStack:e.handlingStack}};s.notify(0,n)}),a=e,u=c,(function(e,t){var n,r;let o=[];t.includes(tX.cspViolation)&&o.push((n=e,new A(e=>{let{stop:t}=eP(n,document,["securitypolicyviolation"],t=>{e.notify(function(e){let t=`'${e.blockedURI}' blocked by '${e.effectiveDirective}' directive`;return tV({type:e.effectiveDirective,message:`${tX.cspViolation}: ${t}`,originalError:e,csp:{disposition:e.disposition},stack:tZ(e.effectiveDirective,e.originalPolicy?`${t} of the policy "${function(e,t,n=""){let r=e.charCodeAt(99),o=r>=55296&&r<=56319?101:100;return e.length<=o?e:`${e.slice(0,o)}${n}`}(e.originalPolicy,100,"...")}"`:"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}(t))},void 0);return t})));let i=t.filter(e=>e!==tX.cspViolation);return i.length&&o.push((r=i,new A(e=>{if(!window.ReportingObserver)return;let t=E((t,n)=>t.forEach(t=>e.notify(function(e){let{type:t,body:n}=e;return tV({type:n.id,message:`${t}: ${n.message}`,originalError:e,stack:tZ(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(t)))),n=new window.ReportingObserver(t,{types:r,buffered:!0});return n.observe(),()=>{n.disconnect()}}))),L(...o)})(a,a.forwardReports).subscribe(e=>{let t,n=e.message,r="deprecation"===e.originalError.type?e7.warn:e7.error;if(r===e7.error)t=tt(e);else{var o,i;e.stack&&(n+=` Found in ${o=e.stack,null==(i=/@ (.+)/.exec(o))?void 0:i[1]}`)}u.notify(0,{rawLogsEvent:{date:eo(),message:n,origin:eb.REPORT,error:t,status:r}})});let{handleLog:O}={handleLog:function(e,t,n,r,o){let i=eT(t.getContext(),e.context);if(e9(e.status,tn.console,t)&&function({status:e,message:t},n){m[nu[e]].call(y,t,n)}(e,i),e9(e.status,tn.http,t)){let t={rawLogsEvent:{date:o||eo(),message:e.message,status:e.status,origin:eb.LOGGER},messageContext:i,savedCommonContext:r};n&&(t.domainContext={handlingStack:n}),c.notify(0,t)}}},T=tr.concat(["custom"]),R={};if(T.forEach(t=>{var n;let r,o;R[t]=(n=e.eventRateLimiterThreshold,r=0,o=!1,{isLimitReached(){if(0===r&&D(()=>{r=0},6e4),(r+=1)<=n||o)return o=!1,!1;if(r===n+1){o=!0;try{h({message:`Reached max number of ${t}s by minute: ${n}`,source:eb.AGENT,startClocks:es()})}finally{o=!1}}return!0}})}),c.subscribe(0,({rawLogsEvent:n,messageContext:r,savedCommonContext:o,domainContext:i})=>{var s,a;let u=n.date-ea(),l=o||t(),f=d.triggerHook(0,{startTime:u});if(f===tc)return;let p=eT({view:l.view},f,n,r);(null==(s=e.beforeSend)?void 0:s.call(e,p,i))===!1||p.origin!==eb.AGENT&&(null!=(a=R[p.status])?a:R.custom).isLimitReached()||c.notify(1,p)}),eL()){let e=eA();c.subscribe(1,t=>{e.send("log",t)})}else{let{stop:t}=function(e,t,n,r,o){let i=ez(e,{endpoint:e.logsEndpointBuilder,encoder:tQ()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:tQ()},n,r,o.expireObservable);return t.subscribe(1,e=>{i.add(e)}),i}(e,c,h,b,w);f.push(()=>t())}return{handleLog:O,getInternalContext:({get:e=>{let t=w.findTrackedSession(e);if(t)return{session_id:t.id}}}).get,accountContext:S,globalContext:C,userContext:x,stop:()=>{f.forEach(e=>e()),k()}}});!function(e,t,n){let r=e[t];r&&!r.q&&r.version&&b.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[t]=n,r&&r.q&&r.q.forEach(e=>x(e,"onReady callback threw an error:")())}(R(),"DD_LOGS",nd)}};