"use strict";exports.id=3342,exports.ids=[3342],exports.modules={5069:(e,s,t)=>{t.d(s,{L:()=>r,db:()=>i});var a=t(56621);async function r(){return await (0,a.b)()}let i=(0,a.b)()},12909:(e,s,t)=>{t.d(s,{HW:()=>l,hS:()=>n,rN:()=>c});var a=t(36463),r=t(56621);let i=new Map;async function l(){let e,s=await (0,r.b)(),{data:{session:t},error:l}=await s.auth.getSession();if(l||!t)return null;let n=t.user.id,c=t.user.email||"",o=`user:${n}`,d=i.get(o);if(d&&Date.now()-d.timestamp<6e4)return d.user;let{data:x,error:m}=await s.from("users").select("*").eq("id",n).single();if(x){let{data:t,error:r}=await s.from("users").update({email:c,updated_at:new Date().toISOString()}).eq("id",n).select("*").single();if(r)return a.v.error("Error updating user:",r),null;e=t}else{let{data:t,error:r}=await s.from("users").insert({id:n,email:c,subscription_tier:"FREE",role:"STUDENT",onboarding_completed:!1}).select("*").single();if(r)return a.v.error("Error creating user:",r),null;e=t}if(i.set(o,{user:e,timestamp:Date.now()}),i.size>50){let e=Date.now();for(let[s,t]of i.entries())e-t.timestamp>6e4&&i.delete(s)}return e}async function n(e){let s=await (0,r.b)(),{data:t}=await s.rpc("is_feature_active",{flag_name:"summer_promotion_2024"}),{data:i,error:l}=await s.from("users").select("*").eq("id",e).single();if(l||!i)return{canUse:!1,usedToday:0,limit:0};let n=new Date;n.setHours(0,0,0,0);let c=n.toISOString().split("T")[0],{data:o}=await s.from("usage_tracking").select("*").eq("user_id",e).eq("date",c).single(),d=o;if(!o){let{data:e,error:t}=await s.from("usage_tracking").insert({user_id:i.id,date:c,api_calls_used:0,tier:i.subscription_tier}).select("*").single();if(t)return a.v.error("Error creating usage tracking:",t),{canUse:!1,usedToday:0,limit:0};d=e}let x=t||"PRO"===i.subscription_tier?parseInt(process.env.PRO_TIER_DAILY_LIMIT||"200"):parseInt(process.env.FREE_TIER_DAILY_LIMIT||"20");return{canUse:(d?.api_calls_used||0)<x,usedToday:d?.api_calls_used||0,limit:x}}async function c(e){let s=await (0,r.b)(),t=new Date;t.setHours(0,0,0,0);let a=t.toISOString().split("T")[0],{data:i}=await s.from("usage_tracking").select("*").eq("user_id",e).eq("date",a).single();if(i)await s.from("usage_tracking").update({api_calls_used:i.api_calls_used+1}).eq("user_id",e).eq("date",a);else{let{data:t}=await s.from("users").select("subscription_tier").eq("id",e).single();await s.from("usage_tracking").insert({user_id:e,date:a,api_calls_used:1,tier:t?.subscription_tier||"FREE"})}}},23562:(e,s,t)=>{t.d(s,{k:()=>l});var a=t(60687);t(43210);var r=t(25177),i=t(4780);function l({className:e,value:s,...t}){return(0,a.jsx)(r.bL,{"data-slot":"progress",className:(0,i.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...t,children:(0,a.jsx)(r.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}},27886:(e,s,t)=>{t.d(s,{A:()=>z});var a=t(60687),r=t(43210),i=t(44493),l=t(29523),n=t(28559),c=t(18469),o=t(8819),d=t(36058),x=t(97840),m=t(27900),h=t(41862),u=t(45583),p=t(29867),g=t(51743),j=t(88920),w=t(96834),b=t(34729),N=t(5336),f=t(56085),y=t(15807),v=t(28947),k=t(82080),A=t(58887),S=t(11860),_=t(70615);let I=(e,s)=>{let t=[{type:"Structure",title:"Answer Structure",content:`For a ${e.marks}-mark question, consider organizing your answer into ${Math.ceil(e.marks/2)} main points. Each point should be well-developed with evidence or examples.`,icon:k.A},{type:"Key Points",title:"Key Points to Cover",content:`Based on the question, make sure to address: 1) Direct answer to the question, 2) Supporting evidence or examples, 3) Analysis or explanation of significance${e.marks>=15?", 4) Evaluation or conclusion":""}.`,icon:v.A},{type:"Improvement",title:"Enhance Your Answer",content:s.length>0?"Your current answer is a good start. Consider adding more specific examples and deeper analysis to fully address all aspects of the question.":"Start by clearly stating your main argument or answer, then provide supporting evidence and analysis.",icon:f.A}];return e.topic&&t.push({type:"Subject Focus",title:`${e.topic} Focus`,content:`For ${e.topic} questions, ensure you use appropriate terminology and demonstrate understanding of key concepts. Consider how this relates to broader themes in the subject.`,icon:A.A}),t};function E({question:e,questionNumber:s,currentAnswer:t,onClose:n,onApplySuggestion:c}){let[o,d]=(0,r.useState)(!1),[x,m]=(0,r.useState)(()=>I(e,t)),[p,j]=(0,r.useState)(null),b=async()=>{d(!0),await new Promise(e=>setTimeout(e,1500)),m(I(e,t)),d(!1)},v=e=>{navigator.clipboard.writeText(e),j(e),setTimeout(()=>j(null),2e3)},k=e=>{c(t?`${t}

${e}`:e),n()};return(0,a.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsx)(g.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-4xl max-h-[80vh] overflow-hidden",children:(0,a.jsxs)(i.Zp,{className:"bg-gray-900 border-white/10",children:[(0,a.jsx)(i.aR,{className:"border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/20",children:(0,a.jsx)(u.A,{className:"h-5 w-5 text-purple-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.ZB,{className:"text-white flex items-center gap-2",children:["AI Help - Question ",s,(0,a.jsxs)(w.E,{className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:[e.marks," marks"]})]}),(0,a.jsx)(i.BT,{className:"text-gray-300",children:"Get AI-powered guidance for your answer"})]})]}),(0,a.jsx)(l.$,{onClick:n,variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(i.Wu,{className:"p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700/50",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Question:"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.question}),e.topic&&(0,a.jsx)(w.E,{variant:"outline",className:"border-white/20 text-white mt-2",children:e.topic})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-white font-medium",children:"AI Suggestions"}),(0,a.jsxs)(l.$,{onClick:b,disabled:o,variant:"outline",size:"sm",className:"border-purple-500/30 text-purple-300 hover:bg-purple-500/10",children:[o?(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),o?"Generating...":"Regenerate"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map((e,s)=>{let t=e.icon;return(0,a.jsx)(g.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:(0,a.jsxs)(i.Zp,{className:"bg-white/5 border-white/10 h-full",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t,{className:"h-4 w-4 text-purple-400"}),(0,a.jsx)(i.ZB,{className:"text-white text-sm",children:e.title}),(0,a.jsx)(w.E,{variant:"outline",className:"border-white/20 text-white text-xs",children:e.type})]})}),(0,a.jsxs)(i.Wu,{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.content}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.$,{onClick:()=>v(e.content),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10 text-xs",children:[p===e.content?(0,a.jsx)(N.A,{className:"h-3 w-3 mr-1"}):(0,a.jsx)(_.A,{className:"h-3 w-3 mr-1"}),p===e.content?"Copied!":"Copy"]}),(0,a.jsxs)(l.$,{onClick:()=>k(e.content),variant:"outline",size:"sm",className:"border-purple-500/30 text-purple-300 hover:bg-purple-500/10 text-xs",children:[(0,a.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Apply"]})]})]})]})},s)})})]}),t&&(0,a.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-blue-400 font-medium text-sm",children:"Your Current Answer"})]}),(0,a.jsx)("div",{className:"max-h-32 overflow-y-auto",children:(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:t})})]}),(0,a.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsx)("span",{className:"text-yellow-400 font-medium text-sm",children:"Pro Tips"})]}),(0,a.jsxs)("ul",{className:"text-gray-300 text-sm space-y-1",children:[(0,a.jsx)("li",{children:"• Use specific examples and evidence to support your points"}),(0,a.jsx)("li",{children:"• Structure your answer with clear paragraphs"}),(0,a.jsx)("li",{children:"• Address all parts of the question"}),(0,a.jsx)("li",{children:"• Show your reasoning and analysis"})]})]})]})]})})})}let L=e=>e<=5?"bg-green-500/20 text-green-300 border-green-500/30":e<=15?"bg-yellow-500/20 text-yellow-300 border-yellow-500/30":"bg-red-500/20 text-red-300 border-red-500/30",C=e=>e>=10,q=e=>Math.round(27.5*e);function P({question:e,questionNumber:s,answer:t,isActive:n,onAnswerChange:c,onFocus:o}){let[d,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),p=t.trim().split(/\s+/).filter(e=>e.length>0).length,k=q(e.marks),A=C(e.marks),S=t.trim().length>0;return(0,a.jsxs)(g.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`transition-all duration-300 ${n?"ring-2 ring-blue-500/50 ring-offset-2 ring-offset-gray-900":""}`,children:[(0,a.jsxs)(i.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10 hover:bg-white/[0.07] transition-all duration-300",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-sm font-medium transition-colors ${S?"bg-green-500/20 border-green-500/50 text-green-300":"bg-white/10 border-white/20 text-white"}`,children:S?(0,a.jsx)(N.A,{className:"h-4 w-4"}):s}),(0,a.jsxs)(i.ZB,{className:"text-white text-lg",children:["Question ",s]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.topic&&(0,a.jsx)(w.E,{variant:"outline",className:"border-white/20 text-white text-xs",children:e.topic}),(0,a.jsxs)(w.E,{className:L(e.marks),children:[e.marks," ",1===e.marks?"mark":"marks"]}),A&&(0,a.jsxs)(w.E,{className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:[(0,a.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Long Answer"]})]})]})}),(0,a.jsxs)(i.Wu,{className:"space-y-4 cursor-pointer",onClick:o,children:[(0,a.jsx)("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700/50",children:(0,a.jsx)("p",{className:"text-white whitespace-pre-wrap text-base leading-relaxed",children:e.question})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("label",{className:"text-white font-medium text-sm",children:"Your Answer:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[A&&(0,a.jsxs)(l.$,{onClick:e=>{e.stopPropagation(),h(!0)},variant:"outline",size:"sm",className:"border-purple-500/30 text-purple-300 hover:bg-purple-500/10 text-xs",children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"AI Help"]}),e.markScheme&&(0,a.jsxs)(l.$,{onClick:e=>{e.stopPropagation(),x(!d)},variant:"outline",size:"sm",className:"border-yellow-500/30 text-yellow-300 hover:bg-yellow-500/10 text-xs",children:[(0,a.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Hint"]})]})]}),(0,a.jsx)(b.T,{value:t,onChange:e=>c(e.target.value),onClick:e=>e.stopPropagation(),placeholder:"Type your answer here...",className:`min-h-[120px] bg-gray-800/50 border-gray-700/50 text-white placeholder-gray-400 resize-y transition-all duration-200 ${n?"border-blue-500/50 focus:border-blue-500":"focus:border-white/20"}`,rows:A?8:5}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-gray-400",children:[t.length," characters"]}),(0,a.jsxs)("span",{className:`${(()=>{let e=p/k;return e<.5?"text-red-400":e<.8?"text-yellow-400":e>1.5?"text-orange-400":"text-green-400"})()} font-medium`,children:[p," words"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,a.jsx)(v.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["Suggested: ~",k," words"]})]})]})]}),d&&e.markScheme&&(0,a.jsxs)(g.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsx)("span",{className:"text-yellow-400 font-medium text-sm",children:"Mark Scheme Guide"})]}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:e.markScheme})]}),S&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Answer provided"})]})]})]}),(0,a.jsx)(j.N,{children:m&&(0,a.jsx)(E,{question:e,questionNumber:s,currentAnswer:t,onClose:()=>h(!1),onApplySuggestion:c})})]})}var $=t(23562),T=t(65822),M=t(10022),R=t(86561),B=t(48730);let D=e=>e>=10,Z=(e,s)=>{let t=s?.trim().length>0,a=D(e.marks);return t?{status:"completed",icon:N.A,color:"bg-green-500/20 text-green-300 border-green-500/30 hover:bg-green-500/30"}:a?{status:"long",icon:f.A,color:"bg-purple-500/20 text-purple-300 border-purple-500/30 hover:bg-purple-500/30"}:{status:"pending",icon:T.A,color:"bg-white/10 text-white border-white/20 hover:bg-white/20"}};function U({questions:e,answers:s,activeQuestionId:t,onQuestionSelect:r,totalMarks:n,paperTitle:c,paperInfo:o}){let d=e.filter(e=>s[e.id]?.trim().length>0).length,x=d/e.length*100,m=e.filter(e=>s[e.id]?.trim().length>0).reduce((e,s)=>e+s.marks,0),h=e.filter(e=>D(e.marks));return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(i.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"text-white text-lg flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-5 w-5"}),"Paper Info"]})}),(0,a.jsxs)(i.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-white font-medium text-sm truncate",children:c}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-gray-300",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(w.E,{variant:"outline",className:"border-white/20 text-white text-xs",children:o.subject})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:o.examBoard}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:o.year})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-3 w-3 text-gray-400"}),(0,a.jsxs)("span",{className:"text-gray-300",children:[e.length," questions"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-3 w-3 text-gray-400"}),(0,a.jsxs)("span",{className:"text-gray-300",children:[n," marks"]})]})]})]})]}),(0,a.jsxs)(i.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"text-white text-lg flex items-center gap-2",children:[(0,a.jsx)(R.A,{className:"h-5 w-5"}),"Progress"]})}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Questions Answered"}),(0,a.jsxs)("span",{className:"text-white font-medium",children:[d,"/",e.length]})]}),(0,a.jsx)($.k,{value:x,className:"h-2"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-300",children:"Marks Attempted"}),(0,a.jsxs)("span",{className:"text-white font-medium",children:[m,"/",n]})]}),(0,a.jsx)($.k,{value:m/n*100,className:"h-2"})]}),h.length>0&&(0,a.jsxs)("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-purple-400"}),(0,a.jsx)("span",{className:"text-purple-400 font-medium text-sm",children:"Long Questions"})]}),(0,a.jsxs)("p",{className:"text-gray-300 text-xs",children:[h.length," questions with AI help available"]})]})]})]}),(0,a.jsxs)(i.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,a.jsxs)(i.aR,{className:"pb-3",children:[(0,a.jsxs)(i.ZB,{className:"text-white text-lg flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-5 w-5"}),"Questions"]}),(0,a.jsx)(i.BT,{className:"text-gray-300 text-sm",children:"Click to jump to any question"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-2",children:e.map((e,i)=>{let n=s[e.id]||"",c=Z(e,n),o=c.icon,d=t===e.id;return(0,a.jsx)(g.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*i},children:(0,a.jsx)(l.$,{onClick:()=>r(e.id),variant:"outline",className:`
                      w-full justify-start text-left h-auto p-3 transition-all duration-200
                      ${d?"bg-blue-500/20 border-blue-500/50 text-blue-300":c.color}
                    `,children:(0,a.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,a.jsx)(o,{className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium",children:i+1})]}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(w.E,{variant:"outline",className:"border-current text-current text-xs",children:[e.marks,"m"]}),e.topic&&(0,a.jsx)("span",{className:"text-xs text-gray-400 truncate",children:e.topic}),D(e.marks)&&(0,a.jsx)(f.A,{className:"h-3 w-3 text-purple-400 flex-shrink-0"})]})})]})})},e.id)})})})]}),(0,a.jsxs)(i.Zp,{className:"bg-white/5 backdrop-blur-sm border-white/10",children:[(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)(i.ZB,{className:"text-white text-lg flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"h-5 w-5"}),"Quick Stats"]})}),(0,a.jsxs)(i.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,a.jsxs)("div",{className:"text-center p-2 bg-green-500/10 border border-green-500/20 rounded",children:[(0,a.jsx)("div",{className:"text-green-300 font-medium",children:d}),(0,a.jsx)("div",{className:"text-gray-400",children:"Completed"})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-yellow-500/10 border border-yellow-500/20 rounded",children:[(0,a.jsx)("div",{className:"text-yellow-300 font-medium",children:e.length-d}),(0,a.jsx)("div",{className:"text-gray-400",children:"Remaining"})]})]}),d>0&&(0,a.jsxs)("div",{className:"text-center p-2 bg-blue-500/10 border border-blue-500/20 rounded",children:[(0,a.jsxs)("div",{className:"text-blue-300 font-medium",children:[Math.round(x),"%"]}),(0,a.jsx)("div",{className:"text-gray-400 text-xs",children:"Complete"})]})]})]})]})}function z({paper:e,totalMarks:s,onBack:t,onSubmit:w}){let[b,N]=(0,r.useState)({}),[f,y]=(0,r.useState)(e.questions[0]?.id||null),[v,k]=(0,r.useState)(!1),[A]=(0,r.useState)(Date.now()),[S,_]=(0,r.useState)(0),[I,E]=(0,r.useState)(!0),[L,C]=(0,r.useState)(!1),[q,$]=(0,r.useState)(!1),{toast:T}=(0,p.dj)(),M=(0,r.useRef)({}),R=(0,r.useRef)(null),B=e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60),a=e%60;return s>0?`${s}:${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${t}:${a.toString().padStart(2,"0")}`},D=(e,s)=>{N(t=>({...t,[e]:s}))},Z=e=>{y(e)},z=()=>Object.values(b).filter(e=>e.trim().length>0).length,F=async()=>{if(0===z())return void T({title:"No answers provided",description:"Please answer at least one question before submitting.",variant:"destructive"});k(!0),E(!1);try{let e=Math.floor((Date.now()-A)/1e3);await w(b,e),T({title:"Paper submitted successfully!",description:"Your answers have been submitted and will be marked automatically."})}catch(e){T({title:"Submission failed",description:"Failed to submit your paper. Please try again.",variant:"destructive"}),E(!0)}finally{k(!1),C(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,a.jsx)("div",{className:"sticky top-0 z-50 bg-gray-900/95 backdrop-blur-sm border-b border-white/10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(l.$,{onClick:t,variant:"ghost",className:"text-white hover:bg-white/10",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Back to Papers"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:e.title}),(0,a.jsxs)("p",{className:"text-gray-300 text-sm",children:[e.subject," • ",e.examBoard," • ",e.year]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-white font-mono text-sm",children:B(S)})]}),q&&(0,a.jsxs)(g.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center gap-2 text-green-400 text-sm",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Auto-saved"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.$,{onClick:()=>E(!I),variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:I?(0,a.jsx)(d.A,{className:"h-4 w-4"}):(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsxs)(l.$,{onClick:()=>C(!0),className:"bg-blue-600 text-white",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Submit Paper"]})]})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"sticky top-24",children:(0,a.jsx)(U,{questions:e.questions,answers:b,activeQuestionId:f,onQuestionSelect:e=>{y(e);let s=M.current[e];s&&R.current&&s.scrollIntoView({behavior:"smooth",block:"start"})},totalMarks:s,paperTitle:e.title,paperInfo:{subject:e.subject,examBoard:e.examBoard,year:e.year}})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsx)("div",{ref:R,className:"space-y-6",children:e.questions.map((e,s)=>(0,a.jsx)("div",{ref:s=>{s&&(M.current[e.id]=s)},children:(0,a.jsx)(P,{question:e,questionNumber:s+1,answer:b[e.id]||"",isActive:f===e.id,onAnswerChange:s=>D(e.id,s),onFocus:()=>Z(e.id)})},e.id))})})]})}),(0,a.jsx)(j.N,{children:L&&(0,a.jsx)(g.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsx)(g.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:(0,a.jsxs)(i.Zp,{className:"bg-gray-900 border-white/10 max-w-md w-full",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Submit Paper?"]}),(0,a.jsx)(i.BT,{className:"text-gray-300",children:"Are you sure you want to submit your paper for marking?"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Questions answered:"}),(0,a.jsxs)("span",{className:"text-white",children:[z(),"/",e.questions.length]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Time spent:"}),(0,a.jsx)("span",{className:"text-white",children:B(S)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Completion:"}),(0,a.jsxs)("span",{className:"text-white",children:[Math.round(z()/e.questions.length*100),"%"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(l.$,{onClick:()=>C(!1),variant:"outline",className:"flex-1 border-white/20 text-white hover:bg-white/10",children:"Cancel"}),(0,a.jsx)(l.$,{onClick:F,disabled:v,className:"flex-1 bg-blue-600 text-white",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Submit & Mark"]})})]})]})]})})})})]})}},34729:(e,s,t)=>{t.d(s,{T:()=>i});var a=t(60687);t(43210);var r=t(4780);function i({className:e,...s}){return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}},36463:(e,s,t)=>{t.d(s,{v:()=>r});class a{constructor(){this.logLevel=process.env.NEXT_PUBLIC_LOG_LEVEL||"info",this.setupProductionLogging()}static getInstance(){return a.instance||(a.instance=new a),a.instance}shouldLog(e){let s={debug:0,info:1,warn:2,error:3};return s[e]>=s[this.logLevel]}formatMessage(e,s,t){let a=new Date().toISOString(),r=t?` ${JSON.stringify(t)}`:"";return`[${a}] [${e.toUpperCase()}] ${s}${r}`}async setupProductionLogging(){try{let{getEnvVar:e}=await Promise.resolve().then(t.bind(t,43294)),s=await e("LOGGING_SERVICE");if("sentry"===s)await e("SENTRY_DSN")&&console.warn("Sentry logging not available in Cloudflare Workers environment");else if("logflare"===s){let s=await e("LOGFLARE_API_KEY"),t=await e("LOGFLARE_SOURCE_ID");s&&t&&console.warn("Winston-Logflare logging not available in Cloudflare Workers environment")}else if("datadog"===s){let s=await e("DATADOG_API_KEY");if(s){let{datadogLogs:e}=await t.e(6666).then(t.bind(t,96666));e.init({clientToken:s,site:"datadoghq.com",forwardErrorsToLogs:!0}),this.productionLogger=e}}}catch(e){console.error("Failed to initialize production logging:",e)}}debug(e,s){this.shouldLog("debug")&&console.debug(this.formatMessage("debug",e,s))}info(e,s){this.shouldLog("info")&&(console.info(this.formatMessage("info",e,s)),this.productionLogger&&(this.productionLogger.captureMessage?this.productionLogger.captureMessage(e,"info",s):this.productionLogger.logger&&this.productionLogger.logger.info(e,s)))}warn(e,s){this.shouldLog("warn")&&(console.warn(this.formatMessage("warn",e,s)),this.productionLogger&&(this.productionLogger.captureMessage?this.productionLogger.captureMessage(e,"warning",s):this.productionLogger.logger&&this.productionLogger.logger.warn(e,s)))}error(e,s,t){if(this.shouldLog("error")){let a=s?{error:s.message||s,stack:s.stack}:{};console.error(this.formatMessage("error",e,{...t,...a})),this.productionLogger&&(this.productionLogger.captureException?this.productionLogger.captureException(s||Error(e),{contexts:{context:t}}):this.productionLogger.logger&&this.productionLogger.logger.error(e,{...t,...a}))}}}let r=a.getInstance()},43294:(e,s,t)=>{t.d(s,{getEnvVar:()=>i});var a=t(62426);async function r(){try{return(await (0,a.DM)()).env}catch(e){return process.env}}async function i(e){return(await r())[e]}},56621:(e,s,t)=>{t.d(s,{b:()=>l});var a=t(66437),r=t(43294);let i=null;async function l(){if(!i){let e=await (0,r.getEnvVar)("NEXT_PUBLIC_SUPABASE_URL"),s=await (0,r.getEnvVar)("NEXT_PUBLIC_SUPABASE_ANON_KEY");if(!e||!s)throw Error("Missing Supabase configuration");i=(0,a.UU)(e,s)}return i}(0,a.UU)("https://tqlnqqrrpzmdpgijxiqk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxbG5xcXJycHptZHBnaWp4aXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMTUwNjAsImV4cCI6MjA2NjY5MTA2MH0.ZDCY7DSswAgcUHFlDl3S0BDDXpX3qmyViWXsIGFhwkw")}};